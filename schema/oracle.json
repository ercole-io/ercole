{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "oracleFeature",
    "type": "object",
    "properties": {
        "database": {
            "anyOf": [
                {
                    "type": "null"
                },
                {
                    "type": "object",
                    "required": [
                        "databases",
                        "unlistedRunningDatabases"
                    ],
                    "properties": {
                        "databases": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": [
                                    "instanceNumber",
                                    "instanceName",
                                    "name",
                                    "uniqueName",
                                    "status",
                                    "dbID",
                                    "role",
                                    "isCDB",
                                    "version",
                                    "platform",
                                    "archivelog",
                                    "charset",
                                    "nCharset",
                                    "blockSize",
                                    "cpuCount",
                                    "sgaTarget",
                                    "pgaTarget",
                                    "memoryTarget",
                                    "sgaMaxSize",
                                    "segmentsSize",
                                    "datafileSize",
                                    "allocable",
                                    "elapsed",
                                    "dbTime",
                                    "dailyCPUUsage",
                                    "work",
                                    "asm",
                                    "dataguard",
                                    "patches",
                                    "tablespaces",
                                    "schemas",
                                    "licenses",
                                    "addms",
                                    "segmentAdvisors",
                                    "psus",
                                    "backups",
                                    "featureUsageStats",
                                    "pdbs",
                                    "services"
                                ],
                                "properties": {
                                    "instanceNumber": {
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "instanceName": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 64
                                    },
                                    "name": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 64
                                    },
                                    "uniqueName": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 64
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "OPEN",
                                            "MOUNTED"
                                        ]
                                    },
                                    "dbID": {
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "role": {
                                        "type": "string",
                                        "enum": [
                                            "PRIMARY",
                                            "LOGICAL STANDBY",
                                            "PHYSICAL STANDBY",
                                            "SNAPSHOT STANDBY"
                                        ]
                                    },
                                    "isCDB": {
                                        "type": "boolean"
                                    },
                                    "version": {
                                        "type": "string",
                                        "minLength": 8,
                                        "maxLength": 64
                                    },
                                    "platform": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 64
                                    },
                                    "archivelog": {
                                        "type": "boolean"
                                    },
                                    "charset": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 32
                                    },
                                    "nCharset": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 32
                                    },
                                    "blockSize": {
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "cpuCount": {
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "sgaTarget": {
                                        "type": "number"
                                    },
                                    "pgaTarget": {
                                        "type": "number"
                                    },
                                    "memoryTarget": {
                                        "type": "number"
                                    },
                                    "sgaMaxSize": {
                                        "type": "number"
                                    },
                                    "segmentsSize": {
                                        "type": "number"
                                    },
                                    "datafileSize": {
                                        "type": "number"
                                    },
                                    "allocable": {
                                        "type": "number"
                                    },
                                    "elapsed": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "number"
                                            }
                                        ]
                                    },
                                    "dbTime": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "number"
                                            }
                                        ]
                                    },
                                    "dailyCPUUsage": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "number"
                                            }
                                        ]
                                    },
                                    "work": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "number"
                                            }
                                        ]
                                    },
                                    "asm": {
                                        "type": "boolean"
                                    },
                                    "dataguard": {
                                        "type": "boolean"
                                    },
                                    "patches": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "version",
                                                "patchID",
                                                "action",
                                                "description",
                                                "date"
                                            ],
                                            "properties": {
                                                "version": {
                                                    "type": "string"
                                                },
                                                "patchID": {
                                                    "type": "integer"
                                                },
                                                "action": {
                                                    "type": "string"
                                                },
                                                "description": {
                                                    "type": "string"
                                                },
                                                "date": {
                                                    "type": "string",
                                                    "format": "date"
                                                }
                                            }
                                        }
                                    },
                                    "tablespaces": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "name",
                                                "maxSize",
                                                "total",
                                                "used",
                                                "usedPerc",
                                                "status"
                                            ],
                                            "properties": {
                                                "name": {
                                                    "type": "string"
                                                },
                                                "maxSize": {
                                                    "type": "number",
                                                    "minimum": 0
                                                },
                                                "total": {
                                                    "type": "number",
                                                    "minimum": 0
                                                },
                                                "used": {
                                                    "type": "number",
                                                    "minimum": 0
                                                },
                                                "usedPerc": {
                                                    "type": "number",
                                                    "minimum": 0
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "ONLINE",
                                                        "READ ONLY",
                                                        "OFFLINE"
                                                    ]
                                                }
                                            }
                                        }
                                    },
                                    "schemas": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "indexes",
                                                "lob",
                                                "tables",
                                                "total",
                                                "user"
                                            ],
                                            "properties": {
                                                "indexes": {
                                                    "type": "integer",
                                                    "minimum": 0
                                                },
                                                "lob": {
                                                    "type": "integer",
                                                    "minimum": 0
                                                },
                                                "tables": {
                                                    "type": "integer",
                                                    "minimum": 0
                                                },
                                                "total": {
                                                    "type": "integer",
                                                    "minimum": 0
                                                },
                                                "user": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "licenses": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "name",
                                                "count"
                                            ],
                                            "properties": {
                                                "name": {
                                                    "type": "string",
                                                    "minLength": 1,
                                                    "maxLength": 64
                                                },
                                                "count": {
                                                    "type": "number",
                                                    "minimum": 0
                                                }
                                            }
                                        }
                                    },
                                    "addms": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "finding",
                                                "recommendation",
                                                "action",
                                                "benefit"
                                            ],
                                            "properties": {
                                                "finding": {
                                                    "type": "string"
                                                },
                                                "recommendation": {
                                                    "type": "string"
                                                },
                                                "action": {
                                                    "type": "string"
                                                },
                                                "benefit": {
                                                    "type": "number",
                                                    "minimum": 0,
                                                    "maximum": 100
                                                }
                                            }
                                        }
                                    },
                                    "segmentAdvisors": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "segmentOwner",
                                                "segmentName",
                                                "segmentType",
                                                "partitionName",
                                                "reclaimable",
                                                "recommendation"
                                            ],
                                            "properties": {
                                                "segmentOwner": {
                                                    "type": "string"
                                                },
                                                "segmentName": {
                                                    "type": "string"
                                                },
                                                "segmentType": {
                                                    "type": "string"
                                                },
                                                "partitionName": {
                                                    "type": "string"
                                                },
                                                "reclaimable": {
                                                    "type": "number",
                                                    "minimum": 0
                                                },
                                                "recommendation": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "psus": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "date",
                                                "description"
                                            ],
                                            "properties": {
                                                "date": {
                                                    "type": "string",
                                                    "format": "date"
                                                },
                                                "description": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "backups": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "backupType",
                                                "hour",
                                                "weekDays",
                                                "avgBckSize",
                                                "retention"
                                            ],
                                            "properties": {
                                                "backupType": {
                                                    "type": "string",
                                                    "enum": [
                                                        "Archivelog",
                                                        "Full",
                                                        "Level0",
                                                        "Level1",
                                                        "Incr Lvl 0",
                                                        "Incr Lvl 1",
                                                        "Db Full",
                                                        "Datafile Full",
                                                        "Recvr Area"
                                                    ]
                                                },
                                                "hour": {
                                                    "type": "string",
                                                    "minLength": 5,
                                                    "maxLength": 5,
                                                    "pattern": "^[0-9]{2}:[0-9]{2}$"
                                                },
                                                "weekDays": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "enum": [
                                                            "Monday",
                                                            "Tuesday",
                                                            "Wednesday",
                                                            "Thursday",
                                                            "Friday",
                                                            "Saturday",
                                                            "Sunday"
                                                        ]
                                                    },
                                                    "uniqueItems": true
                                                },
                                                "avgBckSize": {
                                                    "type": "number",
                                                    "minimum": 0
                                                },
                                                "retention": {
                                                    "type": "string",
                                                    "minLength": 1,
                                                    "maxLength": 16
                                                }
                                            }
                                        }
                                    },
                                    "featureUsageStats": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "product",
                                                "feature",
                                                "detectedUsages",
                                                "currentlyUsed",
                                                "firstUsageDate",
                                                "lastUsageDate",
                                                "extraFeatureInfo"
                                            ],
                                            "properties": {
                                                "product": {
                                                    "type": "string",
                                                    "minLength": 1,
                                                    "maxLength": 128
                                                },
                                                "feature": {
                                                    "type": "string",
                                                    "minLength": 1,
                                                    "maxLength": 128
                                                },
                                                "detectedUsages": {
                                                    "type": "integer",
                                                    "minimum": 0
                                                },
                                                "currentlyUsed": {
                                                    "type": "boolean"
                                                },
                                                "firstUsageDate": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "lastUsageDate": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "extraFeatureInfo": {
                                                    "type": "string",
                                                    "maxLength": 128
                                                }
                                            }
                                        }
                                    },
                                    "services": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "name"
                                            ],
                                            "properties": {
                                                "name": {
                                                    "type": "string",
                                                    "minLength": 1,
                                                    "maxLength": 32
                                                }
                                            }
                                        }
                                    },
                                    "pdbs": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "name",
                                                "status",
                                                "tablespaces",
                                                "schemas",
                                                "services"
                                            ],
                                            "properties": {
                                                "name": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "OPEN",
                                                        "READ WRITE",
                                                        "READ ONLY",
                                                        "MOUNTED"
                                                    ]
                                                },
                                                "tablespaces": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "required": [
                                                            "name",
                                                            "maxSize",
                                                            "total",
                                                            "used",
                                                            "usedPerc",
                                                            "status"
                                                        ],
                                                        "properties": {
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "maxSize": {
                                                                "type": "number",
                                                                "minimum": 0
                                                            },
                                                            "total": {
                                                                "type": "number",
                                                                "minimum": 0
                                                            },
                                                            "used": {
                                                                "type": "number",
                                                                "minimum": 0
                                                            },
                                                            "usedPerc": {
                                                                "type": "number",
                                                                "minimum": 0
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "ONLINE",
                                                                    "READ ONLY",
                                                                    "OFFLINE"
                                                                ]
                                                            }
                                                        }
                                                    }
                                                },
                                                "schemas": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "required": [
                                                            "indexes",
                                                            "lob",
                                                            "tables",
                                                            "total",
                                                            "user"
                                                        ],
                                                        "properties": {
                                                            "indexes": {
                                                                "type": "integer",
                                                                "minimum": 0
                                                            },
                                                            "lob": {
                                                                "type": "integer",
                                                                "minimum": 0
                                                            },
                                                            "tables": {
                                                                "type": "integer",
                                                                "minimum": 0
                                                            },
                                                            "total": {
                                                                "type": "integer",
                                                                "minimum": 0
                                                            },
                                                            "user": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    }
                                                },
                                                "services": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "required": [
                                                            "name"
                                                        ],
                                                        "properties": {
                                                            "name": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "unlistedRunningDatabases": {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "minLength": 1
                            },
                            "uniqueItems": true
                        }
                    }
                }
            ]
        },
        "exadata": {
            "anyOf": [
                {
                    "type": "null"
                },
                {
                    "type": "object",
                    "required": [
                        "components"
                    ],
                    "properties": {
                        "components": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": [
                                    "hostname",
                                    "serverType",
                                    "model",
                                    "swVersion",
                                    "swReleaseDate",
                                    "runningCPUCount",
                                    "totalCPUCount",
                                    "memory",
                                    "status",
                                    "runningPowerSupply",
                                    "totalPowerSupply",
                                    "powerStatus",
                                    "runningFanCount",
                                    "totalFanCount",
                                    "fanStatus",
                                    "tempActual",
                                    "tempStatus",
                                    "cellsrvServiceStatus",
                                    "msServiceStatus",
                                    "rsServiceStatus",
                                    "flashcacheMode",
                                    "cellDisks"
                                ],
                                "properties": {
                                    "hostname": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 253,
                                        "format": "idn-hostname"
                                    },
                                    "serverType": {
                                        "type": "string",
                                        "enum": [
                                            "DBServer",
                                            "IBSwitch",
                                            "StorageServer"
                                        ]
                                    },
                                    "model": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 32
                                    },
                                    "swVersion": {
                                        "type": "string"
                                    },
                                    "swReleaseDate": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "runningCPUCount": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "integer",
                                                "minimum": 1
                                            }
                                        ]
                                    },
                                    "totalCPUCount": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "integer",
                                                "minimum": 1
                                            }
                                        ]
                                    },
                                    "memory": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "integer",
                                                "$comment": "memory in GB",
                                                "minimum": 1
                                            }
                                        ]
                                    },
                                    "status": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "string",
                                                "enum": [
                                                    "online",
                                                    "offline"
                                                ]
                                            }
                                        ]
                                    },
                                    "runningPowerSupply": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "integer",
                                                "minimum": 1
                                            }
                                        ]
                                    },
                                    "totalPowerSupply": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "integer",
                                                "minimum": 1
                                            }
                                        ]
                                    },
                                    "powerStatus": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "runningFanCount": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "integer",
                                                "minimum": 1
                                            }
                                        ]
                                    },
                                    "totalFanCount": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "integer",
                                                "minimum": 1
                                            }
                                        ]
                                    },
                                    "fanStatus": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "tempActual": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "number"
                                            }
                                        ]
                                    },
                                    "tempStatus": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "cellsrvServiceStatus": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "msServiceStatus": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "rsServiceStatus": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "string"
                                            }
                                        ]
                                    },
                                    "flashcacheMode": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "string",
                                                "enum": [
                                                    "WriteBack",
                                                    "WriteThrough"
                                                ]
                                            }
                                        ]
                                    },
                                    "cellDisks": {
                                        "anyOf": [
                                            {
                                                "type": "null"
                                            },
                                            {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "required": [
                                                        "errCount",
                                                        "name",
                                                        "status",
                                                        "usedPerc"
                                                    ],
                                                    "properties": {
                                                        "errCount": {
                                                            "type": "integer",
                                                            "minimum": 0
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "minLength": 1,
                                                            "maxLength": 64
                                                        },
                                                        "status": {
                                                            "type": "string"
                                                        },
                                                        "usedPerc": {
                                                            "type": "integer",
                                                            "minimum": 0,
                                                            "maximum": 100
                                                        }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        }
    }
}