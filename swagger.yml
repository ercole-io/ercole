openapi: 3.0.2
info:
  title: Ercole
  version: 2.0.0
  license:
    name: GNU General Public License v3.0 or later
    url: 'https://www.gnu.org/licenses/gpl-3.0-standalone.html'
  description: API used to talk to ercole services
  contact:
    name: Issues support
    url: 'https://github.com/ercole-io/ercole'
servers:
  - description: Api service on dev.ercole.io
    url: 'https://dev.ercole.io/api'
  - description: Chart service on dev.ercole.io
    url: 'https://dev.ercole.io/chart'
  - description: Data service on dev.ercole.io
    url: 'https://dev.ercole.io/data'
  - description: Alert service on dev.ercole.io
    url: 'https://dev.ercole.io/alert'
  - description: Repo service on dev.ercole.io
    url: 'https://dev.ercole.io/repo'
  - description: Data service
    url: 'http://localhost:11111'
  - url: 'http://localhost:11112'
    description: Alert service
  - url: 'http://localhost:11113'
    description: Api service
  - url: 'http://localhost:11116'
    description: Chart service
tags:
  - name: data-service
    description: API served by data-service
  - name: alert-service
    description: API served by alert-service
  - name: api-service
    description: API served by api-service
  - name: chart-service
    description: API served by chart-service
  - name: fe-user
    description: API used by the end user
  - name: agent-user
    description: API used by the ercole-agent
  - name: developer-user
    description: API used by the developers
  - name: service-user
    description: API used by the services
  - name: read
    description: API that don't change the state of the informations
  - name: write
    description: API that change the state of the informations
components:
  securitySchemes:
    basicAuthDataService:
      type: http
      scheme: basic
      description: access to data-service APIs
    basicAuthAlertService:
      type: http
      scheme: basic
      description: access to alert-service APIs
    basicAuthApiService:
      type: http
      scheme: basic
      description: access to api-service APIs
    tokenAuthApiService:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: access using the access token
  responses:
    error:
      description: Contains some informations about an error
      content:
        application/json:
          schema:
            type: object
            additionalProperties: false
            properties:
              error:
                type: string
              message:
                type: string
              sourceFilename:
                type: string
              lineNumber:
                type: integer
            required:
              - error
              - message
              - sourceFilename
              - lineNumber
          examples:
            Test1:
              value:
                error: Invalid  status
                errorDescription: invalid status
                sourceFilename: /home/travis/go/src/github.com/ercole-io/ercole/api-service/controller/alerts_api.go
                lineNumber: 65
  schemas:
    HostDataInfo:
      type: object
      required:
        - hostname
        - environment
        - location
        - cpuModel
        - cpuCores
        - cpuThreads
        - socket
        - type
        - virtual
        - kernel
        - os
        - memoryTotal
        - swapTotal
        - oracleCluster
        - veritasCluster
        - sunCluster
        - aixCluster
      properties:
        hostname:
          type: string
          pattern: '^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$'
        environment:
          type: string
        location:
          type: string
        cpuModel:
          type: string
        cpuCores:
          type: integer
        cpuThreads:
          type: integer
        socket:
          type: integer
        type:
          type: string
        virtual:
          type: boolean
        kernel:
          type: string
        os:
          type: string
        memoryTotal:
          type: number
        swapTotal:
          type: number
        oracleCluster:
          type: boolean
        veritasCluster:
          type: boolean
        sunCluster:
          type: boolean
        aixCluster:
          type: boolean
    Filesystems:
      type: array
      items:
        type: object
        properties:
          filesystem:
            type: string
          fsType:
            type: string
          size:
            type: string
          used:
            type: string
          usedPerc:
            type: string
          mountedOn:
            type: string
        required:
          - filesystem
          - fsType
          - size
          - used
          - usedPerc
          - mountedOn
    Patch:
      type: object
      properties:
        database:
          type: string
        version:
          type: string
        patchID:
          type: string
        action:
          type: string
        description:
          type: string
        date:
          type: string
      required:
        - database
        - version
        - patchID
        - action
        - description
        - date
    Tablespace:
      type: object
      properties:
        database:
          type: string
        name:
          type: string
        maxSize:
          type: string
        total:
          type: string
        used:
          type: string
        usedPerc:
          type: string
        status:
          type: string
      required:
        - database
        - name
        - maxSize
        - total
        - used
        - usedPerc
        - status
    Schema:
      type: object
      properties:
        Database:
          type: string
        User:
          type: string
        Total:
          type: integer
        Tables:
          type: integer
        Indexes:
          type: integer
        lob:
          type: integer
      required:
        - Database
        - User
        - Total
        - Tables
        - Indexes
        - LOB
    OracleDatabaseFeature:
      type: object
      properties:
        Name:
          type: string
        Status:
          type: boolean
      required:
        - Name
        - Status
    License:
      type: object
      properties:
        Name:
          type: string
        Count:
          type: number
      required:
        - Name
        - Count
    ADDM:
      type: object
      properties:
        Finding:
          type: string
        Recommendation:
          type: string
        Action:
          type: string
        Benefit:
          oneOf:
            - type: string
            - type: boolean
        Hostname:
          type: string
          nullable: true
        Location:
          type: string
          nullable: true
        Environment:
          type: string
          nullable: true
        CreatedAt:
          type: string
          nullable: true
      required:
        - Finding
        - Recommendation
        - Action
        - Benefit
    SegmentAdvisor:
      type: object
      properties:
        SegmentOwner:
          type: string
        SegmentName:
          type: string
        SegmentType:
          type: string
        PartitionName:
          type: string
        Reclaimable:
          type: string
        Recommendation:
          type: string
      required:
        - SegmentOwner
        - SegmentName
        - SegmentType
        - PartitionName
        - Reclaimable
        - Recommendation
    LastPSU:
      type: object
      properties:
        Date:
          type: string
        Description:
          type: string
      required:
        - Date
        - Description
    Backup:
      type: object
      properties:
        BackupType:
          type: string
        Hour:
          type: string
        WeekDays:
          type: string
        AvgBckSize:
          type: string
        Retention:
          type: string
      required:
        - BackupType
        - Hour
        - WeekDays
        - AvgBckSize
        - Retention
    Database:
      type: object
      properties:
        InstanceNumber:
          type: string
          nullable: true
        InstanceName:
          type: string
        Name:
          type: string
        UniqueName:
          type: string
        Status:
          type: string
        Version:
          type: string
        Platform:
          type: string
          nullable: true
        Archivelog:
          type: string
          nullable: true
        Charset:
          type: string
          nullable: true
        nCharset:
          type: string
          nullable: true
        BlockSize:
          type: string
        cpuCount:
          type: string
        sgaTarget:
          type: string
          nullable: true
        pgaTarget:
          type: string
          nullable: true
        MemoryTarget:
          type: string
          nullable: true
        sgaMaxSize:
          type: string
          nullable: true
        SegmentsSize:
          type: string
        Used:
          type: string
          nullable: true
        Allocable:
          type: string
          nullable: true
        Elapsed:
          type: string
          nullable: true
        dbTime:
          type: string
          nullable: true
        DailycpuUsage:
          type: string
          nullable: true
        Work:
          type: string
        asm:
          type: boolean
          nullable: true
        Dataguard:
          type: boolean
        rac:
          nullable: true
          type: boolean
        ha:
          nullable: true
          type: boolean
        Hostname:
          type: string
          nullable: true
        Location:
          type: string
          nullable: true
        Environment:
          type: string
          nullable: true
        CreatedAt:
          type: string
          nullable: true
        ArchiveLogStatus:
          type: boolean
          nullable: true
        Memory:
          type: number
          nullable: true
        DatafileSize:
          type: number
          nullable: true
        Patches:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/Patch'
        Tablespaces:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/Tablespace'
        Schemas:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/Schema'
        Features:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/OracleDatabaseFeature'
        Licenses:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/License'
        addms:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/ADDM'
        SegmentAdvisors:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/SegmentAdvisor'
        LastpsUs:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/LastPSU'
        Backups:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/Backup'
        Changes:
          nullable: true
          type: array
          items:
            $ref: '#/components/schemas/DatabaseChange'
      required:
        - Name
        - UniqueName
        - Status
        - Version
        - BlockSize
        - CPUCount
        - SegmentsSize
        - Work
        - Dataguard
    Cluster:
      type: object
      properties:
        Name:
          type: string
        Environment:
          type: string
          nullable: true
        Location:
          type: string
          nullable: true
        Hostname:
          type: string
          nullable: true
        HostnameAgentVirtualization:
          type: string
          nullable: true
        VirtualizationNodes:
          nullable: true
          anyOf:
            - type: string
              nullable: true
            - type: array
              items:
                type: string
              uniqueItems: true
        VirtualizationNodesCount:
          nullable: true
          type: integer
        VirtualizationNodesStats:
          nullable: true
          type: object
          required:
            - VirtualizationNode
            - TotalVMsCount
            - TotalVMsWithErcoleAgentCount
            - TotalVMsWithoutErcoleAgentCount
          properties:
            VirtualizationNode:
              type: string
            TotalvMsCount:
              type: integer
            TotalvMsWithErcoleAgentCount:
              type: integer
            TotalvMsWithoutErcoleAgentCount:
              type: integer
        Type:
          type: string
        cpu:
          type: integer
        Sockets:
          type: integer
        vmsCount:
          type: integer
          nullable: true
        vmsErcoleAgentCount:
          type: integer
          nullable: true
        vms:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              clusterName:
                type: string
              hostname:
                type: string
              cappedCPU:
                type: boolean
              virtualizationNode:
                type: string
            required:
              - name
              - clusterName
              - hostname
              - cappedCPU
              - virtualizationNode
      required:
        - name
        - type
        - cpu
        - sockets
        - vms
    CellDisk:
      type: object
      properties:
        name:
          type: string
        status:
          type: string
        errCount:
          type: string
        usedPerc:
          type: string
      required:
        - name
        - status
        - errCount
        - usedPerc
    ExadataDev:
      type: object
      properties:
        hostname:
          type: string
        serverType:
          type: string
          nullable: true
        model:
          type: string
        swVersion:
          type: string
        cpuEnabled:
          type: string
          nullable: true
        memory:
          type: string
          nullable: true
        status:
          type: string
          nullable: true
        powerCount:
          type: string
          nullable: true
        powerStatus:
          type: string
          nullable: true
        fanCount:
          type: string
          nullable: true
        fanStatus:
          type: string
          nullable: true
        tempActual:
          type: string
          nullable: true
        tempStatus:
          type: string
          nullable: true
        cellsrvService:
          type: string
          nullable: true
        msService:
          type: string
          nullable: true
        rsService:
          type: string
          nullable: true
        flashcacheMode:
          type: string
          nullable: true
        cellDisks:
          nullable: true
          type: array
          items:
            $ref: '#/components/schemas/CellDisk'
      required:
        - hostname
        - model
        - swVersion
    HostData:
      description: A hostdata from FE
      type: object
      properties:
        hostname:
          type: string
        environment:
          type: string
        location:
          type: string
        version:
          type: string
        hostDataSchemaVersion:
          type: integer
        databases:
          type: string
        schemas:
          type: string
          nullable: true
        info:
          $ref: '#/components/schemas/HostDataInfo'
        os:
          type: string
          nullable: true
        kernel:
          type: string
          nullable: true
        oracleCluster:
          type: boolean
          nullable: true
        sunCluster:
          type: boolean
          nullable: true
        veritasCluster:
          type: boolean
          nullable: true
        virtual:
          type: boolean
          nullable: true
        type:
          type: string
          nullable: true
        cpuThreads:
          type: integer
          nullable: true
        cpuCores:
          type: integer
          nullable: true
        socket:
          type: integer
          nullable: true
        memTotal:
          type: integer
          nullable: true
        swapTotal:
          type: integer
          nullable: true
        cpuModel:
          type: string
          nullable: true
        physicalServerName:
          type: string
          nullable: true
        virtualServerName:
          type: string
          nullable: true
        virtualizationTechnology:
          type: string
          nullable: true
        dbInstanceName:
          type: string
          nullable: true
        pluggableDatabaseName:
          type: string
          nullable: true
        connectString:
          type: string
          nullable: true
        productVersion:
          type: string
          nullable: true
        productEdition:
          type: string
          nullable: true
        features:
          type: object
          properties:
            oracle:
              type: object
              properties:
                databases:
                  type: array
                  items:
                    type: object
                    properties:
                      '':
                        type: string
                unlistedRunningDatabases:
                  type: array
                  items:
                    type: string
        racNodeNames:
          type: string
          nullable: true
        processorModel:
          type: string
          nullable: true
        processors:
          type: integer
          nullable: true
        coresPerProcessor:
          type: integer
          nullable: true
        threadsPerCore:
          type: integer
          nullable: true
        processorSpeed:
          type: string
          nullable: true
        serverPurchaseDate:
          type: string
          nullable: true
        operatingSystem:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
        physicalCores:
          type: integer
          nullable: true
        history:
          type: array
          items:
            $ref: '#/components/schemas/HistoryEntry'
        extra:
          type: object
          required:
            - filesystems
          properties:
            filesystems:
              $ref: '#/components/schemas/Filesystems'
            databases:
              nullable: true
              type: array
              items:
                $ref: '#/components/schemas/Database'
            clusters:
              nullable: true
              type: array
              items:
                $ref: '#/components/schemas/Cluster'
            exadata:
              nullable: true
              type: object
              properties:
                devices:
                  type: array
                  items:
                    $ref: '#/components/schemas/ExadataDev'
              required:
                - devices
        cluster:
          type: string
          nullable: true
        virtualizationNode:
          type: string
          nullable: true
      required:
        - hostname
        - environment
        - location
        - version
        - hostDataSchemaVersion
        - info
        - extra
    PageMetadata:
      type: object
      required:
        - empty
        - first
        - last
        - number
        - size
        - totalElements
        - totalPages
      properties:
        empty:
          type: boolean
        first:
          type: boolean
        last:
          type: boolean
        number:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
        totalPages:
          type: integer
    HistoryEntry:
      type: object
      required:
        - _id
        - createdAt
      properties:
        _id:
          type: string
        createdAt:
          type: string
        totalDailycpuUsage:
          type: number
    DatabaseChange:
      type: object
      required:
        - dailyCPUUsage
        - segmentsSize
        - updated
        - used
      properties:
        dailycpuUsage:
          type: string
        segmentsSize:
          type: string
        updated:
          type: string
        used:
          type: string
    PatchingFunction:
      type: object
      required:
        - code
        - vars
      properties:
        id:
          type: string
          nullable: true
        hostname:
          type: string
          nullable: true
        createdAt:
          type: string
          nullable: true
        code:
          type: string
        vars:
          type: object
    Alert:
      title: Alert
      type: object
      properties:
        otherInfo:
          type: object
          properties:
            dbName:
              type: string
              description: The name of the database
            hostname:
              type: string
              description: The name of the host
        hostname:
          type: string
          description: The name of the host
        description:
          type: string
          description: 'The message alert receive from the host at that time '
        alertCategory:
          type: string
          enum:
            - SYSTEM
            - AGENT
            - LICENSE
        alertAffectedTechnology:
          nullable: true
          type: string
          enum:
            - Oracle/Database
            - Oracle/Exadata
        alertStatus:
          type: string
          enum:
            - NEW
            - ACK
          example: NEW
        alertSeverity:
          type: string
          enum:
            - WARNING
            - CRITICAL
            - INFO
        alertCode:
          type: string
          enum:
            - NEW_DATABASE
            - NEW_OPTION
            - NEW_LICENSE
            - NEW_SERVER
            - NO_DATA
        _id:
          type: string
          description: ID of the alert
      required:
        - hostname
        - description
        - alertCategory
        - alertAffectedTechnology
        - alertStatus
        - alertSeverity
        - alertCode
        - _id
    PatchAdvisorInfo:
      type: object
      properties:
        location:
          type: string
        environment:
          type: string
        hostname:
          type: string
          pattern: '^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$'
        createdAt:
          type: string
        date:
          type: string
        dbname:
          type: string
        dbver:
          type: string
        description:
          type: string
        status:
          type: string
        _id:
          type: string
      required:
        - location
        - environment
        - hostname
        - createdAt
        - date
        - dbname
        - dbver
        - description
        - status
        - _id
    ExadataSummary:
      type: object
      properties:
        hostname:
          type: string
        location:
          type: string
        environment:
          type: string
        createdAt:
          type: string
        dbServers:
          type: array
          items:
            $ref: '#/components/schemas/ExadataDev'
        storageServers:
          type: array
          items:
            $ref: '#/components/schemas/ExadataDev'
        ibSwitches:
          type: array
          items:
            $ref: '#/components/schemas/ExadataDev'
      required:
        - hostname
        - location
        - environment
        - createdAt
        - dbServers
        - storageServers
        - ibSwitches
    Features:
      type: object
      properties:
        Oracle/Database:
          type: boolean
          nullable: true
        Oracle/Exadata:
          type: boolean
          nullable: true
        Postgresql/Postgresql:
          type: boolean
          nullable: true
        Microsoft/sqlServer:
          type: boolean
          nullable: true
    TechnologyStatus:
      type: object
      properties:
        product:
          type: string
          description: technology product code
        hostsCount:
          type: integer
          description: number of hosts found supporting the current product
        compliance:
          type: number
          description: |-
            a metric ranging [0..1] calculated as follows:
            if a ULA exists for a given product, its compliance := 1.

            When calculating the total, this product's purchasedLicenses := usedLicenses
            else if usedLicenses <= purchasedLicenses the product's compliance := 1.

            When calculating the total, this product's purchasedLicenses := usedLicenses else this product's compliance := purchasedLicenses / usedLicenses.
        unpaidDues:
          type: number
          description: |-
            "unpaidDues" = difference between calculated cost of used and purchased licenses:
            if usedLicensesCost <= purchasedLicensesCost, then unpaidDues := 0
            else unpaidDues := usedLicensesCost - purchasedLicensesCost
      required:
        - product
        - hostsCount
        - compliance
        - unpaidDues
    AllTechnologyComplianceStatus:
      type: object
      properties:
        hostsCount:
          type: integer
          description: number of hosts
        compliance:
          type: number
          description: sum(purchasedLicenses) / sum(usedLicenses) for each product
        unpaidDues:
          type: number
          description: sum of unpaidDues
      required:
        - hostsCount
        - compliance
        - unpaidDues
    AggregatedCodeSeverityAlerts:
      type: object
      required:
        - category
        - code
        - severity
        - count
        - affectedHosts
        - oldestAlert
      properties:
        category:
          type: string
          enum:
            - SYSTEM
            - AGENT
            - LICENSE
        code:
          type: string
          externalDocs:
            url: 'https://github.com/ercole-io/ercole/blob/master/model/alert.go'
        severity:
          type: string
          externalDocs:
            url: 'https://github.com/ercole-io/ercole/blob/master/model/alert.go'
        count:
          type: integer
        affectedHosts:
          type: integer
        oldestAlert:
          type: string
          format: date-time
          example: '2020-05-05T08:23:40+00:00'
    AggregatedCategorySeverityAlerts:
      type: object
      required:
        - category
        - severity
        - count
        - affectedHosts
        - oldestAlert
      properties:
        category:
          type: string
          enum:
            - SYSTEM
            - AGENT
            - LICENSE
        severity:
          type: string
          externalDocs:
            url: 'https://github.com/ercole-io/ercole/blob/master/model/alert.go'
        count:
          type: integer
        affectedHosts:
          type: integer
        oldestAlert:
          type: string
          format: date-time
          example: '2020-05-05T08:23:40+00:00'
    LicenseCount:
      type: object
      properties:
        _id:
          type: string
        used:
          type: number
        count:
          type: number
        costPerProcessor:
          type: number
        unlimited:
          type: boolean
        paidCost:
          type: number
        totalCost:
          type: number
        compliance:
          type: boolean
        hosts:
          nullable: true
          type: array
          items:
            type: object
            required:
              - hostname
              - databases
            properties:
              hostname:
                type: string
              databases:
                type: array
                uniqueItems: true
                items:
                  type: string
      required:
        - _id
        - used
        - count
        - totalCost
        - paidCost
        - costPerProcessor
        - compliance
        - unlimited
    LicenseModifier:
      type: object
      required:
        - _id
        - hostname
        - databaseName
        - licenseName
        - newValue
      properties:
        _id:
          type: string
        hostname:
          type: string
        databaseName:
          type: string
        licenseName:
          type: string
        newValue:
          type: number
    TechnologyInfo:
      type: object
      required:
        - product
        - prettyName
        - color
        - logo
      properties:
        product:
          type: string
        prettyName:
          type: string
        color:
          type: string
        logo:
          type: string
          description: base64 encoded png 256x256 image
    Chart:
      type: object
      required:
        - data
        - legend
      properties:
        legend:
          additionalProperties:
            type: string
        data:
          type: array
          items:
            type: object
            required:
              - color
              - name
              - size
            properties:
              color:
                type: string
              name:
                type: string
              size:
                type: number
    ChangeChart:
      type: object
      required:
        - data
        - legend
      properties:
        legend:
          additionalProperties:
            type: string
        data:
          type: array
          items:
            type: object
            required:
              - name
              - size
              - change
            properties:
              name:
                type: string
              size:
                type: number
              change:
                type: number
    TechnologyTypesChart:
      type: object
      required:
        - databases
        - middlewares
        - operatingSystems
        - legend
      properties:
        legend:
          additionalProperties:
            type: string
        databases:
          type: array
          items:
            type: object
            required:
              - name
              - size
            properties:
              name:
                type: string
              size:
                type: number
        middlewares:
          type: array
          items:
            type: object
            required:
              - name
              - size
            properties:
              name:
                type: string
              size:
                type: number
        operatingSystems:
          type: array
          items:
            type: object
            required:
              - name
              - size
            properties:
              name:
                type: string
              size:
                type: number
    LicenseType:
      description: ''
      type: object
      properties:
        id:
          type: string
          minLength: 1
        itemDescription:
          type: string
          minLength: 1
        metric:
          type: string
          minLength: 1
        cost:
          type: number
      required:
        - id
        - itemDescription
        - metric
        - cost
    MySQLAgreement:
      description: ''
      type: object
      properties:
        id:
          $ref: '#/components/schemas/ObjectID'
        type:
          type: string
          minLength: 1
        agreementID:
          type: string
          minLength: 1
        csi:
          type: string
          minLength: 1
        numberOfLicenses:
          type: integer
          minimum: 0
        clusters:
          type: array
          items:
            type: string
        hosts:
          type: array
          items:
            type: string
      required:
        - id
        - type
        - agreementID
        - csi
        - numberOfLicenses
        - clusters
        - hosts
    ObjectID:
      type: string
      title: ObjectID
      example: 605dbac5f3923acddba4fac5
      minLength: 24
      maxLength: 24
      x-examples:
        example-1: 605dbac5f3923acddba4fac5
  parameters:
    search:
      in: query
      name: search
      required: false
      description: filter the result using search terms
      allowEmptyValue: true
      example: foobar
      schema:
        type: string
        readOnly: true
        example: foobar
    sort-by:
      in: query
      name: sort-by
      required: false
      description: sort the result by a field
      allowEmptyValue: true
      example: foobar
      schema:
        type: string
        readOnly: true
        example: CreatedAt
    sort-desc:
      schema:
        type: boolean
      in: query
      name: sort-desc
      description: |
        Sort the field descendently instead of ascendently
      allowEmptyValue: true
    page:
      schema:
        type: integer
      in: query
      name: page
      description: Number of the page
      allowEmptyValue: true
    size:
      schema:
        type: integer
      in: query
      name: size
      description: Size of the page
      allowEmptyValue: true
    location:
      schema:
        type: string
        example: Italy
      in: query
      name: location
      description: Filter by location
      allowEmptyValue: true
    environment:
      schema:
        type: string
        example: TST
      in: query
      name: environment
      description: Filter by environment
      allowEmptyValue: true
    older-than:
      schema:
        type: string
        format: date-time
        example: '2020-05-05T08:23:40+00:00'
      in: query
      name: older-than
      description: Filter until the date
      allowEmptyValue: true
    limit:
      schema:
        type: integer
        example: 15
      in: query
      name: limit
      description: Limit the size of the result
      allowEmptyValue: true
    window-time:
      schema:
        type: integer
        default: 6
      in: query
      name: window-time
      description: 'window time to check the patch date, in months'
paths:
  /ping:
    get:
      summary: Check the availability of the server
      description: Check the availability of the server
      tags:
        - data-service
        - api-service
        - alert-service
        - developer-user
        - read
      operationId: ping
      responses:
        '200':
          description: OK
          content:
            text/plain:
              schema:
                type: string
                example: PONG!
                readOnly: true
  '/queue/host-data-insertion/{id}':
    post:
      tags:
        - alert-service
        - service-user
        - write
      security:
        - basicAuthAlertService: []
      summary: Enqueue a host data insertion event
      description: Add a host data insertion event to the queue
      operationId: hostDataInsertion
      parameters:
        - in: path
          name: id
          description: ID of the inserted hostdata
          required: true
          schema:
            type: string
            minLength: 24
            maxLength: 24
            pattern: '^[0-9a-fA-F]+$'
            example: 5e3a95f6d76af99696203d4a
      responses:
        '200':
          description: OK
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /user/login:
    post:
      tags:
        - api-service
        - fe-user
      security: []
      summary: Request access token
      description: Request a user access token given the credentials. Note that the behaviour and interface may change if the service is configured to use different authentication provider.
      operationId: GetToken
      responses:
        '200':
          description: Access token
          content:
            text/plain:
              schema:
                type: string
                readOnly: true
                example: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOlsidXNlciJdLCJleHAiOjE1ODg2NjExMjMsImlhdCI6MTU4ODY2MDIyMywiaXNzIjoiZXJjb2xlIiwianRpIjoidXNlciIsIm5iZiI6MTU4ODY2MDIyMywic3ViIjoidXNlciJ9.QJhUuBR4Z8uPncXITUjRVHktZXLVax1wstMMd4x6qSDPmxGbYTfOINUawgNNSV9ho-C0rh3icks3Q3227fiyUEcdV0Tfa2O5t7lJX0A4MdTnd2sVv_xxlMju8lCBGnf82fvtSg3C0rQsWnmxgC1rBDW3lzru0ffIJG_JrV3mNxhigniBzm_C0Gq1AaL2cmZ0POCnYJReYcLY-9maKRhMsjcart8pqGZ-5jEjMNWxSc7Lh2snCZklFE0NrmtxvaWITSjm4JGWvTwZcWIfTNBiZRABr5OKARVPMsdgOZ--a4kjIsdXngtIX-C5iaISrgRAUv89XInNBvrquqXnq7p5vg
                description: JWT access token
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts:
    get:
      tags:
        - api-service
        - fe-user
      operationId: SearchHosts
      summary: Search a list of hosts
      description: Get a list of hosts filtered using various search terms and various params. Can also generate a XLSX file
      parameters:
        - in: query
          name: mode
          description: change the scheme of the output
          allowEmptyValue: true
          example: full
          schema:
            type: string
            readOnly: true
            enum:
              - full
              - summary
              - lms
              - mhd
        - $ref: '#/components/parameters/search'
        - in: query
          name: hostname
          description: filter by hostname
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: database
          description: filter by a database name
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: technology
          description: filter by a technology
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: hardware-abstraction-technology
          description: filter by the HA technology
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: cluster
          description: filter by the name of virtualization cluster. use 'NULL' for searching host that aren't part of a virtualization cluster
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: physical-host
          description: filter by the name of physical host on which the host runs
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: operating-system
          description: filter by the operating system
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: kernel
          description: filter by the kernel
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: memory-total-lte
          description: filter the hosts with the Info.MemoryTotal less than memory-total-lte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: memory-total-gte
          description: filter the hosts with the Info.MemoryTotal less than memory-total-gte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: swap-total-lte
          description: filter the hosts with the Info.SwapTotal less than swap-total-lte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: swap-total-gte
          description: filter the hosts with the Info.SwapTotal less than swap-total-gte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: is-member-of-cluster
          description: filter the host by operating systems cluster membership
          allowEmptyValue: true
          schema:
            type: boolean
        - in: query
          name: cpu-model
          description: filter by CPU model
          allowEmptyValue: true
          schema:
            type: boolean
        - in: query
          name: cpu-cores-lte
          description: filter the hosts with the Info.CPUCores less than cpu-cores-lte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: cpu-cores-gte
          description: filter the hosts with the Info.CPUCores less than cpu-cores-gte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: cpu-threads-lte
          description: filter the hosts with the Info.CPUThreads less than cpu-threads-lte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: cpu-threads-gte
          description: filter the hosts with the Info.CPUThreads less than cpu-threads-gte value
          allowEmptyValue: true
          schema:
            type: number
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/HostData'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
                  - type: array
                    description: full non paged
                    items:
                      $ref: '#/components/schemas/HostData'
                  - type: object
                    description: summary paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/HostData'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
                  - type: array
                    description: summary non paged
                    items:
                      $ref: '#/components/schemas/HostData'
                  - type: object
                    description: lms paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/HostData'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
                  - type: array
                    description: lms non paged
                    items:
                      $ref: '#/components/schemas/HostData'
            application/vnd.oracle.lms+vnd.openxmlformats-officedocument.spreadsheetml.sheet: {}
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet: {}
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  '/hosts/{hostname}':
    parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetHost
      summary: Get a host
      description: Get a host
      parameters:
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: Result of the search
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HostData'
    delete:
      tags:
        - api-service
        - fe-user
        - write
      operationId: ArchiveHost
      summary: Archive a host
      description: Archive a host
      responses:
        '200':
          description: The host is archived
          content: {}
        '401':
          $ref: '#/components/responses/error'
        '404':
          description: The host is not found
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  '/hosts/{hostname}/patching-function':
    parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
    get:
      tags:
        - api-service
        - developer-user
        - read
      operationId: GetPatchingFunction
      summary: Get a patching function of a host
      description: Get a patching function of a host
      responses:
        '200':
          description: Patching function of the host
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatchingFunction'
        '401':
          $ref: '#/components/responses/error'
        '404':
          description: The host or patching function don"t exist
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
    put:
      tags:
        - api-service
        - developer-user
        - write
      operationId: SetPatchingFunction
      summary: Set a patching function of a host
      description: Set the patching function of a host
      responses:
        '200':
          description: Patching function of the host
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatchingFunction'
        '401':
          $ref: '#/components/responses/error'
        '404':
          description: The host don"t exist
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  '/hosts/{hostname}/technologies/oracle/databases/{dbname}/tags':
    parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
      - in: path
        name: dbname
        schema:
          type: string
        required: true
        description: name of the modifying database
    post:
      tags:
        - api-service
        - fe-user
        - write
      operationId: AddTagToOracleDatabase
      summary: Add a tag to a database of a host
      description: Add a tag to a database of a host
      requestBody:
        required: true
        content:
          text/plain:
            schema:
              type: string
      responses:
        '200':
          description: The tag was successfully attached to the db
          content:
            application/json: {}
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  '/hosts/{hostname}/technologies/oracle/databases/{dbname}/tags/{tagname}':
    parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
      - in: path
        name: dbname
        schema:
          type: string
        required: true
        description: name of the modifying database
      - in: path
        name: tagname
        schema:
          type: string
        required: true
        description: name of the tag
    delete:
      tags:
        - api-service
        - fe-user
        - write
      operationId: DeleteTagOfOracleDatabase
      summary: Delete a tag of a database of a host
      description: Add a tag of a database of a host
      responses:
        '200':
          description: The tag was successfully deleted from the db
          content:
            application/json: {}
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  '/hosts/{hostname}/technologies/oracle/databases/{dbname}/licenses/{licenseName}':
    parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
      - in: path
        name: dbname
        schema:
          type: string
        required: true
        description: name of the modifying database
      - in: path
        name: licenseName
        schema:
          type: string
        required: true
        description: name of the license
    put:
      tags:
        - api-service
        - fe-user
        - write
      operationId: SetOracleDatabaseLicenseModifier
      summary: Change the value of a license of a database
      description: Change the value of a license of a database
      requestBody:
        content:
          text/plain:
            schema:
              type: number
      responses:
        '200':
          description: The value of the the license was changed successfully
          content:
            application/json: {}
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  '/hosts/{hostname}/technologies/oracle/databases/{dbname}/license-modifiers/{licenseName}':
    parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
      - in: path
        name: dbname
        schema:
          type: string
        required: true
        description: name of the modifying database
      - in: path
        name: licenseName
        schema:
          type: string
        required: true
        description: name of the license
    delete:
      tags:
        - api-service
        - fe-user
        - write
      operationId: DeleteOracleDatabaseLicenseModifier
      summary: Delete a license modifier of a database
      description: Delete a license modifier of a database
      responses:
        '200':
          description: The license modifier was deleted successfully
          content:
            application/json: {}
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: ListTechnologies
      summary: List all Technologies
      description: List all Technologies
      parameters:
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: Result of the search
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TechnologyStatus'
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/all/databases:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchDatabases
      summary: Search a list of databases
      description: Get a list of databases filtered using various search terms and various params.
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: Result of the search
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  databases:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        type:
                          type: string
                        version:
                          type: string
                        hostname:
                          type: string
                        environment:
                          type: string
                        charset:
                          type: string
                        memory:
                          type: number
                        datafileSize:
                          type: number
                        segmentSize:
                          type: number
                      required:
                        - name
                        - type
                        - version
                        - hostname
                        - environment
                        - charset
                        - memory
                        - datafileSize
                        - segmentSize
                required:
                  - databases
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet: {}
    parameters: []
  /hosts/technologies/oracle/databases:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchOracleDatabases
      summary: Search a list of databases
      description: Get a list of databases filtered using various search terms and various params. Can also generate a XLSX file
      parameters:
        - in: query
          name: full
          description: output mode
          allowEmptyValue: true
          schema:
            type: boolean
            readOnly: true
        - $ref: '#/components/parameters/search'
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/Database'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
                  - type: array
                    description: full non paged
                    items:
                      $ref: '#/components/schemas/Database'
                  - type: object
                    description: not full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/Database'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
                  - type: array
                    description: not full non paged
                    items:
                      $ref: '#/components/schemas/Database'
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet: {}
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/addms:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchOracleDatabaseAddms
      summary: Search a list of ADDMs
      description: Get a list of ADDMs filtered using various search terms and various params. Can also generate a XLSX file
      parameters:
        - $ref: '#/components/parameters/search'
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/ADDM'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
                  - type: array
                    description: non paged
                    items:
                      $ref: '#/components/schemas/ADDM'
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet: {}
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/locations:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: ListLocations
      summary: List the locations
      description: List the locations
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: List of the locations
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                uniqueItems: true
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/environments:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: ListEnvironments
      summary: List the environments
      description: List the environments
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: List of the environments
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                uniqueItems: true
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /alerts:
    get:
      summary: search alerts
      description: This API fetches all alerts. The parameters in version 2.0 are not used since all filters are executed by the frontend.
      tags:
        - api-service
        - fe-user
      operationId: SearchAlerts
      parameters:
        - in: query
          name: mode
          description: output mode
          allowEmptyValue: true
          schema:
            type: string
            enum:
              - all
              - aggregated-code-severity
              - aggregated-category-severity
            readOnly: true
        - $ref: '#/components/parameters/search'
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - in: query
          schema:
            type: string
            enum:
              - WARNING
              - CRITICAL
              - INFO
          name: severity
          description: Filter by severity
          allowEmptyValue: true
        - in: query
          name: status
          required: false
          description: Filter by status
          allowEmptyValue: true
          schema:
            type: string
            readOnly: true
            enum:
              - NEW
              - ACK
            example: NEW
        - in: query
          schema:
            type: string
            format: date-time
            example: '2020-05-05T08:23:40+00:00'
          name: from
          description: Filter from a date
          allowEmptyValue: true
        - in: query
          schema:
            type: string
            format: date-time
            example: '2021-05-05T08:23:40+00:00'
          name: to
          description: Filter until a date
          allowEmptyValue: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      $ref: '#/components/schemas/Alert'
                  - type: object
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/Alert'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                  - type: array
                    items:
                      $ref: '#/components/schemas/AggregatedCodeSeverityAlerts'
        '401':
          description: Unauthorized
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal server error
  /alerts/ack:
    parameters: []
    post:
      summary: Acknowledge alerts by ids
      description: |-
        Update status of specified alerts to set alert status to acknowledged.
        Select alerts by a list of ids or by filter, not both.
      tags:
        - api-service
        - fe-user
      operationId: AckAlerts
      responses:
        '204':
          description: No Content
        '401':
          $ref: '#/components/responses/error'
        '403':
          description: The API is disabled because the service is put in read-only mode
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              x-examples:
                example-1:
                  filter:
                    id: '000000000000000000000000'
                    alertCategory: ''
                    alertAffectedTechnology: ''
                    alertCode: ''
                    alertSeverity: ''
                    alertStatus: ''
                    description: ''
                    date: '0001-01-01T00:00:00Z'
                    otherInfo: {}
              properties:
                filter:
                  type: object
                  properties:
                    id:
                      minLength: 1
                      $ref: ''
                    alertCategory:
                      type: string
                    alertAffectedTechnology:
                      type: string
                    alertCode:
                      type: string
                    alertSeverity:
                      type: string
                    alertStatus:
                      type: string
                    description:
                      type: string
                    date:
                      type: string
                      minLength: 1
                    otherInfo:
                      type: object
                ids:
                  type: array
                  items:
                    $ref: '#/components/schemas/ObjectID'
            examples:
              example with ids:
                value:
                  - 5f2acc476b16f5bea302ba0b
                  - 5f2acc476b16f5bea302ba0c
              example with filter:
                value:
                  filter:
                    id: '012345678910'
                    alertCategory: AGENT
                    alertStatus: NEW
        description: an array of notifications id
  /hosts/clusters:
    get:
      summary: Search a list of clusters
      tags:
        - api-service
        - fe-user
        - read
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      $ref: '#/components/schemas/Cluster'
                  - type: object
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/Cluster'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
            application/xml:
              schema:
                type: object
                properties: {}
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: object
                properties: {}
              examples: {}
      operationId: SearchClusters
      description: |-
        Search clusters data using the filters in the request.
        Return content type could be JSON or XLSX.
      parameters:
        - $ref: '#/components/parameters/search'
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
  '/hosts/clusters/{name}':
    get:
      summary: Get a cluster
      tags:
        - api-service
        - fe-user
        - read
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cluster'
      operationId: GetCluster
      description: Get cluster data using the filters in the request.
      parameters:
        - $ref: '#/components/parameters/older-than'
        - in: path
          name: name
          schema:
            type: string
          required: true
          description: cluster name
  /hosts/technologies/oracle/exadata:
    get:
      summary: Search a list of exadata
      tags:
        - api-service
        - fe-user
        - read
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      $ref: '#/components/schemas/ExadataSummary'
                  - type: object
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/ExadataSummary'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
              examples:
                Body response with full=true:
                  value:
                    - _id: 5fe2007e2bef85dd518f8763
                      createdAt: '2020-12-22T15:19:42.479+01:00'
                      dbServers:
                        - cellsrvServiceStatus: null
                          fanStatus: normal
                          hostname: zombie-0d1347d47a10b673a4df7aeeecc24a8a
                          memory: 376
                          model: X7-2
                          msServiceStatus: running
                          powerStatus: normal
                          rsServiceStatus: running
                          runningCPUCount: 48
                          runningFanCount: 16
                          runningPowerSupply: 2
                          status: online
                          swVersion: 19.2.4.0.0.190709
                          tempActual: 24
                          tempStatus: normal
                          totalCPUCount: 48
                          totalFanCount: 16
                          totalPowerSupply: 2
                        - cellsrvServiceStatus: null
                          fanStatus: normal
                          hostname: kantoor-43a6cdc54bb211eb127bca5c6651950c
                          memory: 376
                          model: X7-2
                          msServiceStatus: running
                          powerStatus: normal
                          rsServiceStatus: running
                          runningCPUCount: 48
                          runningFanCount: 16
                          runningPowerSupply: 2
                          status: online
                          swVersion: 19.2.4.0.0.190709
                          tempActual: 24
                          tempStatus: normal
                          totalCPUCount: 48
                          totalFanCount: 16
                          totalPowerSupply: 2
                      environment: PROD
                      hostname: test-exadata
                      ibSwitches:
                        - hostname: off-df8b95a01746a464e69203c840a6a46a
                          model: SUN_DCS_36p
                          swVersion: 2.2.13-2.190326
                        - hostname: aspen-8d1d1b210625b1f1024b686135f889a1
                          model: SUN_DCS_36p
                          swVersion: 2.2.13-2.190326
                      location: Italy
                      storageServers:
                        - cellDisks:
                            - errCount: 0
                              name: fanshop-5bde7badf2c9deceea5f615c3840c0b9
                              status: normal
                              usedPerc: 32
                            - errCount: 0
                              name: globe-b31fa3756675a5c8ac052437ff7e439b
                              status: normal
                              usedPerc: 54
                            - errCount: 3
                              name: srvc28-3807c977788c598cfa31fe21c0d3d5be
                              status: normal
                              usedPerc: 90
                          cellsrvServiceStatus: running
                          fanStatus: normal
                          flashcacheMode: WriteBack
                          hostname: s75-c2449b0e89e5a0b38401636eaa07abd5
                          memory: 188
                          model: X7-2L_High_Capacity
                          msServiceStatus: running
                          powerStatus: normal
                          rsServiceStatus: running
                          runningCPUCount: 20
                          runningFanCount: 8
                          runningPowerSupply: 2
                          status: online
                          swVersion: 19.2.4.0.0.190709
                          tempActual: 23
                          tempStatus: normal
                          totalCPUCount: 40
                          totalFanCount: 8
                          totalPowerSupply: 2
                        - cellDisks:
                            - errCount: 0
                              name: server52-390b5dac8c3b68e3471c657ef97a7ae6
                              status: normal
                              usedPerc: 32
                            - errCount: 1
                              name: srvc07-5b888ab40dbd25e106309fd482f859a0
                              status: normal
                              usedPerc: 54
                          cellsrvServiceStatus: running
                          fanStatus: normal
                          flashcacheMode: WriteBack
                          hostname: itl-b22fa37cad1326aba990cdec7facace2
                          memory: 188
                          model: X7-2L_High_Capacity
                          msServiceStatus: running
                          powerStatus: normal
                          rsServiceStatus: running
                          runningCPUCount: 20
                          runningFanCount: 8
                          runningPowerSupply: 2
                          status: online
                          swVersion: 19.2.4.0.0.190709
                          tempActual: 24
                          tempStatus: normal
                          totalCPUCount: 40
                          totalFanCount: 8
                          totalPowerSupply: 2
                Body response with full=false:
                  value:
                    - _id: 5fe2007e2bef85dd518f8763
                      createdAt: '2020-12-22T15:19:42.479+01:00'
                      dbServers:
                        - hostname: zombie-0d1347d47a10b673a4df7aeeecc24a8a
                          memory: 376
                          model: X7-2
                          runningCPUCount: 48
                          runningPowerSupply: 2
                          swVersion: 19.2.4.0.0.190709
                          tempActual: 24
                          totalCPUCount: 48
                          totalPowerSupply: 2
                        - hostname: kantoor-43a6cdc54bb211eb127bca5c6651950c
                          memory: 376
                          model: X7-2
                          runningCPUCount: 48
                          runningPowerSupply: 2
                          swVersion: 19.2.4.0.0.190709
                          tempActual: 24
                          totalCPUCount: 48
                          totalPowerSupply: 2
                      environment: PROD
                      hostname: test-exadata
                      ibSwitches:
                        - hostname: off-df8b95a01746a464e69203c840a6a46a
                          model: SUN_DCS_36p
                          swVersion: 2.2.13-2.190326
                        - hostname: aspen-8d1d1b210625b1f1024b686135f889a1
                          model: SUN_DCS_36p
                          swVersion: 2.2.13-2.190326
                      location: Italy
                      storageServers:
                        - hostname: s75-c2449b0e89e5a0b38401636eaa07abd5
                          memory: 188
                          model: X7-2L_High_Capacity
                          runningCPUCount: 20
                          runningPowerSupply: 2
                          swVersion: 19.2.4.0.0.190709
                          tempActual: 23
                          totalCPUCount: 40
                          totalPowerSupply: 2
                        - hostname: itl-b22fa37cad1326aba990cdec7facace2
                          memory: 188
                          model: X7-2L_High_Capacity
                          runningCPUCount: 20
                          runningPowerSupply: 2
                          swVersion: 19.2.4.0.0.190709
                          tempActual: 24
                          totalCPUCount: 40
                          totalPowerSupply: 2
                Body response with paging:
                  value:
                    content:
                      - _id: 5fe2007e2bef85dd518f8763
                        createdAt: '2020-12-22T15:19:42.479+01:00'
                        dbServers:
                          - hostname: zombie-0d1347d47a10b673a4df7aeeecc24a8a
                            memory: 376
                            model: X7-2
                            runningCPUCount: 48
                            runningPowerSupply: 2
                            swVersion: 19.2.4.0.0.190709
                            tempActual: 24
                            totalCPUCount: 48
                            totalPowerSupply: 2
                          - hostname: kantoor-43a6cdc54bb211eb127bca5c6651950c
                            memory: 376
                            model: X7-2
                            runningCPUCount: 48
                            runningPowerSupply: 2
                            swVersion: 19.2.4.0.0.190709
                            tempActual: 24
                            totalCPUCount: 48
                            totalPowerSupply: 2
                        environment: PROD
                        hostname: test-exadata
                        ibSwitches:
                          - hostname: off-df8b95a01746a464e69203c840a6a46a
                            model: SUN_DCS_36p
                            swVersion: 2.2.13-2.190326
                          - hostname: aspen-8d1d1b210625b1f1024b686135f889a1
                            model: SUN_DCS_36p
                            swVersion: 2.2.13-2.190326
                        location: Italy
                        storageServers:
                          - hostname: s75-c2449b0e89e5a0b38401636eaa07abd5
                            memory: 188
                            model: X7-2L_High_Capacity
                            runningCPUCount: 20
                            runningPowerSupply: 2
                            swVersion: 19.2.4.0.0.190709
                            tempActual: 23
                            totalCPUCount: 40
                            totalPowerSupply: 2
                          - hostname: itl-b22fa37cad1326aba990cdec7facace2
                            memory: 188
                            model: X7-2L_High_Capacity
                            runningCPUCount: 20
                            runningPowerSupply: 2
                            swVersion: 19.2.4.0.0.190709
                            tempActual: 24
                            totalCPUCount: 40
                            totalPowerSupply: 2
                    metadata:
                      empty: false
                      first: true
                      last: true
                      number: 0
                      size: 1
                      totalElements: 1
                      totalPages: 0
      operationId: SearchOracleExadata
      description: |-
        Search exadata data using the filters in the request.
        Return content type could be JSON or XLSX.
      parameters:
        - $ref: '#/components/parameters/search'
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
        - schema:
            type: boolean
          in: query
          name: full
          description: Whether or not to return all fields
  /hosts/technologies/oracle/databases/license-modifiers:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchOracleDatabaseLicenseModifiers
      summary: Search a list of license modifiers
      description: Get a list of license modifiers using various search terms and various params.
      parameters:
        - $ref: '#/components/parameters/search'
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
      responses:
        '200':
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/LicenseModifier'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
                  - type: array
                    description: non paged
                    items:
                      $ref: '#/components/schemas/LicenseModifier'
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/count:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetHostsCountStats
      summary: Get the number of the hosts
      description: Get the number of the hosts
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: integer
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/environments/frequency:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetEnvironmentStats
      summary: Get the stats about the environments
      description: Get the stats about the environments
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    environment:
                      type: string
                    count:
                      type: integer
                  required:
                    - environment
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/types:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTypeStats
      summary: Get the stats about the types
      description: Get the stats about the types
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hardwareAbstractionTechnology:
                      type: string
                    count:
                      type: integer
                  required:
                    - hardwareAbstractionTechnology
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/operating-systems:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOperatingSystemStats
      summary: Get the stats about the operating systems
      description: Get the stats about the operating systems
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    operatingSystem:
                      type: string
                    count:
                      type: integer
                  required:
                    - operatingSystem
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/top-unused-instance-resource:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTopUnusedOracleDatabaseInstanceResourceStats
      summary: Get the stats about the top unused instance resource by databases work
      description: Get the stats about the top unused instance resource by databases work
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hostname:
                      type: string
                    unused:
                      type: number
                  required:
                    - hostname
                    - used
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/environments:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseEnvironmentStats
      summary: Get the stats about the environment of the databases
      description: Get the stats about the environment of the databases
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    environment:
                      type: string
                    count:
                      type: string
                  required:
                    - environment
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/high-reliability:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseHighReliabilityStats
      summary: Get the stats about the high reliability status of the databases
      description: Get the stats about the high reliability status of the databases
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    ha:
                      type: boolean
                    count:
                      type: string
                  required:
                    - ha
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/versions:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseVersionStats
      summary: Get the stats about the version of the databases
      description: Get the stats about the version of the databases
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    version:
                      type: string
                    count:
                      type: string
                  required:
                    - version
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/top-reclaimable:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTopReclaimableOracleDatabaseStats
      summary: Get the list of top databases by reclaimable segment advisors
      description: Get the list of top databases by reclaimable segment advisors
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hostname:
                      type: string
                    dbname:
                      type: string
                    reclaimableSegmentAdvisors:
                      type: number
                  required:
                    - hostname
                    - dbname
                    - reclaimableSegmentAdvisors
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/patch-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabasePatchStatusStats
      summary: Get the statistics about the patch status of the databases
      description: Get the statistics about the patch status of the databases
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
        - $ref: '#/components/parameters/window-time'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    status:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - status
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/top-workload:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTopWorkloadOracleDatabaseStats
      summary: Get the list of top databases by workload
      description: Get the list of top databases by workload
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hostname:
                      type: string
                    dbname:
                      type: string
                    workload:
                      type: number
                  required:
                    - hostname
                    - dbname
                    - workload
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/dataguard-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseDataguardStatusStats
      summary: Get the statistics about the dataguard status of the databases
      description: Get the statistics about the dataguard status of the databases
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    dataguard:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - dataguard
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/archivelog-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseArchivelogStatusStats
      summary: Get the statistics about the archive log status of the databases
      description: Get the statistics about the archive log status of the databases
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    archiveLog:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - archiveLog
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/rac-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseRACStatusStats
      summary: Get the statistics about the RAC status of the databases
      description: Get the statistics about the RAC status of the databases
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    rac:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - rac
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/statistics:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabasesStatistics
      summary: Get statistics about Oracle databases
      description: Get statistics about Oracle databases
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            text/plain:
              schema:
                description: ''
                type: object
                properties:
                  total-memory-size:
                    type: number
                  total-segments-size:
                    type: number
                  total-datafile-size:
                    type: number
                  total-work:
                    type: number
                required:
                  - total-memory-size
                  - total-segments-size
                  - total-datafile-size
                  - total-work
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/consumed-licenses:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchOracleDatabaseUsedLicenses
      summary: Get consumed licenses
      description: Get the licenses consumed by the hosts
      parameters:
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      type: object
                      properties:
                        dbName:
                          type: string
                        hostname:
                          type: string
                        licenseTypeID:
                          type: string
                        usedLicenses:
                          type: integer
                  - type: object
                    properties:
                      content:
                        type: array
                        items: { }
                      metadata:
                        type: object
                        properties:
                          empty:
                            type: boolean
                          first:
                            type: boolean
                          last:
                            type: boolean
                          number:
                            type: integer
                          size:
                            type: integer
                          totalElements:
                            type: integer
                          totalPage:
                            type: integer
              examples:
                Without pagination:
                  value:
                    - dbName: ERCSOL19
                      hostname: ercsoldbx
                      licenseTypeID: A90611
                      usedLicenses: 2
                    - dbName: ERCSOL19
                      hostname: ercsoldbx
                      licenseTypeID: A90650
                      usedLicenses: 8
                With pagination:
                  value:
                    content:
                      - dbName: allstate-9a6a2a820a3f61aeb345a834abf40fba
                        hostname: publicitate-36d06ca83eafa454423d2097f4965517
                        licenseTypeID: A90611
                        usedLicenses: 4
                      - dbName: allstate-9a6a2a820a3f61aeb345a834abf40fba
                        hostname: publicitate-36d06ca83eafa454423d2097f4965517
                        licenseTypeID: A90649
                        usedLicenses: 4
                      - dbName: 4wcqjn-ecf040bdfab7695ab332aef7401f185c
                        hostname: publicitate-36d06ca83eafa454423d2097f4965517
                        licenseTypeID: A90611
                        usedLicenses: 4
                      - dbName: 4wcqjn-ecf040bdfab7695ab332aef7401f185c
                        hostname: publicitate-36d06ca83eafa454423d2097f4965517
                        licenseTypeID: A90649
                        usedLicenses: 4
                      - dbName: ERCOLE
                        hostname: test-db
                        licenseTypeID: A90611
                        usedLicenses: 0.5
                    metadata:
                      empty: false
                      first: false
                      last: false
                      number: 2
                      size: 5
                      totalElements: 20
                      totalPages: 4
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/licenses-compliance:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseLicensesCompliance
      summary: Get list of licenses with usage and compliance
      description: Get list of licenses with usage and compliance
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                description: ''
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - licenseTypeID
                    - itemDescription
                    - metric
                    - consumed
                    - covered
                    - compliance
                    - unlimited
                  properties:
                    licenseTypeID:
                      type: string
                      minLength: 1
                    itemDescription:
                      type: string
                      minLength: 1
                    metric:
                      type: string
                      minLength: 1
                    consumed:
                      type: number
                    covered:
                      type: number
                    compliance:
                      type: number
                    unlimited:
                      type: boolean
              examples:
                Example:
                  value:
                    - licenseTypeID: PID001
                      itemDescription: Oracle Database Enterprise Edition
                      metric: Processor Perpetual
                      consumed: 3
                      covered: 3
                      compliance: 1
                      unlimited: false
                    - licenseTypeID: PID002
                      itemDescription: Oracle Database Enterprise Edition
                      metric: Processor Perpetual
                      consumed: 10
                      covered: 5
                      compliance: 0.5
                      unlimited: false
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/exadata/total-memory-size:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTotalOracleExadataMemorySizeStats
      summary: Get the total size of the memory of the exadata
      description: Get the total size of the memory of the exadata
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            text/plain:
              schema:
                type: number
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/exadata/total-cpu:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTotalOracleExadataCPUStats
      summary: Get the total cpu of the exadata
      description: Get the total cpu of the exadata
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: object
                required:
                  - running
                  - total
                properties:
                  running:
                    type: number
                  total:
                    type: number
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/exadata/average-storage-usage:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetAverageOracleExadataStorageUsageStats
      summary: Get the average usage of the storage of the exadata
      description: Get the average usage of the storage of the exadata
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            text/plain:
              schema:
                type: number
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/exadata/storage-error-count-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleExadataStorageErrorCountStatusStats
      summary: Get the statistics about the ErrorCount status of the storage of the exadata
      description: Get the statistics about the ErrorCount status of the storage of the  exadata
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    failing:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - failing
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/exadata/patch-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleExadataPatchStatusStats
      summary: Get the statistics about the patch status of the exadata
      description: Get the statistics about the patch status of the exadata
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    status:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - status
                    - count
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /hosts/technologies/oracle/databases/segment-advisors:
    get:
      parameters:
        - in: query
          name: full
          description: output mode
          allowEmptyValue: true
          schema:
            type: boolean
            readOnly: true
        - $ref: '#/components/parameters/search'
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/size'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      $ref: '#/components/schemas/SegmentAdvisor'
                  - type: object
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/SegmentAdvisor'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: object
                properties: {}
              examples: {}
      operationId: SearchOracleDatabaseSegmentAdvisors
      description: Search segment advisors data using the filters in the request
      summary: Search a list of segment advisors
      tags:
        - api-service
        - fe-user
        - read
  /hosts/technologies/oracle/databases/patch-advisors:
    get:
      parameters:
        - $ref: '#/components/parameters/search'
        - $ref: '#/components/parameters/sort-by'
        - $ref: '#/components/parameters/sort-desc'
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
        - $ref: '#/components/parameters/window-time'
        - schema:
            type: string
            enum:
              - OK
              - KO
          in: query
          name: status
          description: Filter by status
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      $ref: '#/components/schemas/PatchAdvisorInfo'
                  - type: object
                    properties:
                      content:
                        type: array
                        items:
                          $ref: '#/components/schemas/PatchAdvisorInfo'
                      metadata:
                        $ref: '#/components/schemas/PageMetadata'
                    required:
                      - content
                      - metadata
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: object
                description: XLSX file
              examples: {}
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
      operationId: SearchOracleDatabasePatchAdvisors
      description: Search patch advisors data using the filters in the request
      summary: Search a list of patch advisors
      tags:
        - api-service
        - fe-user
        - read
  /settings/default-database-tag-choiches:
    get:
      operationId: GetDefaultDatabaseTags
      description: Return the default list of database tags from configuration
      summary: Return the default list of database tags from configuration
      tags:
        - api-service
        - fe-user
        - read
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
  /settings/features:
    get:
      operationId: GetFeatures
      description: Return a map of active/inactive ercole features
      summary: Return a map of active/inactive ercole features
      tags:
        - api-service
        - fe-user
        - read
      responses:
        '200':
          description: OK
          headers: {}
          content:
            'application/json:':
              schema:
                $ref: '#/components/schemas/Features'
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /settings/technologies:
    get:
      operationId: GetTechnologyList
      description: Return a list of technology
      summary: Return a list of technology
      tags:
        - api-service
        - fe-user
        - read
      responses:
        '200':
          description: OK
          headers: {}
          content:
            'application/json:':
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TechnologyInfo'
  /frontend/dashboard:
    get:
      operationId: GetInfoForFrontendDashboard
      description: Return the information required by ercole-web dashboard page
      summary: Return the information required by ercole-web dashboard page
      tags:
        - api-service
        - fe-user
        - read
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  features:
                    $ref: '#/components/schemas/Features'
                  technologies:
                    type: object
                    description: Supported technologies
                    required:
                      - technologies
                      - total
                    properties:
                      technologies:
                        type: array
                        description: All supported technologies that can be monitored by Ercole.
                        items:
                          $ref: '#/components/schemas/TechnologyStatus'
                      total:
                        $ref: '#/components/schemas/AllTechnologyComplianceStatus'
                required:
                  - features
                  - technologies
              examples:
                example-1:
                  value:
                    features:
                      Oracle/Database: true
                      Oracle/Exadata: true
                    technologies:
                      technologies:
                        - product: Oracle/Exadata
                          compliance: 1
                          unpaidDues: 0
                          hostsCount: 2
                        - product: Oracle/Database
                          compliance: 0
                          unpaidDues: 0
                          hostsCount: 6
                      total:
                        compliance: 0.07142857142857142
                        hostsCount: 14
                        unpaidDues: 0
        '201':
          description: Created
        '400':
          description: Bad Request
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /settings/technologies-metrics:
    get:
      operationId: GetTechnologiesMetrics
      description: Return a list of metrics for each technology
      summary: Return a list of metrics for each technology
      tags:
        - chart-service
        - fe-user
        - read
      responses:
        '200':
          description: OK
          headers: {}
          content:
            'application/json:':
              schema:
                type: object
                additionalProperties:
                  type: object
                  required:
                    - product
                    - metrics
                  properties:
                    product:
                      type: string
                    metrics:
                      type: array
                      items:
                        type: string
                      uniqueItems: true
  /technologies/oracle/database:
    get:
      tags:
        - chart-service
        - fe-user
        - read
      operationId: GetOracleDatabaseChart
      summary: Get the chart data about oracle databases using various metric
      description: Get the stats about the environment of the databases
      parameters:
        - in: query
          name: metric
          schema:
            type: string
            enum:
              - work
              - version
          required: true
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          $ref: '#/components/schemas/Chart'
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /technologies/changes:
    get:
      tags:
        - chart-service
        - fe-user
        - read
      operationId: GetChangeChart
      summary: Get the chart data about the changes of technologies
      description: Get the chart data about the changes of technologies
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          $ref: '#/components/schemas/ChangeChart'
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  /technologies/types:
    get:
      tags:
        - chart-service
        - fe-user
        - read
      operationId: GetTechnologyTypesChart
      summary: Get the chart data about the types of technologies
      description: Get the chart data about the types of technologies
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          $ref: '#/components/schemas/TechnologyTypesChart'
        '401':
          description: Token is invalid / it is not present
        '422':
          description: Invalid parameters / null path/body
        '500':
          description: Generic error
  /agreements/oracle/database:
    get:
      summary: Search Oracle database agreements
      tags:
        - api-service
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  agreements:
                    type: array
                    items:
                      properties:
                        id:
                          type: string
                        agreementID:
                          type: string
                        csi:
                          type: string
                        licenseTypeID:
                          type: string
                        itemDescription:
                          type: string
                        metric:
                          type: string
                        referenceNumber:
                          type: string
                        unlimited:
                          type: boolean
                          description: Indicates that the agreement has unlimited part or no
                        licensesPerCore:
                          type: number
                        licensesPerUser:
                          type: number
                        availableCount:
                          type: number
                        catchAll:
                          type: boolean
                        restricted:
                          type: boolean
                        hosts:
                          type: array
                          description: |
                            Contains the list of (manually) associated hosts
                          items:
                            required:
                              - hostname
                              - coveredLicensesCount
                              - totalCoveredLicensesCount
                              - consumedLicensesCount
                            properties:
                              hostname:
                                type: string
                              consumedLicensesCount:
                                type: number
                              coveredLicensesCount:
                                type: number
                              totalCoveredLicensesCount:
                                type: number
                required:
                  - agreements
              examples:
                example-1:
                  value:
                    - id: 5f6a118067d1127af38db239
                      agreementID: '111'
                      licenseTypeID: L10001
                      itemDescription: Oracle Database Enterprise Edition
                      metrics: Named User Plus Perpetual
                      csi: ''
                      referenceNumber: '444'
                      unlimited: false
                      licensesPerCore: 0
                      licensesPerUser: 42
                      availableCount: -2
                      catchAll: false
                      hosts:
                        - hostname: ercsoldbx
                          coveredLicensesCount: 0
                          totalCoveredLicensesCount: 0
                          consumedLicensesCount: 2
                    - id: 5f6a118267d1127af38db23a
                      agreementID: '222'
                      licenseTypeID: L10001
                      itemDescription: Oracle Database Enterprise Edition
                      metrics: Named User Plus Perpetual
                      csi: ''
                      referenceNumber: '444'
                      unlimited: false
                      licensesPerCore: 0
                      licensesPerUser: 42
                      availableCount: -2
                      catchAll: false
                      hosts:
                        - hostname: ercsoldbx
                          coveredLicensesCount: 0
                          totalCoveredLicensesCount: 0
                          consumedLicensesCount: 2
      operationId: GetOracleDatabaseAgreements
      parameters:
        - schema:
            type: string
          in: query
          name: agreement-id
          description: |
            contains
        - schema:
            type: string
          in: query
          name: license-type-id
          description: |
            contains
        - schema:
            type: string
          in: query
          name: item-description
          description: |
            contains
        - schema:
            type: string
          in: query
          name: csi
          description: |
            contains
        - schema:
            type: string
          in: query
          name: metrics
          description: equal to
        - schema:
            type: string
          in: query
          name: reference-number
          description: ''
        - schema:
            type: string
          in: query
          name: unlimited
          description: ''
        - schema:
            type: string
          in: query
          name: catch-all
          description: ''
        - schema:
            type: number
          in: query
          name: licenses-per-core-lte
          description: ''
        - schema:
            type: number
          in: query
          name: licenses-per-core-gte
          description: ''
        - schema:
            type: number
          in: query
          name: licenses-per-user-lte
          description: ''
        - schema:
            type: number
          in: query
          name: licenses-per-user-gte
          description: ''
        - schema:
            type: number
          in: query
          name: available-licenses-per-core-lte
          description: ''
        - schema:
            type: number
          in: query
          name: available-licenses-per-core-gte
          description: ''
        - schema:
            type: number
          in: query
          name: available-licenses-per-user-lte
          description: ''
        - schema:
            type: number
          in: query
          name: available-licenses-per-user-gte
          description: ''
      description: Retun oracle database agreements by query parameters filters
    parameters: []
    post:
      tags:
        - api-service
      summary: Add Oracle database agreements
      operationId: AddOracleDatabaseAgreement
      responses:
        '200':
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                agreementID:
                  type: string
                csi:
                  type: string
                partsID:
                  type: array
                  items:
                    type: string
                referenceNumber:
                  type: string
                unlimited:
                  type: boolean
                count:
                  type: integer
                hosts:
                  type: array
                  items:
                    type: string
                catchAll:
                  type: boolean
                restricted:
                  type: boolean
            examples:
              example-1:
                value:
                  agreementID: '111'
                  csi: pippo
                  partsID:
                    - L10001
                  referenceNumber: '444'
                  unlimited: false
                  count: 42
                  hosts:
                    - ercsoldbx
                  catchAll: false
      description: Add Oracle database agreement
    put:
      summary: Update Oracle Database Agreement
      operationId: UpdateOracleDatabaseAgreement
      responses:
        '200':
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                agreementID:
                  type: string
                csi:
                  type: string
                licenseTypeID:
                  type: string
                referenceNumber:
                  type: string
                unlimited:
                  type: boolean
                count:
                  type: integer
                hosts:
                  type: array
                  items:
                    type: string
                catchAll:
                  type: boolean
                restricted:
                  type: boolean
                id:
                  type: string
            examples:
              example-1:
                value:
                  id: 5f6a118067d1127af38db239
                  agreementID: '111'
                  csi: pippo
                  licenseTypeID: L10001
                  referenceNumber: '444'
                  unlimited: false
                  count: 42
                  hosts:
                    - ercsoldbx
                  catchAll: false
      description: Update Oracle database agreement
      tags:
        - api-service
  '/agreements/oracle/database/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    delete:
      summary: Delete Oracle database agreements
      operationId: DeleteOracleDatabaseAgreement
      responses:
        '200':
          description: OK
      description: Remove Oracle database agreements by ID
      parameters: []
      tags:
        - api-service
  /settings/oracle/database/license-types:
    get:
      summary: Return license-types
      tags:
        - api-service
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LicenseType'
      operationId: GetOracleDatabaseAgreementPartsList
      description: Get Oracle database agreement parts list
  /technologies/all/license-history:
    get:
      summary: Get historical values of Oracle Databases Licenses
      tags:
        - chart-service
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: ''
                uniqueItems: false
                items:
                  type: object
                  properties:
                    licenseTypeID:
                      type: string
                      minLength: 1
                    itemDescription:
                      type: string
                    metric:
                      type: string
                    history:
                      type: array
                      uniqueItems: false
                      items:
                        type: object
                        properties:
                          date:
                            type: string
                            minLength: 1
                          consumed:
                            type: number
                          covered:
                            type: number
                        required:
                          - date
                          - consumed
                          - covered
                  required:
                    - licenseTypeID
                    - itemDescription
                    - metric
                    - history
      operationId: GetLicenseComplianceHistory
      description: Get historical values of Oracle Databases Licenses
  /hosts/technologies/mysql/databases:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchMySQLDatabases
      summary: Search a list of MySQL databases instances
      description: Search a list of MySQL databases instances
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: Result of the search
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  databases:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      required:
                        - hostname
                        - location
                        - environment
                        - name
                        - version
                        - edition
                        - platform
                        - architecture
                        - engine
                        - redoLogEnabled
                        - charsetServer
                        - charsetSystem
                        - pageSize
                        - threadsConcurrency
                        - bufferPoolSize
                        - logBufferSize
                        - sortBufferSize
                        - readOnly
                      properties:
                        hostname:
                          type: string
                        location:
                          type: string
                        environment:
                          type: string
                        name:
                          type: string
                        version:
                          type: string
                        edition:
                          type: string
                        platform:
                          type: string
                        architecture:
                          type: string
                        engine:
                          type: string
                        redoLogEnabled:
                          type: string
                        charsetServer:
                          type: string
                        charsetSystem:
                          type: string
                        pageSize:
                          type: number
                        threadsConcurrency:
                          type: number
                        bufferPoolSize:
                          type: number
                        logBufferSize:
                          type: number
                        sortBufferSize:
                          type: number
                        readOnly:
                          type: boolean
                        databases:
                          type: array
                          uniqueItems: true
                          items:
                            required:
                              - name
                              - charset
                              - collation
                              - encrypted
                            properties:
                              name:
                                type: string
                              charset:
                                type: string
                              collation:
                                type: string
                              encrypted:
                                type: boolean
                        tableSchemas:
                          type: array
                          uniqueItems: true
                          items:
                            required:
                              - name
                              - engine
                              - allocation
                            properties:
                              name:
                                type: string
                              engine:
                                type: string
                              allocation:
                                type: number
                        segmentAdvisors:
                          type: array
                          uniqueItems: true
                          items:
                            required:
                              - tableSchema
                              - tableName
                              - engine
                              - allocation
                              - data
                              - index
                              - free
                            properties:
                              tableSchema:
                                type: string
                              tableName:
                                type: string
                              engine:
                                type: string
                              allocation:
                                type: number
                              data:
                                type: number
                              index:
                                type: number
                              free:
                                type: number
                required:
                  - databases
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet: {}
    parameters: []
  /hosts/technologies/all/databases/statistics:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetDatabasesStatistics
      summary: Get statistics about all databases
      description: Get statistics about all databases
      parameters:
        - $ref: '#/components/parameters/location'
        - $ref: '#/components/parameters/environment'
        - $ref: '#/components/parameters/older-than'
      responses:
        '200':
          description: statistics
          content:
            text/plain:
              schema:
                description: ''
                type: object
                properties:
                  total-memory-size:
                    type: number
                    description: size in bytes
                  total-segments-size:
                    type: number
                    description: size in bytes
                required:
                  - total-memory-size
                  - total-segments-size
        '401':
          $ref: '#/components/responses/error'
        '422':
          $ref: '#/components/responses/error'
        '500':
          $ref: '#/components/responses/error'
  '/agreements/mysql/database/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    put:
      summary: Update MySQL Agreement
      operationId: UpdateMySQLAgreement
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MySQLAgreement'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MySQLAgreement'
        description: ''
      description: ''
      tags:
        - api-service
    delete:
      summary: Delete MySQL Agreement
      operationId: DeleteMySQLAgreement
      responses:
        '204':
          description: No Content
  /agreements/mysql/database:
    parameters: []
    get:
      summary: Get MySQL Agreements
      tags:
        - api-service
      responses: {}
      operationId: GetMySQLAgreements
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                agreements:
                  type: array
                  items:
                    $ref: '#/components/schemas/MySQLAgreement'
      description: ''
    post:
      summary: Add MySQL Agreement
      operationId: AddMySQLAgreement
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MySQLAgreement'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MySQLAgreement'
  /hosts/technologies/all/databases/licenses-used:
    get:
      summary: Get Databases Used Licenses
      tags: []
      responses: {}
      operationId: GetDatabasesUsedLicenses
      parameters:
        - schema:
            type: string
          in: query
          name: location
        - schema:
            type: string
          in: query
          name: environment
        - schema:
            type: string
          in: query
          name: older-than
  /hosts/technologies/all/databases/licenses-used-per-host:
    get:
      summary: Get Databases Used Licenses Per Host
      tags: [ ]
      operationId: GetDatabasesUsedLicensesPerHost
      parameters:
        - schema:
            type: string
          in: query
          name: location
        - schema:
            type: string
          in: query
          name: environment
        - schema:
            type: string
          in: query
          name: older-than
      responses:
        '200':
          description: ''
          content:
            application/json:
              examples:
                Without pagination:
                  value:
                    usedLicenses:
                      - hostname: ercsoldbxs
                        databases: 2,
                        licenseTypeID: A90611
                        description: Oracle Database Enterprise Edition
                        metric: Processor Perpetual
                        usedLicenses: 2
                      - hostname: ercsoldbx
                        databases: 1
                        licenseTypeID: A90650
                        description: Oracle Tuning Pack
                        metric: Processor Perpetual
                        usedLicenses: 8
                      - hostname: ercsoldbx
                        databases: 1
                        licenseTypeID: A90649
                        description: Oracle Diagnostics Pack
                        metric: Processor Perpetual
                        usedLicenses: 8
                      - hostname: ex91db01.syssede.systest.sanpaoloimi.com
                        databases: 44
                        licenseTypeID: L10001
                        description: Oracle Database Enterprise Edition
                        metric: Named User Plus Perpetual
                        usedLicenses: 12
                      - hostname: ex91db01.syssede.systest.sanpaoloimi.com
                        databases: 44,
                        licenseTypeID: L10005
                        description: Oracle Real Application Clusters
                        metric: Named User Plus Perpetual
                        usedLicenses: 12
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: object
                properties: { }
              examples: { }
        '401':
          description: Unauthorized
        '422':
          description: Unprocessable Entity
        '500':
          description: Internal server error
  /hosts/technologies/all/databases/licenses-compliance:
    get:
      summary: Get Database Licenses Compliance
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  licensesCompliance:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      required:
                        - licenseTypeID
                        - itemDescription
                        - metric
                        - consumed
                        - covered
                        - compliance
                        - unlimited
                      properties:
                        licenseTypeID:
                          type: string
                          minLength: 1
                        itemDescription:
                          type: string
                          minLength: 1
                        metric:
                          type: string
                          minLength: 1
                        consumed:
                          type: number
                        covered:
                          type: number
                        compliance:
                          type: number
                        unlimited:
                          type: boolean
                required:
                  - licensesCompliance
      operationId: GetDatabaseLicensesCompliance
      description: Get list of licenses with usage and compliance
  /cmdbs:
    post:
      summary: ''
      operationId: CompareCmdbInfo
      responses:
        '204':
          description: No Content
      description: ''
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                hostnames:
                  type: array
                  items:
                    type: string
            examples: {}
      tags:
        - data-service
security:
  - basicAuthApiService: []
  - tokenAuthApiService: []
