openapi: 3.0.2
x-stoplight:
  id: def28pda18io3
info:
  title: Ercole
  version: 2.0.0
  license:
    name: GNU General Public License v3.0 or later
    url: "https://www.gnu.org/licenses/gpl-3.0-standalone.html"
  description: API used to talk to ercole services
  contact:
    name: Issues support
    url: "https://github.com/ercole-io/ercole"
servers:
  - description: Api service on dev.ercole.io
    url: "https://dev.ercole.io/api"
  - description: Chart service on dev.ercole.io
    url: "https://dev.ercole.io/chart"
  - description: Data service on dev.ercole.io
    url: "https://dev.ercole.io/data"
  - description: Alert service on dev.ercole.io
    url: "https://dev.ercole.io/alert"
  - description: Repo service on dev.ercole.io
    url: "https://dev.ercole.io/repo"
  - description: Data service
    url: "http://localhost:11111"
  - url: "http://localhost:11112"
    description: Alert service
  - url: "http://localhost:11113"
    description: Api service
  - url: "http://localhost:11116"
    description: Chart service
tags:
  - name: data-service
    description: API served by data-service
  - name: alert-service
    description: API served by alert-service
  - name: api-service
    description: API served by api-service
  - name: chart-service
    description: API served by chart-service
  - name: thunder-service
    description: API served by thunder-service
  - name: fe-user
    description: API used by the end user
  - name: agent-user
    description: API used by the ercole-agent
  - name: developer-user
    description: API used by the developers
  - name: service-user
    description: API used by the services
  - name: read
    description: API that don't change the state of the informations
  - name: write
    description: API that change the state of the informations
components:
  securitySchemes:
    basicAuthDataService:
      type: http
      scheme: basic
      description: access to data-service APIs
    basicAuthAlertService:
      type: http
      scheme: basic
      description: access to alert-service APIs
    basicAuthApiService:
      type: http
      scheme: basic
      description: access to api-service APIs
    tokenAuthApiService:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: access using the access token
  responses:
    error:
      description: Contains some informations about an error
      content:
        application/json:
          schema:
            type: object
            additionalProperties: false
            properties:
              error:
                type: string
              message:
                type: string
              sourceFilename:
                type: string
              lineNumber:
                type: integer
            required:
              - error
              - message
              - sourceFilename
              - lineNumber
          examples:
            Test1:
              value:
                error: Invalid  status
                errorDescription: invalid status
                sourceFilename: /home/travis/go/src/github.com/ercole-io/ercole/api-service/controller/alerts_api.go
                lineNumber: 65
  schemas:
    Configuration:
      type: object
      properties:
        DataService:
          type: object
          $ref: "#/components/schemas/DataService"
        AlertService:
          type: object
          $ref: "#/components/schemas/AlertService"
        APIService:
          type: object
          $ref: "#/components/schemas/APIService"
        ChartService:
          type: object
          $ref: "#/components/schemas/ChartService"
        ThunderService:
          type: object
          $ref: "#/components/schemas/ThunderService"
        ResourceFilePath:
          type: string

    DataService:
      type: object
      properties:
        RemoteEndpoint:
          type: string
        BindIP:
          type: string
        LogHTTPRequest:
          type: boolean
        LogInsertingHostdata:
          type: boolean
        AgentUsername:
          type: string
        AgentPassword:
          type: string
        CurrentHostCleaningJob:
          type: object
          properties:
            Crontab:
              type: string
            HourThreshold:
              type: integer
            RunAtStartup:
              type: boolean
        ArchivedHostCleaningJob:
          type: object
          properties:
            Crontab:
              type: string
            HourThreshold:
              type: integer
            RunAtStartup:
              type: boolean
        FreshnessCheckJob:
          type: object
          properties:
            Crontab:
              type: string
            HourThreshold:
              type: integer
            RunAtStartup:
              type: boolean
        LicenseTypeMetricsDefault:
          type: array
          items:
            type: string
        LicenseTypeMetricsByEnvironment:
          type: object

    AlertService:
      type: object
      properties:
        RemoteEndpoint:
          type: string
        BindIP:
          type: string
        Port:
          type: integer
        LogHTTPRequest:
          type: boolean
        LogMessages:
          type: boolean
        LogAlertThrows:
          type: boolean
        PublisherUsername:
          type: string
        PublisherPassword:
          type: string
        QueueBufferSize:
          type: integer
        Emailer:
          type: object
          properties:
            Enabled:
              type: boolean
            From:
              type: string
            To:
              type: array
              items:
                type: string
            SMTPServer:
              type: string
            SMTPPort:
              type: integer
            SMTPUsername:
              type: string
            SMTPPassword:
              type: string
            DisableSSLCertificateValidation:
              type: boolean

    APIService:
      type: object
      properties:
        RemoteEndpoint:
          type: string
        BindIP:
          type: string
        Port:
          type: integer
        LogHTTPRequest:
          type: boolean
        ReadOnly:
          type: boolean
        DebugOracleDatabaseContractsAssignmentAlgorithm:
          type: boolean
        AuthenticationProvider:
          type: object
          properties:
            Type:
              type: string
            Username:
              type: string
            Password:
              type: string
            PrivateKey:
              type: string
            PublicKey:
              type: string
            TokenValidityTimeout:
              type: integer
            Host:
              type: string
            Port:
              type: integer
            LDAPBase:
              type: string
            LDAPUseSSL:
              type: boolean
            LDAPBindDN:
              type: string
            LDAPBindPassword:
              type: string
            LDAPUserFilter:
              type: string
            LDAPGroupFilter:
              type: string
        OperatingSystemAggregationRules:
          type: array
          items:
            type: object
            properties:
              Regex:
                type: string
              Group:
                type: string
              Product:
                type: string
        DefaultDatabaseTags:
          type: array
          items:
            type: string

    ChartService:
      type: object
      properties:
        RemoteEndpoint:
          type: string
        BindIP:
          type: string
        Port:
          type: integer
        LogHTTPRequest:
          type: boolean

    ThunderService:
      type: object
      properties:
        RemoteEndpoint:
          type: string
        BindIP:
          type: string
        Port:
          type: integer
        LogHTTPRequest:
          type: boolean
        OciDataRetrieveJob:
          type: object
          properties:
            Crontab:
              type: string
            HourThreshold:
              type: integer
            RunAtStartup:
              type: boolean
        OciRemoveOldDataObjectsJob:
          type: object
          properties:
            Crontab:
              type: string
            HourThreshold:
              type: integer
            RunAtStartup:
              type: boolean
        AwsDataRetrieveJob:
          type: object
          properties:
            Crontab:
              type: string
            HourThreshold:
              type: integer
            RunAtStartup:
              type: boolean

    HostDataInfo:
      type: object
      required:
        - hostname
        - environment
        - location
        - cpuModel
        - cpuCores
        - cpuThreads
        - socket
        - type
        - virtual
        - kernel
        - os
        - memoryTotal
        - swapTotal
        - oracleCluster
        - veritasCluster
        - sunCluster
        - aixCluster
      properties:
        hostname:
          type: string
          pattern: '^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$'
        environment:
          type: string
        location:
          type: string
        cpuModel:
          type: string
        cpuCores:
          type: integer
        cpuThreads:
          type: integer
        socket:
          type: integer
        type:
          type: string
        virtual:
          type: boolean
        kernel:
          type: string
        os:
          type: string
        memoryTotal:
          type: number
        swapTotal:
          type: number
        oracleCluster:
          type: boolean
        veritasCluster:
          type: boolean
        sunCluster:
          type: boolean
        aixCluster:
          type: boolean
    Filesystems:
      type: array
      items:
        type: object
        properties:
          filesystem:
            type: string
          fsType:
            type: string
          size:
            type: string
          used:
            type: string
          usedPerc:
            type: string
          mountedOn:
            type: string
        required:
          - filesystem
          - fsType
          - size
          - used
          - usedPerc
          - mountedOn
    Patch:
      type: object
      properties:
        database:
          type: string
        version:
          type: string
        patchID:
          type: string
        action:
          type: string
        description:
          type: string
        date:
          type: string
      required:
        - database
        - version
        - patchID
        - action
        - description
        - date
    Tablespace:
      type: object
      properties:
        database:
          type: string
        name:
          type: string
        maxSize:
          type: string
        total:
          type: string
        used:
          type: string
        usedPerc:
          type: string
        status:
          type: string
      required:
        - database
        - name
        - maxSize
        - total
        - used
        - usedPerc
        - status
    Schema:
      type: object
      properties:
        Database:
          type: string
        User:
          type: string
        Total:
          type: integer
        Tables:
          type: integer
        Indexes:
          type: integer
        lob:
          type: integer
      required:
        - Database
        - User
        - Total
        - Tables
        - Indexes
        - LOB
    Partitioning:
      type: object
      properties:
        owner:
          type: string
        segmentName:
          type: string
        count:
          type: integer
        mb:
          type: number
      required:
        - Owner
        - SegmentName
        - Count
        - Mb
    OracleDatabaseFeature:
      type: object
      properties:
        Name:
          type: string
        Status:
          type: boolean
      required:
        - Name
        - Status
    License:
      type: object
      properties:
        Name:
          type: string
        Count:
          type: number
      required:
        - Name
        - Count
    ADDM:
      type: object
      properties:
        Finding:
          type: string
        Recommendation:
          type: string
        Action:
          type: string
        Benefit:
          oneOf:
            - type: string
            - type: boolean
        Hostname:
          type: string
          nullable: true
        Location:
          type: string
          nullable: true
        Environment:
          type: string
          nullable: true
        CreatedAt:
          type: string
          nullable: true
      required:
        - Finding
        - Recommendation
        - Action
        - Benefit
    SegmentAdvisor:
      type: object
      properties:
        SegmentOwner:
          type: string
        SegmentName:
          type: string
        SegmentType:
          type: string
        PartitionName:
          type: string
        Reclaimable:
          type: string
        Recommendation:
          type: string
      required:
        - SegmentOwner
        - SegmentName
        - SegmentType
        - PartitionName
        - Reclaimable
        - Recommendation
    LastPSU:
      type: object
      properties:
        Date:
          type: string
        Description:
          type: string
      required:
        - Date
        - Description
    Backup:
      type: object
      properties:
        BackupType:
          type: string
        Hour:
          type: string
        WeekDays:
          type: string
        AvgBckSize:
          type: string
        Retention:
          type: string
      required:
        - BackupType
        - Hour
        - WeekDays
        - AvgBckSize
        - Retention
    Database:
      type: object
      properties:
        pgsqlMigrabilitySemaphore:
          type: string
        InstanceNumber:
          type: string
          nullable: true
        InstanceName:
          type: string
        Name:
          type: string
        UniqueName:
          type: string
        Status:
          type: string
        Version:
          type: string
        Platform:
          type: string
          nullable: true
        Archivelog:
          type: string
          nullable: true
        Charset:
          type: string
          nullable: true
        nCharset:
          type: string
          nullable: true
        BlockSize:
          type: string
        cpuCount:
          type: string
        sgaTarget:
          type: string
          nullable: true
        pgaTarget:
          type: string
          nullable: true
        MemoryTarget:
          type: string
          nullable: true
        sgaMaxSize:
          type: string
          nullable: true
        SegmentsSize:
          type: string
        Used:
          type: string
          nullable: true
        Allocable:
          type: string
          nullable: true
        Elapsed:
          type: string
          nullable: true
        dbTime:
          type: string
          nullable: true
        DailycpuUsage:
          type: string
          nullable: true
        Work:
          type: string
        asm:
          type: boolean
          nullable: true
        Dataguard:
          type: boolean
        rac:
          nullable: true
          type: boolean
        ha:
          nullable: true
          type: boolean
        Hostname:
          type: string
          nullable: true
        Location:
          type: string
          nullable: true
        Environment:
          type: string
          nullable: true
        CreatedAt:
          type: string
          nullable: true
        ArchiveLogStatus:
          type: boolean
          nullable: true
        Memory:
          type: number
          nullable: true
        DatafileSize:
          type: number
          nullable: true
        Patches:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/Patch"
        Tablespaces:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/Tablespace"
        Schemas:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/Schema"
        Features:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/OracleDatabaseFeature"
        Licenses:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/License"
        Partitionings:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/Partitioning"
        addms:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/ADDM"
        SegmentAdvisors:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/SegmentAdvisor"
        LastpsUs:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/LastPSU"
        Backups:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/Backup"
        Changes:
          nullable: true
          type: array
          items:
            $ref: "#/components/schemas/DatabaseChange"
        pgsqlMigrability:
          nullable: true
          type: array
          items:
            $ref: "#/components/schemas/PgsqlMigrability"
        canbemigrate:
          type: boolean
      required:
        - Name
        - UniqueName
        - Status
        - Version
        - BlockSize
        - CPUCount
        - SegmentsSize
        - Work
        - Dataguard
    Cluster:
      type: object
      properties:
        Name:
          type: string
        Environment:
          type: string
          nullable: true
        Location:
          type: string
          nullable: true
        Hostname:
          type: string
          nullable: true
        HostnameAgentVirtualization:
          type: string
          nullable: true
        VirtualizationNodes:
          nullable: true
          anyOf:
            - type: string
              nullable: true
            - type: array
              items:
                type: string
              uniqueItems: true
        PhysicalServerModelNames:
          nullable: true
          anyOf:
            - type: string
              nullable: true
            - type: array
              items:
                type: string
              uniqueItems: true
        VirtualizationNodesCount:
          nullable: true
          type: integer
        VirtualizationNodesStats:
          nullable: true
          type: object
          required:
            - VirtualizationNode
            - TotalVMsCount
            - TotalVMsWithErcoleAgentCount
            - TotalVMsWithoutErcoleAgentCount
          properties:
            VirtualizationNode:
              type: string
            TotalvMsCount:
              type: integer
            TotalvMsWithErcoleAgentCount:
              type: integer
            TotalvMsWithoutErcoleAgentCount:
              type: integer
        Type:
          type: string
        cpu:
          type: integer
        Sockets:
          type: integer
        vmsCount:
          type: integer
          nullable: true
        vmsErcoleAgentCount:
          type: integer
          nullable: true
        vms:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              clusterName:
                type: string
              hostname:
                type: string
              cappedCPU:
                type: boolean
              virtualizationNode:
                type: string
              physicalServerModelName:
                type: string
              isErcoleInstalled:
                type: boolean
            required:
              - name
              - clusterName
              - hostname
              - cappedCPU
              - virtualizationNode
      required:
        - name
        - type
        - cpu
        - sockets
        - vms
    CellDisk:
      type: object
      properties:
        name:
          type: string
        status:
          type: string
        errCount:
          type: string
        usedPerc:
          type: string
      required:
        - name
        - status
        - errCount
        - usedPerc
    ExadataInstance:
      type: object
      properties:
        hostname:
          type: string
        rackID:
          type: string
        components:
          type: array
          items:
            $ref: "#/components/schemas/ExadataComponent"
        totalMemory:
          type: integer
        usedMemory:
          type: integer
        freeMemory:
          type: integer
        totalCPU:
          type: integer
        usedCPU:
          type: integer
        freeCPU:
          type: integer
        totalSize:
          $ref: "#/components/schemas/ExadataMeasurement"
        usedSize:
          $ref: "#/components/schemas/ExadataMeasurement"
        freeSpace:
          $ref: "#/components/schemas/ExadataMeasurement"
      required:
        - racID
    ExadataComponent:
      type: object
      properties:
        rackID:
          type: string
        hostType:
          type: string
        hostname:
          type: string
        hostID:
          type: string
        cpuEnabled:
          type: integer
        totalCPU:
          type: integer
        memory:
          type: integer
        imageVersion:
          type: string
        kernel:
          type: string
        model:
          type: string
        fanUsed:
          type: integer
        fanTotal:
          type: integer
        psuUsed:
          type: integer
        psuTotal:
          type: integer
        msStatus:
          type: string
        rsStatus:
          type: string
        cellServiceStatus:
          type: string
        swVersion:
          type: string
        vms:
          type: array
          items:
            $ref: "#/components/schemas/ExadataVM"
        storageCells:
          type: array
          items:
            $ref: "#/components/schemas/ExadataStorageCell"
        usedRAM:
          type: integer
        freeRAM:
          type: integer
        usedCPU:
          type: integer
        freeCPU:
          type: integer
        freeSizePercentage:
          type: integer
        totalSize:
          $ref: "#/components/schemas/ExadataMeasurement"
        totalFreeSpace:
          $ref: "#/components/schemas/ExadataMeasurement"
      required:
        - hostType
    ExadataVM:
      type: object
      properties:
        "type":
          type: string
        physicalHost:
          type: string
        status:
          type: string
        name:
          type: string
        cpuCurrent:
          type: integer
        cpuRestart:
          type: integer
        ramCurrent:
          type: integer
        ramRestart:
          type: integer
        cpuOnline:
          type: integer
        cpuMaxUsable:
          type: integer
        ramOnline:
          type: integer
        ramMaxUsable:
          type: integer
        clusterNames:
          type: array
          items:
            type: string
      required:
        - "type"
    ExadataStorageCell:
      type: object
      properties:
        "type":
          type: string
        hostname:
          type: string
        cellDisk:
          type: string
        size:
          $ref: "#/components/schemas/ExadataMeasurement"
        freeSpace:
          $ref: "#/components/schemas/ExadataMeasurement"
        status:
          type: string
        errorCount:
          type: integer
        gridDisks:
          type: array
          items:
            $ref: "#/components/schemas/ExadataGridDisk"
        database:
          $ref: "#/components/schemas/ExadataDatabase"
        freeSizePercentage:
          type: integer
      required:
        - type
    ExadataGridDisk:
      type: object
      properties:
        "type":
          type: string
        hostname:
          type: string
        gridDisk:
          type: string
        size:
          type: string
        status:
          type: string
        errorCount:
          type: integer
        cachingPolicy:
          type: string
        asmDiskName:
          type: string
        asmDiskGroup:
          type: string
        asmDiskSize:
          type: string
        asmDiskStatus:
          type: string
      required:
        - type
    ExadataDatabase:
      type: array
      items: 
        properties:
          "type":
            type: string
          dbName:
            type: string
          dbID:
            type: integer
          flashCacheLimit:
            type: integer
          iormShare:
            type: integer
          lastIOReq:
            type: string
        required:
          - type
    ExadataMeasurement:
      type: object
      properties:
        unparsedValue:
          type: string
        symbol:
          type: string
        quantity:
          type: number
    HostData:
      description: A hostdata from FE
      type: object
      properties:
        hostname:
          type: string
        environment:
          type: string
        location:
          type: string
        version:
          type: string
        hostDataSchemaVersion:
          type: integer
        databases:
          type: string
        schemas:
          type: string
          nullable: true
        info:
          $ref: "#/components/schemas/HostDataInfo"
        os:
          type: string
          nullable: true
        kernel:
          type: string
          nullable: true
        oracleCluster:
          type: boolean
          nullable: true
        sunCluster:
          type: boolean
          nullable: true
        veritasCluster:
          type: boolean
          nullable: true
        virtual:
          type: boolean
          nullable: true
        type:
          type: string
          nullable: true
        cpuThreads:
          type: integer
          nullable: true
        cpuCores:
          type: integer
          nullable: true
        socket:
          type: integer
          nullable: true
        memTotal:
          type: integer
          nullable: true
        swapTotal:
          type: integer
          nullable: true
        cpuModel:
          type: string
          nullable: true
        physicalServerName:
          type: string
          nullable: true
        virtualServerName:
          type: string
          nullable: true
        virtualizationTechnology:
          type: string
          nullable: true
        dbInstanceName:
          type: string
          nullable: true
        pluggableDatabaseName:
          type: string
          nullable: true
        connectString:
          type: string
          nullable: true
        productVersion:
          type: string
          nullable: true
        productEdition:
          type: string
          nullable: true
        features:
          type: object
          properties:
            oracle:
              type: object
              properties:
                databases:
                  type: array
                  items:
                    type: object
                    properties:
                      "":
                        type: string
                unlistedRunningDatabases:
                  type: array
                  items:
                    type: string
        racNodeNames:
          type: string
          nullable: true
        processorModel:
          type: string
          nullable: true
        processors:
          type: integer
          nullable: true
        coresPerProcessor:
          type: integer
          nullable: true
        threadsPerCore:
          type: integer
          nullable: true
        processorSpeed:
          type: string
          nullable: true
        serverPurchaseDate:
          type: string
          nullable: true
        operatingSystem:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
        physicalCores:
          type: integer
          nullable: true
        history:
          type: array
          items:
            $ref: "#/components/schemas/HistoryEntry"
        extra:
          type: object
          required:
            - filesystems
          properties:
            filesystems:
              $ref: "#/components/schemas/Filesystems"
            databases:
              nullable: true
              type: array
              items:
                $ref: "#/components/schemas/Database"
            clusters:
              nullable: true
              type: array
              items:
                $ref: "#/components/schemas/Cluster"
        cluster:
          type: string
          nullable: true
        virtualizationNode:
          type: string
          nullable: true
        consumptions:
          type: array
          items:
            type: object
            properties:
              timeStart:
                type: string
                format: date-time
              timeEnd:
                type: string
                format: date-time
              cpuAvg:
                type: number
        isMissingDB:
          type: array
          items:
            type: string
      required:
        - hostname
        - environment
        - location
        - version
        - hostDataSchemaVersion
        - info
        - extra
    PgsqlMigrability:
      type: object
      properties:
        metric:
          type: string
          nullable: true
        count:
          nullable: true
          type: integer
        schema:
          nullable: true
          type: string
        objectType:
          nullable: true
          type: string
    SqlServerInstance:
      type: object
      properties:
        Hostname:
          type: string
        Name:
          type: string
        Status:
          type: string
        Edition:
          type: string
        CollationName:
          type: string
        Version:
          type: string
    PostgreSqlInstance:
      type: object
      properties:
        Hostname:
          type: string
        Name:
          type: string
        Charset:
          type: string
        Version:
          type: string
    MongoDBInstance:
      type: object
      properties:
        Hostname:
          type: string
        Environment:
          type: string
        Location:
          type: string
        DBName:
          type: string
        Name:
          type: string
        Charset:
          type: string
        Version:
          type: string
    PageMetadata:
      type: object
      required:
        - empty
        - first
        - last
        - number
        - size
        - totalElements
        - totalPages
      properties:
        empty:
          type: boolean
        first:
          type: boolean
        last:
          type: boolean
        number:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
        totalPages:
          type: integer
    HistoryEntry:
      type: object
      required:
        - _id
        - createdAt
      properties:
        _id:
          type: string
        createdAt:
          type: string
        totalDailycpuUsage:
          type: number
    DatabaseChange:
      type: object
      required:
        - dailyCPUUsage
        - segmentsSize
        - updated
        - used
      properties:
        dailycpuUsage:
          type: string
        segmentsSize:
          type: string
        updated:
          type: string
        used:
          type: string
    Alert:
      title: Alert
      type: object
      properties:
        otherInfo:
          type: object
          properties:
            dbName:
              type: string
              description: The name of the database
            hostname:
              type: string
              description: The name of the host
        hostname:
          type: string
          description: The name of the host
        description:
          type: string
          description: "The message alert receive from the host at that time "
        alertCategory:
          type: string
          enum:
            - SYSTEM
            - AGENT
            - LICENSE
        alertAffectedTechnology:
          nullable: true
          type: string
          enum:
            - Oracle/Database
            - Oracle/Exadata
        alertStatus:
          type: string
          enum:
            - NEW
            - ACK
          example: NEW
        alertSeverity:
          type: string
          enum:
            - WARNING
            - CRITICAL
            - INFO
        alertCode:
          type: string
          enum:
            - NEW_DATABASE
            - NEW_OPTION
            - NEW_LICENSE
            - NEW_SERVER
            - NO_DATA
        _id:
          type: string
          description: ID of the alert
      required:
        - hostname
        - description
        - alertCategory
        - alertAffectedTechnology
        - alertStatus
        - alertSeverity
        - alertCode
        - _id
    PatchAdvisorInfo:
      type: object
      properties:
        location:
          type: string
        environment:
          type: string
        hostname:
          type: string
          pattern: '^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$'
        createdAt:
          type: string
        date:
          type: string
        dbname:
          type: string
        dbver:
          type: string
        description:
          type: string
        status:
          type: string
        _id:
          type: string
      required:
        - location
        - environment
        - hostname
        - createdAt
        - date
        - dbname
        - dbver
        - description
        - status
        - _id
    Features:
      type: object
      properties:
        Oracle/Database:
          type: boolean
          nullable: true
        Oracle/Exadata:
          type: boolean
          nullable: true
        Postgresql/Postgresql:
          type: boolean
          nullable: true
        Microsoft/sqlServer:
          type: boolean
          nullable: true
    TechnologyStatus:
      type: object
      properties:
        product:
          type: string
          description: technology product code
        hostsCount:
          type: integer
          description: number of hosts found supporting the current product
        compliance:
          type: number
          description: |-
            a metric ranging [0..1] calculated as follows:
            if a ULA exists for a given product, its compliance := 1.
            When calculating the total, this product's purchasedLicenses := usedLicenses
            else if usedLicenses <= purchasedLicenses the product's compliance := 1.
            When calculating the total, this product's purchasedLicenses := usedLicenses else this product's compliance := purchasedLicenses / usedLicenses.
        unpaidDues:
          type: number
          description: |-
            "unpaidDues" = difference between calculated cost of used and purchased licenses:
            if usedLicensesCost <= purchasedLicensesCost, then unpaidDues := 0
            else unpaidDues := usedLicensesCost - purchasedLicensesCost
      required:
        - product
        - hostsCount
        - compliance
        - unpaidDues
    AllTechnologyComplianceStatus:
      type: object
      properties:
        hostsCount:
          type: integer
          description: number of hosts
        compliance:
          type: number
          description: sum(purchasedLicenses) / sum(usedLicenses) for each product
        unpaidDues:
          type: number
          description: sum of unpaidDues
      required:
        - hostsCount
        - compliance
        - unpaidDues
    AggregatedCodeSeverityAlerts:
      type: object
      required:
        - category
        - code
        - severity
        - count
        - affectedHosts
        - oldestAlert
      properties:
        category:
          type: string
          enum:
            - SYSTEM
            - AGENT
            - LICENSE
        code:
          type: string
          externalDocs:
            url: "https://github.com/ercole-io/ercole/blob/master/model/alert.go"
        severity:
          type: string
          externalDocs:
            url: "https://github.com/ercole-io/ercole/blob/master/model/alert.go"
        count:
          type: integer
        affectedHosts:
          type: integer
        oldestAlert:
          type: string
          format: date-time
          example: "2020-05-05T08:23:40+00:00"
    AggregatedCategorySeverityAlerts:
      type: object
      required:
        - category
        - severity
        - count
        - affectedHosts
        - oldestAlert
      properties:
        category:
          type: string
          enum:
            - SYSTEM
            - AGENT
            - LICENSE
        severity:
          type: string
          externalDocs:
            url: "https://github.com/ercole-io/ercole/blob/master/model/alert.go"
        count:
          type: integer
        affectedHosts:
          type: integer
        oldestAlert:
          type: string
          format: date-time
          example: "2020-05-05T08:23:40+00:00"
    LicenseCount:
      type: object
      properties:
        _id:
          type: string
        used:
          type: number
        count:
          type: number
        costPerProcessor:
          type: number
        unlimited:
          type: boolean
        paidCost:
          type: number
        totalCost:
          type: number
        compliance:
          type: boolean
        hosts:
          nullable: true
          type: array
          items:
            type: object
            required:
              - hostname
              - databases
            properties:
              hostname:
                type: string
              databases:
                type: array
                uniqueItems: true
                items:
                  type: string
      required:
        - _id
        - used
        - count
        - totalCost
        - paidCost
        - costPerProcessor
        - compliance
        - unlimited
    TechnologyInfo:
      type: object
      required:
        - product
        - prettyName
        - color
        - logo
      properties:
        product:
          type: string
        prettyName:
          type: string
        color:
          type: string
        logo:
          type: string
          description: base64 encoded png 256x256 image
    Chart:
      type: object
      required:
        - data
        - legend
      properties:
        legend:
          additionalProperties:
            type: string
        data:
          type: array
          items:
            type: object
            required:
              - color
              - name
              - size
            properties:
              color:
                type: string
              name:
                type: string
              size:
                type: number
    ChangeChart:
      type: object
      required:
        - data
        - legend
      properties:
        legend:
          additionalProperties:
            type: string
        data:
          type: array
          items:
            type: object
            required:
              - name
              - size
              - change
            properties:
              name:
                type: string
              size:
                type: number
              change:
                type: number
    TechnologyTypesChart:
      type: object
      required:
        - databases
        - middlewares
        - operatingSystems
        - legend
      properties:
        legend:
          additionalProperties:
            type: string
        databases:
          type: array
          items:
            type: object
            required:
              - name
              - size
            properties:
              name:
                type: string
              size:
                type: number
        middlewares:
          type: array
          items:
            type: object
            required:
              - name
              - size
            properties:
              name:
                type: string
              size:
                type: number
        operatingSystems:
          type: array
          items:
            type: object
            required:
              - name
              - size
            properties:
              name:
                type: string
              size:
                type: number
    LicenseType:
      description: ""
      type: object
      properties:
        id:
          type: string
          minLength: 1
        itemDescription:
          type: string
          minLength: 1
        metric:
          type: string
          minLength: 1
        cost:
          type: number
      required:
        - id
        - itemDescription
        - metric
        - cost
    SqlServerLicenseType:
      description: ""
      type: object
      properties:
        id:
          type: string
          minLength: 1
        itemDescription:
          type: string
        version:
          type: string
        edition:
          type: string
      required:
        - id
        - itemDescription
        - version
        - edition
    MySqlLicenseType:
      description: ""
      type: object
      properties:
        id:
          type: string
          minLength: 1
        itemDescription:
          type: string
      required:
        - id
        - itemDescription
    LicenseUsed:
      type: array
      items:
        type: object
        properties:
          hostname:
            type: string
          dbname:
            type: string
          licenseTypeID:
            type: string
          description":
            type: string
          metric:
            type: string
          usedLicenses:
            type: integer
          clusterLicenses:
            type: integer
          ignored:
            type: boolean
          ignoredComment:
            type: string
    MySQLContract:
      description: ""
      type: object
      properties:
        id:
          $ref: "#/components/schemas/ObjectID"
        type:
          type: string
          minLength: 1
        contractID:
          type: string
          minLength: 1
        csi:
          type: string
          minLength: 1
        numberOfLicenses:
          type: integer
          minimum: 0
        supportExpiration:
          type: string
        clusters:
          type: array
          items:
            type: string
        hosts:
          type: array
          items:
            type: string
      required:
        - id
        - type
        - contractID
        - csi
        - numberOfLicenses
        - clusters
        - hosts
    Role:
      description: ""
      type: object
      properties:
        name:
          type: string
          minLength: 1
        description:
          type: string
          minLength: 1
        location:
          type: string
          minLength: 1
        permission:
          type: string
          enum:
            - admin
            - read
            - write
      required:
        - name
        - description
        - location
        - permission
    Group:
      description: ""
      type: object
      properties:
        name:
          type: string
          minLength: 1
        description:
          type: string
        roles:
          type: array
          items:
            type: string
        tags:
          type: array
          items:
            type: string
      required:
        - name
    User:
      description: ""
      type: object
      properties:
        username:
          type: string
          minLength: 1
        password:
          type: string
          minLength: 1
        lastLogin:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        groups:
          type: array
          items:
            type: string
    UsersLDAP:
      description: ""
      type: object
      properties:
        GivenName:
          type: string
        Sn:
          type: string
        Uid:
          type: string
      required:
        - user
    Node:
      type: object
      properties:
        name:
          type: string
        roles:
          type: array
          items:
            type: string
        parent:
          type: string
    ObjectID:
      type: string
      title: ObjectID
      example: 605dbac5f3923acddba4fac5
      minLength: 24
      maxLength: 24
      x-examples:
        example-1: 605dbac5f3923acddba4fac5
    OciRecommendation:
      title: OciRecommendation
      type: object
      properties:
        tenancyOCID:
          type: string
        name:
          type: string
        numPending:
          type: string
        estimatedCostSaving:
          type: string
        status:
          type: string
        importance:
          type: string
        recommendationId:
          type: string
    OciProfile:
      title: OciProfile
      type: object
      properties:
        id:
          $ref: "#/components/schemas/ObjectID"
        profile:
          type: string
        tenancyOCID:
          type: string
        userOCID:
          type: string
        keyFingerprint:
          type: string
        region:
          type: string
        privateKey:
          type: string
    OciErcoleRecommendation:
      title: OciErcoleRecommendation
      type: object
      properties:
        type:
          type: string
        compartmentID:
          type: string
        compartmentName:
          type: string
        name:
          type: string
        resourceID:
          type: string
    OciCompartment:
      title: OciCompartment
      type: object
      properties:
        compartmentID:
          type: string
        name:
          type: string
        description:
          type: string
        timeCreating:
          type: string
    OciVolumePerformance:
      title: OciVolumePerformance
      type: object
      properties:
        vpu:
          type: integer
        performances:
          type: array
          items:
            $ref: "#/components/schemas/OciPerformance"
    OciPerfValues:
      title: OciPerfValues
      type: object
      properties:
        maxThroughput:
          type: number
        maxIOPS:
          type: integer
    OciPerformance:
      title: OciPerformance
      type: object
      properties:
        size:
          type: integer
        values:
          $ref: "#/components/schemas/OciPerfValues"
    SqlServerDatabaseContract:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
        licenseTypeID:
          type: string
        contractID:
          type: string
        licensesNumber:
          type: integer
        supportExpiration:
          type: string
        hosts:
          type: array
          items:
            type: string
        clusters:
          type: array
          items:
            type: string
    OracleGrantDba:
      type: object
      properties:
        hostname:
          type: string
        databasename:
          type: string
        oracleGrantDba:
          type: object
          properties:
            grantee:
              type: string
            adminOption:
              type: string
            defaultRole:
              type: string
    OracleDatabasePatch:
      type: object
      properties:
        hostname:
          type: string
        databasename:
          type: string
        oracleDatabasePatch:
          type: object
          properties:
            version:
              type: string
            patchID:
              type: integer
            action:
              type: string
            description:
              type: string
            date:
              type: string
    OracleDatabaseOption:
      type: object
      properties:
        hostname:
          type: string
        databasename:
          type: string
        oracleDatabaseFeatureUsageStat:
          type: object
          properties:
            product:
              type: string
            feature:
              type: string
            detectedUsages:
              type: integer
            currentlyUsed:
              type: boolean
            firstUsageDate:
              type: string
            lastUsageDate:
              type: string
            extraFeatureInfo:
              type: string
    OracleDatabaseTablespace:
      type: object
      properties:
        hostname:
          type: string
        name:
          type: string
        maxSize:
          type: number
        total:
          type: number
        used:
          type: number
        usedPerc:
          type: number
        status:
          type: string
    OracleDatabasePdb:
      type: object
      properties:
        hostname:
          type: string
        pdb:
          type: object
          properties:
            name:
              type: string
            status:
              type: string
            segmentsSize:
              type: number
            datafileSize:
              type: number
            allocable:
              type: number
            charset:
              type: string
            tablespaces:
              type: array
              items:
                $ref: "#/components/schemas/Tablespace"
            schemas:
              type: array
              items:
                $ref: "#/components/schemas/Schema"
            services:
              type: array
              items:
                type: object
                properties:
                  name:
                    type: string
                  failoverMethod:
                    type: string
                  failoverType:
                    type: string
                  failoverRetries:
                    type: integer
                  failoverDelay:
                    type: integer
                  enabled:
                    type: boolean
                  dbname:
                    type: string
            segmentAdvisors:
              type: array
              items:
                $ref: "#/components/schemas/SegmentAdvisor"
            grantDba:
              type: array
              items:
                $ref: "#/components/schemas/OracleGrantDba"
            partitionings:
              type: array
              items:
                $ref: "#/components/schemas/Partitioning"
    OracleDatabaseSchema:
      type: object
      properties:
        hostname:
          type: string
        database:
          type: string
        indexes:
          type: integer
        lob:
          type: integer
        tables:
          type: integer
        total:
          type: integer
        user:
          type: string
        accountStatus:
          type: string
        pdb:
          type: string
    OracleDatabaseChange:
      type: object
      properties:
        hostname:
          type: string
        oracleChangesDBs:
          type: array
          items:
            type: object
            properties:
              databasename:
                type: string
              oracleChanges:
                type: array
                items:
                  type: object
                  properties:
                    dailyCPUUsage:
                      type: number
                    segmentsSize:
                      type: number
                    updated:
                      type: string
                    datafileSize:
                      type: number
                    allocable:
                      type: number
    OraclePdbChange:
      type: object
      properties:
        dbName:
          type: string
        pdbName:
          type: string
        updated:
          type: string
        dataFileSize:
          type: number
        segmentSize:
          type: number
        allocable:
          type: number
    OracleDatabaseBackup:
      type: object
      properties:
        hostname:
          type: string
        databasename:
          type: string
        oracleDatabaseBackup:
          type: object
          properties:
            backupType:
              type: string
            hour:
              type: string
            weekDays:
              type: array
              items:
                type: string
            avgBckSize:
              type: number
            retention:
              type: string
    OracleDatabaseService:
      type: object
      properties:
        hostname:
          type: string
        databasename:
          type: string
        oracleDatabaseService:
          type: object
          properties:
            name:
              type: string
            failoverMethod:
              type: string
            failoverType:
              type: string
            failoverRetries:
              type: integer
            failoverDelay:
              type: integer
            enabled:
              type: boolean
            dbname:
              type: string
    OracleDatabasePartitioning:
      type: object
      properties:
        hostname:
          type: string
        database:
          type: string
        owner:
          type: string
        segmentName:
          type: string
        count:
          type: integer
        mb:
          type: number
        pdb:
          type: string
  parameters:
    search:
      in: query
      name: search
      required: false
      description: filter the result using search terms
      allowEmptyValue: true
      example: foobar
      schema:
        type: string
        readOnly: true
        example: foobar
    sort-by:
      in: query
      name: sort-by
      required: false
      description: sort the result by a field
      allowEmptyValue: true
      example: foobar
      schema:
        type: string
        readOnly: true
        example: CreatedAt
    sort-desc:
      schema:
        type: boolean
      in: query
      name: sort-desc
      description: |
        Sort the field descendently instead of ascendently
      allowEmptyValue: true
    page:
      schema:
        type: integer
      in: query
      name: page
      description: Number of the page
      allowEmptyValue: true
    size:
      schema:
        type: integer
      in: query
      name: size
      description: Size of the page
      allowEmptyValue: true
    location:
      schema:
        type: string
        example: Italy
      in: query
      name: location
      description: Filter by location
      allowEmptyValue: true
    environment:
      schema:
        type: string
        example: TST
      in: query
      name: environment
      description: Filter by environment
      allowEmptyValue: true
    older-than:
      schema:
        type: string
        format: date-time
        example: "2020-05-05T08:23:40.000Z"
      in: query
      name: older-than
      description: Filter until the date
      allowEmptyValue: true
    newer-than:
      schema:
        type: string
        format: date-time
        example: "2020-01-05T08:23:40+00:00"
      in: query
      name: newer-than
      description: Filter after the date
      allowEmptyValue: true
    limit:
      schema:
        type: integer
        example: 15
      in: query
      name: limit
      description: Limit the size of the result
      allowEmptyValue: true
    window-time:
      schema:
        type: integer
        default: 6
      in: query
      name: window-time
      description: "window time to check the patch date, in months"
paths:
  /ping:
    get:
      summary: Check the availability of the server
      description: Check the availability of the server
      tags:
        - data-service
        - api-service
        - alert-service
        - developer-user
        - read
      operationId: ping
      responses:
        "200":
          description: OK
          content:
            text/plain:
              schema:
                type: string
                example: PONG!
                readOnly: true
  /version:
    get:
      summary: Check the version of the server
      description: Check the version of the server
      tags:
        - api-service
      operationId: version
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  version:
                    type: string
  /configuration:
    get:
      summary: Get the configuration of the server
      description: Get the configuration of the server
      tags:
        - api-service
      operationId: GetConfig
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Configuration"
    post:
      summary: Replace the configuration of the server
      description: Replace the configuration of the server
      tags:
        - api-service
      operationId: UpdateConfig
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Configuration"
      responses:
        "204":
          description: OK
  "/queue/host-data-insertion/{id}":
    post:
      tags:
        - alert-service
        - service-user
        - write
      security:
        - basicAuthAlertService: []
      summary: Enqueue a host data insertion event
      description: Add a host data insertion event to the queue
      operationId: hostDataInsertion
      parameters:
        - in: path
          name: id
          description: ID of the inserted hostdata
          required: true
          schema:
            type: string
            minLength: 24
            maxLength: 24
            pattern: "^[0-9a-fA-F]+$"
            example: 5e3a95f6d76af99696203d4a
      responses:
        "200":
          description: OK
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /user/login:
    post:
      tags:
        - api-service
        - fe-user
      security: []
      summary: Request access token
      description: Request a user access token given the credentials. Note that the behaviour and interface may change if the service is configured to use different authentication provider.
      operationId: GetToken
      responses:
        "200":
          description: Access token
          content:
            text/plain::
              schema:
                type: string
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts:
    get:
      tags:
        - api-service
        - fe-user
      operationId: SearchHosts
      summary: Search a list of hosts
      description: Get a list of hosts filtered using various search terms and various params. Can also generate a XLSX file
      parameters:
        - in: query
          name: mode
          description: change the scheme of the output
          allowEmptyValue: true
          example: full
          schema:
            type: string
            readOnly: true
            enum:
              - full
              - summary
              - lms
              - mhd
        - $ref: "#/components/parameters/search"
        - in: query
          name: hostname
          description: filter by hostname
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: database
          description: filter by a database name
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: technology
          description: filter by a technology
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: hardware-abstraction-technology
          description: filter by the HA technology
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: cluster
          description: filter by the name of virtualization cluster. use 'NULL' for searching host that aren't part of a virtualization cluster
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: physical-host
          description: filter by the name of physical host on which the host runs
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: operating-system
          description: filter by the operating system
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: kernel
          description: filter by the kernel
          allowEmptyValue: true
          schema:
            type: string
        - in: query
          name: memory-total-lte
          description: filter the hosts with the Info.MemoryTotal less than memory-total-lte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: memory-total-gte
          description: filter the hosts with the Info.MemoryTotal less than memory-total-gte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: swap-total-lte
          description: filter the hosts with the Info.SwapTotal less than swap-total-lte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: swap-total-gte
          description: filter the hosts with the Info.SwapTotal less than swap-total-gte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: is-member-of-cluster
          description: filter the host by operating systems cluster membership
          allowEmptyValue: true
          schema:
            type: boolean
        - in: query
          name: cpu-model
          description: filter by CPU model
          allowEmptyValue: true
          schema:
            type: boolean
        - in: query
          name: cpu-cores-lte
          description: filter the hosts with the Info.CPUCores less than cpu-cores-lte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: cpu-cores-gte
          description: filter the hosts with the Info.CPUCores less than cpu-cores-gte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: cpu-threads-lte
          description: filter the hosts with the Info.CPUThreads less than cpu-threads-lte value
          allowEmptyValue: true
          schema:
            type: number
        - in: query
          name: cpu-threads-gte
          description: filter the hosts with the Info.CPUThreads less than cpu-threads-gte value
          allowEmptyValue: true
          schema:
            type: number
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/HostData"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: full non paged
                    items:
                      $ref: "#/components/schemas/HostData"
                  - type: object
                    description: summary paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/HostData"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: summary non paged
                    items:
                      $ref: "#/components/schemas/HostData"
                  - type: object
                    description: lms paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/HostData"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: lms non paged
                    items:
                      $ref: "#/components/schemas/HostData"
            ? application/vnd.oracle.lms+vnd.openxmlformats-officedocument.spreadsheetml.sheet
            : {}
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  "/hosts/{hostname}":
    parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetHost
      summary: Get a host
      description: Get a host
      parameters:
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HostData"
    delete:
      tags:
        - api-service
        - fe-user
        - write
      operationId: DismissHost
      summary: Dismiss a host
      description: Dismiss a host
      responses:
        "200":
          description: The host is dismissed
          content: {}
        "401":
          $ref: "#/components/responses/error"
        "404":
          description: The host is not found
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  "/hosts/{hostname}/is-missing-db":
    parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
    get:
      tags:
        - api-service
      operationId: GetMissingDbHost
      summary: Check missing database
      description: Check if there are any db instances not running on host
      responses:
        "200":
          description: Ok
          content:
            application/json:
              schema:
                type: object
                properties:
                  isMissingDB:
                    type: array
                    items:
                      type: string
          
  ? "/hosts/{hostname}/technologies/oracle/databases/{dbname}/licenses/{licenseTypeID}/ignored/{ignored}"
  : parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
      - in: path
        name: dbname
        schema:
          type: string
        required: true
        description: name of the modifying database
      - in: path
        name: licenseTypeID
        schema:
          type: string
        required: true
        description: name of the license
      - in: path
        name: ignored
        schema:
          type: boolean
        required: true
        description: flag ignored
    put:
      tags:
        - api-service
        - fe-user
        - write
      operationId: UpdateLicenseIgnoredField
      summary: Update license ignored field (true/false)
      description: Update license ignored field (true/false)
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ignoredComment:
                  type: string
      responses:
        "200":
          description: The value of the the ignored field was changed successfully
          content:
            application/json: {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  ? "/hosts/{hostname}/technologies/microsoft/databases/{dbname}/ignored/{ignored}"
  : parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
      - in: path
        name: dbname
        schema:
          type: string
        required: true
        description: name of the modifying database
      - in: path
        name: ignored
        schema:
          type: boolean
        required: true
        description: flag ignored
    put:
      tags:
        - api-service
        - fe-user
        - write
      operationId: UpdateSqlServerLicenseIgnoredField
      summary: Update SQL Server license ignored field (true/false)
      description: Update SQL Server license ignored field (true/false)
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ignoredComment:
                  type: string
      responses:
        "200":
          description: The value of the the ignored field was changed successfully
          content:
            application/json: {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  "/hosts/{hostname}/technologies/mysql/databases/{dbname}/ignored/{ignored}":
    parameters:
      - in: path
        name: hostname
        schema:
          type: string
        required: true
        description: hostname of the requested host
      - in: path
        name: dbname
        schema:
          type: string
        required: true
        description: name of the modifying database
      - in: path
        name: ignored
        schema:
          type: boolean
        required: true
        description: flag ignored
    put:
      tags:
        - api-service
        - fe-user
        - write
      operationId: UpdateMySqlLicenseIgnoredField
      summary: Update MySQL license ignored field (true/false)
      description: Update MySQL license ignored field (true/false)
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                ignoredComment:
                  type: string
      responses:
        "200":
          description: The value of the the ignored field was changed successfully
          content:
            application/json: {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: ListTechnologies
      summary: List all Technologies
      description: List all Technologies
      parameters:
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TechnologyStatus"
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/all/databases:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchDatabases
      summary: Search a list of databases
      description: Get a list of databases filtered using various search terms and various params.
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  databases:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        type:
                          type: string
                        version:
                          type: string
                        hostname:
                          type: string
                        environment:
                          type: string
                        charset:
                          type: string
                        memory:
                          type: number
                        datafileSize:
                          type: number
                        segmentSize:
                          type: number
                      required:
                        - name
                        - type
                        - version
                        - hostname
                        - environment
                        - charset
                        - memory
                        - datafileSize
                        - segmentSize
                required:
                  - databases
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              {}
    parameters: []
  /hosts/technologies/oracle/databases:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchOracleDatabases
      summary: Search a list of databases
      description: Get a list of databases filtered using various search terms and various params. Can also generate a XLSX file
      parameters:
        - $ref: "#/components/parameters/search"
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/Database"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: full non paged
                    items:
                      $ref: "#/components/schemas/Database"
                  - type: object
                    description: not full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/Database"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: not full non paged
                    items:
                      $ref: "#/components/schemas/Database"
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/addms:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchOracleDatabaseAddms
      summary: Search a list of ADDMs
      description: Get a list of ADDMs filtered using various search terms and various params. Can also generate a XLSX file
      parameters:
        - $ref: "#/components/parameters/search"
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/ADDM"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: non paged
                    items:
                      $ref: "#/components/schemas/ADDM"
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/patch-list:
    get:
      summary: Get Oracle patch list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleDatabasePatch"
      operationId: GetOraclePatchList
  /hosts/technologies/oracle/databases/option-list:
    get:
      summary: Get Oracle option list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleDatabaseOption"
      operationId: GetOracleOptionList
  /hosts/technologies/oracle/databases/tablespaces:
    get:
      summary: Get Oracle tablespace list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleDatabaseTablespace"
      operationId: ListOracleDatabaseTablespace
  "/hosts/technologies/oracle/databases/change-list/{hostname}":
    get:
      summary: Get Oracle change list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
        - in: path
          name: hostname
          schema:
            type: string
          required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleDatabaseChange"
      operationId: GetOracleChanges
  "/hosts/technologies/oracle/databases/change-list/{hostname}/pdbs":
    get:
      summary: Get oracle PDB change list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
        - in: path
          name: hostname
          schema:
            type: string
          required: true
        - in: query
          name: start
          schema:
            type: string
          required: false
        - in: query
          name: end
          schema:
            type: string
          required: false
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OraclePdbChange"
      operationId: GetOraclePDBChanges
  /hosts/technologies/oracle/databases/pdbs:
    get:
      summary: Get Oracle pluggable databases list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleDatabasePdb"
      operationId: ListOracleDatabasePdbs
  /hosts/technologies/oracle/databases/schemas:
    get:
      summary: Get Oracle database schema list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleDatabaseSchema"
      operationId: ListOracleDatabaseSchemas
  /hosts/technologies/oracle/databases/backup-list:
    get:
      summary: Get Oracle backup list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleDatabaseBackup"
      operationId: GetOracleBackupList
  /hosts/technologies/oracle/databases/service-list:
    get:
      summary: Get Oracle service list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleDatabaseService"
      operationId: GetOracleServiceList
  
  "/hosts/{hostname}/technologies/oracle/databases/{dbname}/psql-migrabilities":
    parameters:
      - schema:
          type: string
        name: hostname
        in: path
        required: true
      - schema:
          type: string
        name: dbname
        in: path
        required: true
    get:
      operationId: GetOraclePsqlMigrabilities
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: 
                type: array
                items:
                  $ref: "#/components/schemas/PgsqlMigrability"

  "/hosts/{hostname}/technologies/oracle/databases/{dbname}/psql-migrabilities/semaphore":
    parameters:
      - schema:
          type: string
        name: hostname
        in: path
        required: true
      - schema:
          type: string
        name: dbname
        in: path
        required: true
    get:
      operationId: GetOraclePsqlMigrabilitiesSemaphore
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: 
                type: string

  /hosts/technologies/oracle/databases/partitionings:
    get:
      summary: Get Oracle database partitioning list
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleDatabasePartitioning"
      operationId: ListOracleDatabasePartitionings
  /hosts/locations:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: ListLocations
      summary: List users' locations
      description: List the users' locations
      parameters: []
      responses:
        "200":
          description: List of the locations
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                uniqueItems: true
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/environments:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: ListEnvironments
      summary: List the environments
      description: List the environments
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: List of the environments
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                uniqueItems: true
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /alerts:
    get:
      summary: search alerts
      description: This API fetches all alerts. The parameters in version 2.0 are not used since all filters are executed by the frontend.
      tags:
        - api-service
        - fe-user
      operationId: SearchAlerts
      parameters:
        - in: query
          name: mode
          description: output mode
          allowEmptyValue: true
          schema:
            type: string
            enum:
              - all
              - aggregated-code-severity
              - aggregated-category-severity
            readOnly: true
        - $ref: "#/components/parameters/search"
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
        - in: query
          schema:
            type: string
            enum:
              - WARNING
              - CRITICAL
              - INFO
          name: severity
          description: Filter by severity
          allowEmptyValue: true
        - in: query
          name: status
          required: false
          description: Filter by status
          allowEmptyValue: true
          schema:
            type: string
            readOnly: true
            enum:
              - NEW
              - ACK
              - DISMISSED
            example: NEW
        - in: query
          name: category
          required: false
          description: Filter by category
          allowEmptyValue: true
          schema:
            type: string
            readOnly: true
            enum:
              - AGENT
              - ENGINE
              - LICENSE
            example: ENGINE
        - in: query
          name: code
          required: false
          description: Filter by code
          allowEmptyValue: true
          schema:
            type: string
            readOnly: true
            enum:
              - NEW_SERVER
              - UNLISTED_RUNNING_DATABASE
              - MISSING_PRIMARY_DATABASE
              - MISSING_HOST_IN_ERCOLE
              - MISSING_HOST_IN_CMDB
              - AGENT_ERROR
              - DISMISSED_HOST
              - NO_DATA
              - NEW_DATABASE
              - NEW_LICENSE
              - NEW_OPTION
              - INCREASED_CPU_CORES
              - MISSING_DATABASE
            example: NEW_DATABASE
        - in: query
          name: description
          required: false
          description: Filter by description
          allowEmptyValue: true
          schema:
            type: string
            readOnly: true
            example: some text
        - in: query
          name: hostname
          required: false
          description: Filter by hostname
          allowEmptyValue: true
          schema:
            type: string
            readOnly: true
            example: hostname
        - in: query
          schema:
            type: string
            format: date-time
            example: "2020-05-05T08:23:40+00:00"
          name: from
          description: Filter from a date
          allowEmptyValue: true
        - in: query
          schema:
            type: string
            format: date-time
            example: "2021-05-05T08:23:40+00:00"
          name: to
          description: Filter until a date
          allowEmptyValue: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: "#/components/schemas/Alert"
                      count:
                        type: integer
                      pageSize:
                        type: integer
                      page:
                        type: integer
        "401":
          description: Unauthorized
        "422":
          description: Unprocessable Entity
        "500":
          description: Internal server error
  /alerts/ack:
    parameters: []
    post:
      summary: Acknowledge alerts
      description: Update status of specified alerts to set alert status to acknowledged.
      tags:
        - api-service
        - fe-user
      operationId: AckAlerts
      responses:
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/error"
        "401":
          $ref: "#/components/responses/error"
        "403":
          description: The API is disabled because the service is put in read-only mode
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
      requestBody:
        content:
          application/json:
            schema:
              description: ""
              type: object
              x-examples:
                example-1:
                  filter:
                    id: "000000000000000000000000"
                    alertCategory: ""
                    alertAffectedTechnology: ""
                    alertCode: ""
                    alertSeverity: ""
                    alertStatus: ""
                    description: ""
                    date: "0001-01-01T00:00:00Z"
                    otherInfo: {}
              properties:
                filter:
                  type: object
                  properties:
                    id:
                      minLength: 1
                      $ref: ""
                    alertCategory:
                      type: string
                    alertAffectedTechnology:
                      type: string
                    alertCode:
                      type: string
                    alertSeverity:
                      type: string
                    alertStatus:
                      type: string
                    description:
                      type: string
                    date:
                      type: string
                      minLength: 1
                    otherInfo:
                      type: object
                    ids:
                      type: array
                      items:
                        $ref: "#/components/schemas/ObjectID"
            examples:
              example:
                value:
                  filter:
                    ids:
                      - "000000000000000000000000"
                    alertCategory: AGENT
                    alertStatus: NEW
  /hosts/clusters:
    get:
      summary: Search a list of clusters
      tags:
        - api-service
        - fe-user
        - read
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      $ref: "#/components/schemas/Cluster"
                  - type: object
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/Cluster"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
            application/xml:
              schema:
                type: object
                properties: {}
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: object
                properties: {}
              examples: {}
      operationId: SearchClusters
      description: |-
        Search clusters data using the filters in the request.
        Return content type could be JSON or XLSX.
      parameters:
        - $ref: "#/components/parameters/search"
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
  /database/connection/status:
    get:
      summary: Get database connection status
      tags:
        - api-service
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  connected:
                    type: boolean
  "/hosts/clusters/{name}":
    get:
      summary: Get a cluster
      tags:
        - api-service
        - fe-user
        - read
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Cluster"
      operationId: GetCluster
      description: Get cluster data using the filters in the request.
      parameters:
        - $ref: "#/components/parameters/older-than"
        - in: path
          name: name
          schema:
            type: string
          required: true
          description: cluster name
  /hosts/count:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetHostsCountStats
      summary: Get the number of the hosts
      description: Get the number of the hosts
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: integer
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/environments/frequency:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetEnvironmentStats
      summary: Get the stats about the environments
      description: Get the stats about the environments
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    environment:
                      type: string
                    count:
                      type: integer
                  required:
                    - environment
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/types:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTypeStats
      summary: Get the stats about the types
      description: Get the stats about the types
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hardwareAbstractionTechnology:
                      type: string
                    count:
                      type: integer
                  required:
                    - hardwareAbstractionTechnology
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/operating-systems:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOperatingSystemStats
      summary: Get the stats about the operating systems
      description: Get the stats about the operating systems
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    operatingSystem:
                      type: string
                    count:
                      type: integer
                  required:
                    - operatingSystem
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/top-unused-instance-resource:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTopUnusedOracleDatabaseInstanceResourceStats
      summary: Get the stats about the top unused instance resource by databases work
      description: Get the stats about the top unused instance resource by databases work
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
        - $ref: "#/components/parameters/limit"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hostname:
                      type: string
                    unused:
                      type: number
                  required:
                    - hostname
                    - used
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/environments:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseEnvironmentStats
      summary: Get the stats about the environment of the databases
      description: Get the stats about the environment of the databases
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    environment:
                      type: string
                    count:
                      type: string
                  required:
                    - environment
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/high-reliability:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseHighReliabilityStats
      summary: Get the stats about the high reliability status of the databases
      description: Get the stats about the high reliability status of the databases
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    ha:
                      type: boolean
                    count:
                      type: string
                  required:
                    - ha
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/versions:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseVersionStats
      summary: Get the stats about the version of the databases
      description: Get the stats about the version of the databases
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    version:
                      type: string
                    count:
                      type: string
                  required:
                    - version
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/top-reclaimable:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTopReclaimableOracleDatabaseStats
      summary: Get the list of top databases by reclaimable segment advisors
      description: Get the list of top databases by reclaimable segment advisors
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
        - $ref: "#/components/parameters/limit"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hostname:
                      type: string
                    dbname:
                      type: string
                    reclaimableSegmentAdvisors:
                      type: number
                  required:
                    - hostname
                    - dbname
                    - reclaimableSegmentAdvisors
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/patch-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabasePatchStatusStats
      summary: Get the statistics about the patch status of the databases
      description: Get the statistics about the patch status of the databases
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
        - $ref: "#/components/parameters/window-time"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    status:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - status
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/top-workload:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTopWorkloadOracleDatabaseStats
      summary: Get the list of top databases by workload
      description: Get the list of top databases by workload
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
        - $ref: "#/components/parameters/limit"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hostname:
                      type: string
                    dbname:
                      type: string
                    workload:
                      type: number
                  required:
                    - hostname
                    - dbname
                    - workload
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/dataguard-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseDataguardStatusStats
      summary: Get the statistics about the dataguard status of the databases
      description: Get the statistics about the dataguard status of the databases
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    dataguard:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - dataguard
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/archivelog-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseArchivelogStatusStats
      summary: Get the statistics about the archive log status of the databases
      description: Get the statistics about the archive log status of the databases
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    archiveLog:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - archiveLog
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/rac-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseRACStatusStats
      summary: Get the statistics about the RAC status of the databases
      description: Get the statistics about the RAC status of the databases
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    rac:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - rac
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/statistics:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabasesStatistics
      summary: Get statistics about Oracle databases
      description: Get statistics about Oracle databases
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            text/plain:
              schema:
                description: ""
                type: object
                properties:
                  total-memory-size:
                    type: number
                  total-segments-size:
                    type: number
                  total-datafile-size:
                    type: number
                  total-work:
                    type: number
                required:
                  - total-memory-size
                  - total-segments-size
                  - total-datafile-size
                  - total-work
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/consumed-licenses:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchOracleDatabaseUsedLicenses
      summary: Get consumed licenses
      description: Get the licenses consumed by the hosts
      parameters:
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      type: object
                      properties:
                        dbName:
                          type: string
                        hostname:
                          type: string
                        licenseTypeID:
                          type: string
                        usedLicenses:
                          type: integer
                        ignored:
                          type: boolean
                  - type: object
                    properties:
                      content:
                        type: array
                        items: {}
                      metadata:
                        type: object
                        properties:
                          empty:
                            type: boolean
                          first:
                            type: boolean
                          last:
                            type: boolean
                          number:
                            type: integer
                          size:
                            type: integer
                          totalElements:
                            type: integer
                          totalPage:
                            type: integer
              examples:
                Without pagination:
                  value:
                    - dbName: ERCSOL19
                      hostname: ercsoldbx
                      licenseTypeID: A90611
                      usedLicenses: 2
                      ignored: false
                    - dbName: ERCSOL19
                      hostname: ercsoldbx
                      licenseTypeID: A90650
                      usedLicenses: 8
                      ignored: false
                With pagination:
                  value:
                    content:
                      - dbName: allstate-9a6a2a820a3f61aeb345a834abf40fba
                        hostname: publicitate-36d06ca83eafa454423d2097f4965517
                        licenseTypeID: A90611
                        usedLicenses: 4
                        ignored: false
                      - dbName: allstate-9a6a2a820a3f61aeb345a834abf40fba
                        hostname: publicitate-36d06ca83eafa454423d2097f4965517
                        licenseTypeID: A90649
                        usedLicenses: 4
                        ignored: false
                      - dbName: 4wcqjn-ecf040bdfab7695ab332aef7401f185c
                        hostname: publicitate-36d06ca83eafa454423d2097f4965517
                        licenseTypeID: A90611
                        usedLicenses: 4
                        ignored: false
                      - dbName: 4wcqjn-ecf040bdfab7695ab332aef7401f185c
                        hostname: publicitate-36d06ca83eafa454423d2097f4965517
                        licenseTypeID: A90649
                        usedLicenses: 4
                        ignored: false
                      - dbName: ERCOLE
                        hostname: test-db
                        licenseTypeID: A90611
                        usedLicenses: 0.5
                        ignored: false
                    metadata:
                      empty: false
                      first: false
                      last: false
                      number: 2
                      size: 5
                      totalElements: 20
                      totalPages: 4
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/licenses-compliance:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleDatabaseLicensesCompliance
      summary: Get list of licenses with usage and compliance
      description: Get list of licenses with usage and compliance
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                description: ""
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - licenseTypeID
                    - itemDescription
                    - metric
                    - consumed
                    - covered
                    - compliance
                    - unlimited
                    - available
                  properties:
                    licenseTypeID:
                      type: string
                      minLength: 1
                    itemDescription:
                      type: string
                      minLength: 1
                    metric:
                      type: string
                      minLength: 1
                    consumed:
                      type: number
                    covered:
                      type: number
                    compliance:
                      type: number
                    unlimited:
                      type: boolean
              examples:
                Example:
                  value:
                    - licenseTypeID: PID001
                      itemDescription: Oracle Database Enterprise Edition
                      metric: Processor Perpetual
                      consumed: 3
                      covered: 3
                      compliance: 1
                      unlimited: false
                      available: 200
                    - licenseTypeID: PID002
                      itemDescription: Oracle Database Enterprise Edition
                      metric: Processor Perpetual
                      consumed: 10
                      covered: 5
                      compliance: 0.5
                      unlimited: false
                      available: 600
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /exadata:
    get:
      tags:
        - api-service
      operationId: ListExadata
      summary: List all exadata
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExadataInstance"

  "/exadata/{rackID}/components/{hostID}/vms/{name}":
    post:
      parameters:
        - schema:
            type: string
          in: path
          name: rackID
          required: true
        - schema:
            type: string
          in: path
          name: hostID
          required: true
        - schema:
            type: string
          in: path
          name: name
          required: true
      tags:
        - api-service
      operationId: UpdateExadataVmClusterName
      summary: Update cluster name on vm
      responses:
        "204":
          description: No content
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                  clusterNames:
                    type: array
                    items:
                      type: string

  "/exadata/{rackID}/components/{hostID}":
    post:
      parameters:
        - schema:
            type: string
          in: path
          name: rackID
          required: true
        - schema:
            type: string
          in: path
          name: hostID
          required: true
      tags:
        - api-service
      operationId: UpdateExadataStorageClusterName
      summary: Update cluster name on storage
      responses:
        "204":
          description: No content
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                  clusterNames:
                    type: array
                    items:
                      type: string

  "/exadata/{rackID}/rdma":
    post:
      parameters:
        - schema:
            type: string
          in: path
          name: rackID
          required: true
      tags:
        - api-service
      operationId: UpdateExadataRdma
      summary: Update rdma on exadata
      responses:
        "204":
          description: No content
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                  switchName:
                    type: string
                  model:
                    type: string
                  swVersion: 
                    type: string

  /hosts/technologies/oracle/exadata/total-memory-size:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTotalOracleExadataMemorySizeStats
      summary: Get the total size of the memory of the exadata
      description: Get the total size of the memory of the exadata
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            text/plain:
              schema:
                type: number
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/exadata/total-cpu:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetTotalOracleExadataCPUStats
      summary: Get the total cpu of the exadata
      description: Get the total cpu of the exadata
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: object
                required:
                  - running
                  - total
                properties:
                  running:
                    type: number
                  total:
                    type: number
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/exadata/average-storage-usage:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetAverageOracleExadataStorageUsageStats
      summary: Get the average usage of the storage of the exadata
      description: Get the average usage of the storage of the exadata
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            text/plain:
              schema:
                type: number
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/exadata/storage-error-count-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleExadataStorageErrorCountStatusStats
      summary: Get the statistics about the ErrorCount status of the storage of the exadata
      description: Get the statistics about the ErrorCount status of the storage of the  exadata
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    failing:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - failing
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/exadata/patch-status:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetOracleExadataPatchStatusStats
      summary: Get the statistics about the patch status of the exadata
      description: Get the statistics about the patch status of the exadata
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    status:
                      type: boolean
                    count:
                      type: integer
                  required:
                    - status
                    - count
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/oracle/databases/segment-advisors:
    get:
      parameters:
        - in: query
          name: full
          description: output mode
          allowEmptyValue: true
          schema:
            type: boolean
            readOnly: true
        - $ref: "#/components/parameters/search"
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items:
                      $ref: "#/components/schemas/SegmentAdvisor"
                  - type: object
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/SegmentAdvisor"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: object
                properties: {}
              examples: {}
      operationId: SearchOracleDatabaseSegmentAdvisors
      description: Search segment advisors data using the filters in the request
      summary: Search a list of segment advisors
      tags:
        - api-service
        - fe-user
        - read
  /hosts/technologies/oracle/databases/patch-advisors:
    get:
      parameters:
        - $ref: "#/components/parameters/search"
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
        - $ref: "#/components/parameters/window-time"
        - schema:
            type: string
            enum:
              - OK
              - KO
          in: query
          name: status
          description: Filter by status
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/PatchAdvisorInfo"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: object
                description: XLSX file
              examples: {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
      operationId: SearchOracleDatabasePatchAdvisors
      description: Search patch advisors data using the filters in the request
      summary: Search a list of patch advisors
      tags:
        - api-service
        - fe-user
        - read
  /settings/default-database-tag-choices:
    get:
      operationId: GetDefaultDatabaseTags
      description: Return the default list of database tags from configuration
      summary: Return the default list of database tags from configuration
      tags:
        - api-service
        - fe-user
        - read
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
  /settings/features:
    get:
      operationId: GetFeatures
      description: Return a map of active/inactive ercole features
      summary: Return a map of active/inactive ercole features
      tags:
        - api-service
        - fe-user
        - read
      responses:
        "200":
          description: OK
          headers: {}
          content:
            "application/json:":
              schema:
                $ref: "#/components/schemas/Features"
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /settings/technologies:
    get:
      operationId: GetTechnologyList
      description: Return a list of technology
      summary: Return a list of technology
      tags:
        - api-service
        - fe-user
        - read
      responses:
        "200":
          description: OK
          headers: {}
          content:
            "application/json:":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TechnologyInfo"
  /frontend/dashboard:
    get:
      operationId: GetInfoForFrontendDashboard
      description: Return the information required by ercole-web dashboard page
      summary: Return the information required by ercole-web dashboard page
      tags:
        - api-service
        - fe-user
        - read
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  features:
                    $ref: "#/components/schemas/Features"
                  technologies:
                    type: object
                    description: Supported technologies
                    required:
                      - technologies
                      - total
                    properties:
                      technologies:
                        type: array
                        description: All supported technologies that can be monitored by Ercole.
                        items:
                          $ref: "#/components/schemas/TechnologyStatus"
                      total:
                        $ref: "#/components/schemas/AllTechnologyComplianceStatus"
                required:
                  - features
                  - technologies
              examples:
                example-1:
                  value:
                    features:
                      Oracle/Database: true
                      Oracle/Exadata: true
                    technologies:
                      technologies:
                        - product: Oracle/Exadata
                          compliance: 1
                          unpaidDues: 0
                          hostsCount: 2
                        - product: Oracle/Database
                          compliance: 0
                          unpaidDues: 0
                          hostsCount: 6
                      total:
                        compliance: 0.07142857142857142
                        hostsCount: 14
                        unpaidDues: 0
        "201":
          description: Created
        "400":
          description: Bad Request
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /settings/technologies-metrics:
    get:
      operationId: GetTechnologiesMetrics
      description: Return a list of metrics for each technology
      summary: Return a list of metrics for each technology
      tags:
        - chart-service
        - fe-user
        - read
      responses:
        "200":
          description: OK
          headers: {}
          content:
            "application/json:":
              schema:
                type: object
                additionalProperties:
                  type: object
                  required:
                    - product
                    - metrics
                  properties:
                    product:
                      type: string
                    metrics:
                      type: array
                      items:
                        type: string
                      uniqueItems: true
  /technologies/oracle/database:
    get:
      tags:
        - chart-service
        - fe-user
        - read
      operationId: GetOracleDatabaseChart
      summary: Get the chart data about oracle databases using various metric
      description: Get the stats about the environment of the databases
      parameters:
        - in: query
          name: metric
          schema:
            type: string
            enum:
              - work
              - version
          required: true
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          $ref: "#/components/schemas/Chart"
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /technologies/changes:
    get:
      tags:
        - chart-service
        - fe-user
        - read
      operationId: GetChangeChart
      summary: Get the chart data about the changes of technologies
      description: Get the chart data about the changes of technologies
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          $ref: "#/components/schemas/ChangeChart"
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /technologies/types:
    get:
      tags:
        - chart-service
        - fe-user
        - read
      operationId: GetTechnologyTypesChart
      summary: Get the chart data about the types of technologies
      description: Get the chart data about the types of technologies
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          $ref: "#/components/schemas/TechnologyTypesChart"
        "401":
          description: Token is invalid / it is not present
        "422":
          description: Invalid parameters / null path/body
        "500":
          description: Generic error
  /contracts/oracle/database:
    get:
      summary: Search Oracle database contracts
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  contracts:
                    type: array
                    items:
                      properties:
                        id:
                          type: string
                        contractID:
                          type: string
                        csi:
                          type: string
                        licenseTypeID:
                          type: string
                        itemDescription:
                          type: string
                        metric:
                          type: string
                        referenceNumber:
                          type: string
                        unlimited:
                          type: boolean
                          description: Indicates that the contract has unlimited part or no
                        licensesPerCore:
                          type: number
                        licensesPerUser:
                          type: number
                        availableCount:
                          type: number
                        basket:
                          type: boolean
                        restricted:
                          type: boolean
                        supportExpiration:
                          type: string
                        hosts:
                          type: array
                          description: |
                            Contains the list of (manually) associated hosts
                          items:
                            required:
                              - hostname
                              - coveredLicensesCount
                              - totalCoveredLicensesCount
                              - consumedLicensesCount
                            properties:
                              hostname:
                                type: string
                              consumedLicensesCount:
                                type: number
                              coveredLicensesCount:
                                type: number
                              totalCoveredLicensesCount:
                                type: number
                required:
                  - contracts
              examples:
                example-1:
                  value:
                    - id: 5f6a118067d1127af38db239
                      contractID: "111"
                      licenseTypeID: L10001
                      itemDescription: Oracle Database Enterprise Edition
                      metrics: Named User Plus Perpetual
                      csi: ""
                      referenceNumber: "444"
                      unlimited: false
                      licensesPerCore: 0
                      licensesPerUser: 42
                      availableCount: -2
                      basket: false
                      hosts:
                        - hostname: ercsoldbx
                          coveredLicensesCount: 0
                          totalCoveredLicensesCount: 0
                          consumedLicensesCount: 2
                    - id: 5f6a118267d1127af38db23a
                      contractID: "222"
                      licenseTypeID: L10001
                      itemDescription: Oracle Database Enterprise Edition
                      metrics: Named User Plus Perpetual
                      csi: ""
                      referenceNumber: "444"
                      unlimited: false
                      licensesPerCore: 0
                      licensesPerUser: 42
                      availableCount: -2
                      basket: false
                      restricted: false
                      supportExpiration: "2020-05-05T08:23:40+00:00"
                      hosts:
                        - hostname: ercsoldbx
                          coveredLicensesCount: 0
                          totalCoveredLicensesCount: 0
                          consumedLicensesCount: 2
      operationId: GetOracleDatabaseContracts
      parameters:
        - schema:
            type: string
          in: query
          name: contract-id
          description: |
            contains
        - schema:
            type: string
          in: query
          name: license-type-id
          description: |
            contains
        - schema:
            type: string
          in: query
          name: item-description
          description: |
            contains
        - schema:
            type: string
          in: query
          name: csi
          description: |
            contains
        - schema:
            type: string
          in: query
          name: metrics
          description: equal to
        - schema:
            type: string
          in: query
          name: reference-number
          description: ""
        - schema:
            type: string
          in: query
          name: unlimited
          description: ""
        - schema:
            type: string
          in: query
          name: basket
          description: ""
        - schema:
            type: number
          in: query
          name: licenses-per-core-lte
          description: ""
        - schema:
            type: number
          in: query
          name: licenses-per-core-gte
          description: ""
        - schema:
            type: number
          in: query
          name: licenses-per-user-lte
          description: ""
        - schema:
            type: number
          in: query
          name: licenses-per-user-gte
          description: ""
        - schema:
            type: number
          in: query
          name: available-licenses-per-core-lte
          description: ""
        - schema:
            type: number
          in: query
          name: available-licenses-per-core-gte
          description: ""
        - schema:
            type: number
          in: query
          name: available-licenses-per-user-lte
          description: ""
        - schema:
            type: number
          in: query
          name: available-licenses-per-user-gte
          description: ""
      description: Retun oracle database contracts by query parameters filters
    parameters: []
    post:
      tags:
        - api-service
      summary: Add Oracle database contracts
      operationId: AddOracleDatabaseContract
      responses:
        "200":
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                contractID:
                  type: string
                csi:
                  type: string
                licenseTypeID:
                  type: string
                referenceNumber:
                  type: string
                unlimited:
                  type: boolean
                count:
                  type: integer
                hosts:
                  type: array
                  items:
                    type: string
                basket:
                  type: boolean
                restricted:
                  type: boolean
                supportExpiration:
                  type: string
            examples:
              example-1:
                value:
                  contractID: "111"
                  csi: pippo
                  licenseTypeID: "L10001"
                  referenceNumber: "444"
                  unlimited: false
                  count: 42
                  hosts:
                    - ercsoldbx
                  basket: false
      description: Add Oracle database contract
    put:
      summary: Update Oracle Database Contract
      operationId: UpdateOracleDatabaseContract
      responses:
        "200":
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                contractID:
                  type: string
                csi:
                  type: string
                licenseTypeID:
                  type: string
                referenceNumber:
                  type: string
                unlimited:
                  type: boolean
                count:
                  type: integer
                hosts:
                  type: array
                  items:
                    type: string
                basket:
                  type: boolean
                restricted:
                  type: boolean
                supportExpiration:
                  type: string
                id:
                  type: string
            examples:
              example-1:
                value:
                  id: 5f6a118067d1127af38db239
                  contractID: "111"
                  csi: pippo
                  licenseTypeID: L10001
                  referenceNumber: "444"
                  unlimited: false
                  count: 42
                  hosts:
                    - ercsoldbx
                  basket: false
      description: Update Oracle database contract
      tags:
        - api-service
  "/contracts/oracle/database/{id}":
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    delete:
      summary: Delete Oracle database contracts
      operationId: DeleteOracleDatabaseContract
      responses:
        "200":
          description: OK
      description: Remove Oracle database contracts by ID
      parameters: []
      tags:
        - api-service
  "/hosts/{hostname}/technologies/oracle/databases/{dbname}/can-migrate":
    parameters:
      - schema:
          type: string
        name: hostname
        in: path
        required: true
      - schema:
          type: string
        name: dbname
        in: path
        required: true
    get:
      operationId: CanMigrateLicense
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  Canbemigrate:
                    type: boolean
            
  /contracts/microsoft/database:
    get:
      summary: Search Microsoft database contracts
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  contracts:
                    type: array
                    items:
                      $ref: "#/components/schemas/SqlServerDatabaseContract"
                required:
                  - contracts
      operationId: GetSqlServerDatabaseContracts
    post:
      tags:
        - api-service
      summary: Add Microsoft database contracts
      operationId: AddSqlServerDatabaseContract
      responses:
        "200":
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              $ref: "#/components/schemas/SqlServerDatabaseContract"
      description: Add Microsoft database contract
    put:
      summary: Update Microsoft Database Contract
      operationId: UpdateSqlServerDatabaseContract
      responses:
        "200":
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              $ref: "#/components/schemas/SqlServerDatabaseContract"
      description: Update Microsoft database contract
      tags:
        - api-service
  "/contracts/microsoft/database/{id}":
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    delete:
      summary: Delete Microsoft database contracts
      operationId: DeleteSqlServerDatabaseContract
      responses:
        "200":
          description: OK
      description: Remove Microsoft database contracts by ID
      parameters: []
      tags:
        - api-service
  /settings/oracle/database/license-types:
    get:
      summary: Return license-types
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  license-types:
                    $ref: "#/components/schemas/LicenseType"
      operationId: GetOracleDatabaseLicenseTypes
      description: Get Oracle database contract parts list
    post:
      tags:
        - api-service
      summary: Add Oracle database license type
      operationId: AddOracleDatabaseLicenseType
      responses:
        "200":
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                itemDescription:
                  type: string
                metric:
                  type: string
                cost:
                  type: number
                aliases:
                  type: array
                  items:
                    type: string
                option:
                  type: boolean
            examples:
              example-1:
                value:
                  id: Test
                  itemDescription: Oracle Database Enterprise Edition
                  metric: Processor Perpetual
                  cost: 500
                  aliases:
                    - Tuning Pack
                  option: false
      description: Add Oracle database license type
  /settings/microsoft/database/license-types:
    get:
      summary: Return Sql Server license-types
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  license-types:
                    $ref: "#/components/schemas/SqlServerLicenseType"
      operationId: GetSqlServerDatabaseLicenseTypes
      description: Get SqlServer database contract parts list
  /settings/mysql/database/license-types:
    get:
      summary: Return MySql license-types
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  license-types:
                    $ref: "#/components/schemas/MySqlLicenseType"
      operationId: GetMySqlLicenseTypes
      description: Get MySql database contract parts list
  "/settings/oracle/database/license-types/{id}":
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    delete:
      summary: Delete Oracle database license type
      operationId: DeleteOracleDatabaseLicenseType
      responses:
        "200":
          description: OK
      description: Remove Oracle database license type by ID
      parameters: []
      tags:
        - api-service
    put:
      summary: Update Oracle Database License Type
      operationId: UpdateOracleDatabaseLicenseType
      responses:
        "200":
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                itemDescription:
                  type: string
                metric:
                  type: string
                cost:
                  type: number
                aliases:
                  type: array
                  items:
                    type: string
                option:
                  type: boolean
            examples:
              example-1:
                value:
                  id: Test
                  itemDescription: Oracle Secure Backup
                  metric: Processor Perpetual
                  cost: 500
                  aliases:
                    - Tuning Pack
                  option: false
      description: Update Oracle license type
      tags:
        - api-service
  /technologies/all/license-history:
    get:
      summary: Get historical values of Oracle Databases Licenses
      tags:
        - chart-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: ""
                uniqueItems: false
                items:
                  type: object
                  properties:
                    licenseTypeID:
                      type: string
                      minLength: 1
                    itemDescription:
                      type: string
                    metric:
                      type: string
                    history:
                      type: array
                      uniqueItems: false
                      items:
                        type: object
                        properties:
                          date:
                            type: string
                            minLength: 1
                          consumed:
                            type: number
                          covered:
                            type: number
                          purchased:
                            type: number
                        required:
                          - date
                          - consumed
                          - covered
                          - purchased
                  required:
                    - licenseTypeID
                    - itemDescription
                    - metric
                    - history
      operationId: GetLicenseComplianceHistory
      description: Get historical values of Oracle Databases Licenses
  /hosts/cores:
    get:
      tags:
        - chart-service
      operationId: GetHostCores
      summary: Get the cores about hosts
      description: Get cores values of the hosts
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
        - $ref: "#/components/parameters/newer-than"
      responses:
        "200":
          $ref: "#/components/schemas/Chart"
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/mysql/databases:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchMySQLDatabases
      summary: Search a list of MySQL databases instances
      description: Search a list of MySQL databases instances
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  databases:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      required:
                        - hostname
                        - location
                        - environment
                        - name
                        - version
                        - edition
                        - platform
                        - architecture
                        - engine
                        - redoLogEnabled
                        - charsetServer
                        - charsetSystem
                        - pageSize
                        - threadsConcurrency
                        - bufferPoolSize
                        - logBufferSize
                        - sortBufferSize
                        - readOnly
                      properties:
                        hostname:
                          type: string
                        location:
                          type: string
                        environment:
                          type: string
                        name:
                          type: string
                        version:
                          type: string
                        edition:
                          type: string
                        platform:
                          type: string
                        architecture:
                          type: string
                        engine:
                          type: string
                        redoLogEnabled:
                          type: string
                        charsetServer:
                          type: string
                        charsetSystem:
                          type: string
                        pageSize:
                          type: number
                        threadsConcurrency:
                          type: number
                        bufferPoolSize:
                          type: number
                        logBufferSize:
                          type: number
                        sortBufferSize:
                          type: number
                        readOnly:
                          type: boolean
                        databases:
                          type: array
                          uniqueItems: true
                          items:
                            required:
                              - name
                              - charset
                              - collation
                              - encrypted
                            properties:
                              name:
                                type: string
                              charset:
                                type: string
                              collation:
                                type: string
                              encrypted:
                                type: boolean
                        tableSchemas:
                          type: array
                          uniqueItems: true
                          items:
                            required:
                              - name
                              - engine
                              - allocation
                            properties:
                              name:
                                type: string
                              engine:
                                type: string
                              allocation:
                                type: number
                        segmentAdvisors:
                          type: array
                          uniqueItems: true
                          items:
                            required:
                              - tableSchema
                              - tableName
                              - engine
                              - allocation
                              - data
                              - index
                              - free
                            properties:
                              tableSchema:
                                type: string
                              tableName:
                                type: string
                              engine:
                                type: string
                              allocation:
                                type: number
                              data:
                                type: number
                              index:
                                type: number
                              free:
                                type: number
                required:
                  - databases
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              {}
    parameters: []
  /hosts/technologies/microsoft/databases:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchSqlServerInstances
      summary: Search a list of SQL Server instances
      description: Get a list of instances filtered using various search terms and various params. Can also generate a XLSX file
      parameters:
        - $ref: "#/components/parameters/search"
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/SqlServerInstance"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: full non paged
                    items:
                      $ref: "#/components/schemas/SqlServerInstance"
                  - type: object
                    description: not full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/SqlServerInstance"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: not full non paged
                    items:
                      $ref: "#/components/schemas/SqlServerInstance"
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/postgresql/databases:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchPostgreSqlInstances
      summary: Search a list of PostgreSQL instances
      description: Get a list of instances filtered using various search terms and various params. Can also generate a XLSX file
      parameters:
        - $ref: "#/components/parameters/search"
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/PostgreSqlInstance"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: full non paged
                    items:
                      $ref: "#/components/schemas/PostgreSqlInstance"
                  - type: object
                    description: not full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/PostgreSqlInstance"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: not full non paged
                    items:
                      $ref: "#/components/schemas/PostgreSqlInstance"
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/mongodb/databases:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: SearchMongoDBInstances
      summary: Search a list of MongoDB instances
      description: Get a list of instances filtered using various search terms and various params. Can also generate a XLSX file
      parameters:
        - $ref: "#/components/parameters/search"
        - $ref: "#/components/parameters/sort-by"
        - $ref: "#/components/parameters/sort-desc"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/size"
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: Result of the search
          content:
            application/json:
              schema:
                oneOf:
                  - type: object
                    description: full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/MongoDBInstance"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: full non paged
                    items:
                      $ref: "#/components/schemas/MongoDBInstance"
                  - type: object
                    description: not full paged
                    properties:
                      content:
                        type: array
                        items:
                          $ref: "#/components/schemas/MongoDBInstance"
                      metadata:
                        $ref: "#/components/schemas/PageMetadata"
                    required:
                      - content
                      - metadata
                  - type: array
                    description: not full non paged
                    items:
                      $ref: "#/components/schemas/MongoDBInstance"
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              {}
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  /hosts/technologies/all/databases/statistics:
    get:
      tags:
        - api-service
        - fe-user
        - read
      operationId: GetDatabasesStatistics
      summary: Get statistics about all databases
      description: Get statistics about all databases
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: statistics
          content:
            text/plain:
              schema:
                description: ""
                type: object
                properties:
                  total-memory-size:
                    type: number
                    description: size in bytes
                  total-segments-size:
                    type: number
                    description: size in bytes
                required:
                  - total-memory-size
                  - total-segments-size
        "401":
          $ref: "#/components/responses/error"
        "422":
          $ref: "#/components/responses/error"
        "500":
          $ref: "#/components/responses/error"
  "/contracts/mysql/database/{id}":
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    put:
      summary: Update MySQL Contract
      operationId: UpdateMySQLContract
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MySQLContract"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MySQLContract"
        description: ""
      description: ""
      tags:
        - api-service
    delete:
      summary: Delete MySQL Contract
      operationId: DeleteMySQLContract
      responses:
        "204":
          description: No Content
  /contracts/mysql/database:
    parameters: []
    get:
      summary: Get MySQL Contracts
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  contracts:
                    type: array
                    items:
                      properties:
                        id:
                          type: string
                        type:
                          type: string
                        contractID:
                          type: string
                        csi:
                          type: string
                        numberOfLicenses:
                          type: number
                        supportExpiration:
                          type: string
                        clusters:
                          type: array
                          items:
                            type: string
                        hosts:
                          type: array
                          items:
                            type: string
                required:
                  - contracts
      operationId: GetMySQLContracts
    post:
      summary: Add MySQL Contract
      operationId: AddMySQLContract
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MySQLContract"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MySQLContract"
  /hosts/technologies/all/databases/licenses-used:
    get:
      summary: Get Databases Used Licenses
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  usedLicenses:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      type: object
                      properties:
                        hostname:
                          type: string
                          minLength: 1
                        dbname:
                          type: string
                          minLength: 1
                        clusterName:
                          type: string
                          minLength: 1
                        clusterType:
                          type: string
                          minLength: 1
                        licenseTypeID:
                          type: string
                          minLength: 1
                        description:
                          type: string
                          minLength: 1
                        metric:
                          type: string
                          minLength: 1
                        usedLicenses:
                          type: number
                        clusterLicenses:
                          type: number
                        ignored:
                          type: boolean
                        ignoredComment:
                          type: string
                        olvmCapped:
                          type: boolean
                      required:
                        - hostname
                        - licenseTypeID
                        - description
                        - metric
                        - usedLicenses
                required:
                  - usedLicenses
      operationId: GetUsedLicensesPerDatabases
      parameters:
        - schema:
            type: string
          in: query
          name: location
        - schema:
            type: string
          in: query
          name: environment
        - schema:
            type: string
          in: query
          name: older-than
  "/hosts/{hostname}/technologies/all/databases/licenses-used":
    get:
      summary: Get Databases Used Licenses per hostname
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LicenseUsed"
      operationId: GetUsedLicensesPerDatabasesByHost
      parameters:
        - schema:
            type: string
          name: hostname
          in: path
          required: true
        - schema:
            type: string
          in: query
          name: location
        - schema:
            type: string
          in: query
          name: environment
        - schema:
            type: string
          in: query
          name: older-than
  "/hosts/technologies/all/databases/grant-dba":
    get:
      summary: Get Databases Grant Dba
      tags:
        - api-service
      parameters:
        - $ref: "#/components/parameters/location"
        - $ref: "#/components/parameters/environment"
        - $ref: "#/components/parameters/older-than"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/OracleGrantDba"
      operationId: ListOracleGrantDbaByHostname
  /hosts/technologies/all/databases/licenses-used-per-cluster:
    get:
      summary: Get Databases Used Licenses Per Cluster
      tags: []
      operationId: GetUsedLicensesPerCluster
      parameters:
        - schema:
            type: string
          in: query
          name: location
        - schema:
            type: string
          in: query
          name: environment
        - schema:
            type: string
          in: query
          name: older-than
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  usedLicensesPerCluster:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      type: object
                      properties:
                        cluster:
                          type: string
                          minLength: 1
                        hostnames:
                          type: array
                          items:
                            type: string
                        licenseTypeID:
                          type: string
                          minLength: 1
                        description:
                          type: string
                          minLength: 1
                        metric:
                          type: string
                          minLength: 1
                        usedLicenses:
                          type: number
                      required:
                        - cluster
                        - licenseTypeID
                        - description
                        - metric
                        - usedLicenses
                required:
                  - usedLicensesPerCluster
              examples: {}
  /hosts/technologies/all/databases/licenses-used-per-host:
    get:
      summary: Get Databases Used Licenses Per Host
      tags: []
      operationId: GetUsedLicensesPerHost
      parameters:
        - schema:
            type: string
          in: query
          name: location
        - schema:
            type: string
          in: query
          name: environment
        - schema:
            type: string
          in: query
          name: older-than
      responses:
        "200":
          description: ""
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: object
                properties: {}
              examples: {}
        "401":
          description: Unauthorized
        "422":
          description: Unprocessable Entity
        "500":
          description: Internal server error
  /hosts/technologies/all/databases/licenses-compliance:
    get:
      summary: Get Database Licenses Compliance
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  licensesCompliance:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      required:
                        - licenseTypeID
                        - itemDescription
                        - metric
                        - consumed
                        - covered
                        - purchased
                        - compliance
                        - unlimited
                      properties:
                        licenseTypeID:
                          type: string
                          minLength: 1
                        itemDescription:
                          type: string
                          minLength: 1
                        metric:
                          type: string
                          minLength: 1
                        consumed:
                          type: number
                        covered:
                          type: number
                        purchased:
                          type: number
                        compliance:
                          type: number
                        unlimited:
                          type: boolean
                required:
                  - licensesCompliance
      operationId: GetDatabaseLicensesCompliance
      description: Get list of licenses with usage and compliance
  /cmdbs:
    post:
      summary: ""
      operationId: CompareCmdbInfo
      responses:
        "204":
          description: No Content
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                hostnames:
                  type: array
                  items:
                    type: string
            examples: {}
      tags:
        - data-service
  /exadatas:
    post:
      description: "Save exadata"
      operationId: InsertExadata
      responses:
        202:
          description: "Accepted"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExadataInstance"
      tags:
        - data-service
  "/oracle-cloud/recommendations/{ids}":
    parameters:
      - schema:
          type: string
        name: ids
        in: path
        required: true
        description: Comma separated list of profileId
    get:
      summary: Retrieve Oracle Cloud Recommendation
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                x-examples:
                  example-1:
                    error: "1 error occurred:\n\t* C:/Workspace/GitHub/ercole/thunder-service/service/oci_recommendations.go:47 : 'encoding/hex: invalid byte: U+0020 ' ' - invalid profileId \" pippo\"'\n\n\n"
                    recommendations:
                      - tenancyOCID: ocid1.tenancy.oc1..aaaaaaaazizzbqqbjv2se3y3fvm5osfumnorh32nznanirqoju3uks4buh4q
                        name: cost-management-load-balancer-underutilized-name
                        numPending: "1"
                        estimatedCostSaving: "1.85"
                        status: PENDING
                        importance: MODERATE
                        recommendationId: ocid1.optimizerrecommendation.oc1..aaaaaaaanptucivsbo24dkml7exd2fldalykkz52gld3nk3jt5c2e4ydgzjq
                      - tenancyOCID: ocid1.tenancy.oc1..aaaaaaaazizzbqqbjv2se3y3fvm5osfumnorh32nznanirqoju3uks4buh4q
                        name: cost-management-boot-volume-attachment-name
                        numPending: "2"
                        estimatedCostSaving: "1.56"
                        status: PENDING
                        importance: MODERATE
                        recommendationId: ocid1.optimizerrecommendation.oc1..aaaaaaaadtjdkfx7efwea7czmq5apuyr3oholubrjn5k4udaoka6ftf7m65a
                      - tenancyOCID: ocid1.tenancy.oc1..aaaaaaaazizzbqqbjv2se3y3fvm5osfumnorh32nznanirqoju3uks4buh4q
                        name: cost-management-compute-host-terminated-name
                        numPending: "1"
                        estimatedCostSaving: "14.18"
                        status: PENDING
                        importance: CRITICAL
                        recommendationId: ocid1.optimizerrecommendation.oc1..aaaaaaaaw3kvofgg5j4hcswcjdmqryu4rgzwp2ocsput6akakr6vxyyokxnq
                      - tenancyOCID: ocid1.tenancy.oc1..aaaaaaaazizzbqqbjv2se3y3fvm5osfumnorh32nznanirqoju3uks4buh4q
                        name: cost-management-autonomous-database-underutilized-name
                        numPending: "0"
                        estimatedCostSaving: "0.00"
                        status: PENDING
                        importance: MODERATE
                        recommendationId: ocid1.optimizerrecommendation.oc1..aaaaaaaapduyytcacqxvn24xryrce7b3nuxbtulmqbmir47lx3i3rx7x3viq
                      - tenancyOCID: ocid1.tenancy.oc1..aaaaaaaazizzbqqbjv2se3y3fvm5osfumnorh32nznanirqoju3uks4buh4q
                        name: cost-management-block-volume-attachment-name
                        numPending: "8"
                        estimatedCostSaving: "11.42"
                        status: PENDING
                        importance: MODERATE
                        recommendationId: ocid1.optimizerrecommendation.oc1..aaaaaaaa6lifbdmtt55q5rwmmp4nhhvdsohmlj5ezdlv522loc7c2bpcqa2a
                      - tenancyOCID: ocid1.tenancy.oc1..aaaaaaaazizzbqqbjv2se3y3fvm5osfumnorh32nznanirqoju3uks4buh4q
                        name: cost-management-compute-enable-monitoring-name
                        numPending: "0"
                        estimatedCostSaving: "0.00"
                        status: PENDING
                        importance: CRITICAL
                        recommendationId: ocid1.optimizerrecommendation.oc1..aaaaaaaa623kye5cs4d7tkwvicizre3hhgmcu2hnfkpkw6xliniqqqf2xz2a
                      - tenancyOCID: ocid1.tenancy.oc1..aaaaaaaazizzbqqbjv2se3y3fvm5osfumnorh32nznanirqoju3uks4buh4q
                        name: cost-management-compute-host-underutilized-name
                        numPending: "0"
                        estimatedCostSaving: "0.00"
                        status: PENDING
                        importance: HIGH
                        recommendationId: ocid1.optimizerrecommendation.oc1..aaaaaaaavnra3wc236hif2klnr4pumgojeflmcmqn7gn2r5ylb6kivruc25a
                      - tenancyOCID: ocid1.tenancy.oc1..aaaaaaaazizzbqqbjv2se3y3fvm5osfumnorh32nznanirqoju3uks4buh4q
                        name: cost-management-object-storage-enable-olm-name
                        numPending: "6"
                        estimatedCostSaving: "0.00"
                        status: PENDING
                        importance: MODERATE
                        recommendationId: ocid1.optimizerrecommendation.oc1..aaaaaaaa6runlvt3n53d5534mfail3w2lo7nt64ijp5i4sxxhxrn2n2pqmsq
                properties:
                  error:
                    type: string
                    minLength: 1
                  recommendations:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      type: object
                      properties:
                        tenancyOCID:
                          type: string
                          minLength: 1
                        name:
                          type: string
                          minLength: 1
                        numPending:
                          type: string
                          minLength: 1
                        estimatedCostSaving:
                          type: string
                          minLength: 1
                        status:
                          type: string
                          minLength: 1
                        importance:
                          type: string
                          minLength: 1
                        recommendationId:
                          type: string
                          minLength: 1
      operationId: GetOciNativeRecommendations
  /oracle-cloud/configurations:
    get:
      summary: Retrieve Oracle Cloud profiles configurations from DB
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: ""
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - id
                    - profile
                    - tenancyOCID
                    - userOCID
                    - keyFingerprint
                    - region
                    - privateKey
                  properties:
                    id:
                      type: string
                      minLength: 1
                    profile:
                      type: string
                      minLength: 1
                    tenancyOCID:
                      type: string
                      minLength: 1
                    userOCID:
                      type: string
                      minLength: 1
                    keyFingerprint:
                      type: string
                      minLength: 1
                    region:
                      type: string
                      minLength: 1
                    privateKey:
                      type: string
                      minLength: 1
                x-examples:
                  example-1:
                    - id: 6166f51395ebda89d84a80b3
                      profile: ABRPROVA999
                      tenancyOCID: ocid1.tenancy.ABRTen444
                      userOCID: ocid1.user.ABRUsr444
                      keyFingerprint: ABRFinger1
                      region: ABRRegion1
                      privateKey: ABRPrivate
                    - id: 6167e9c827c621ada11a170b
                      profile: ABRPROVA1
                      tenancyOCID: ocid1.tenancy.ABRTen
                      userOCID: ocid1.user.ABRUsr
                      keyFingerprint: ABRFinger
                      region: ABRRegion
                      privateKey: ABRPrivate
      operationId: GetOciProfiles
    post:
      summary: Add a new Oracle Cloud profile configuration to DB
      operationId: AddOciProfile
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  id:
                    type: string
                    minLength: 1
                  profile:
                    type: string
                    minLength: 1
                  tenancyOCID:
                    type: string
                    minLength: 1
                  userOCID:
                    type: string
                    minLength: 1
                  keyFingerprint:
                    type: string
                    minLength: 1
                  region:
                    type: string
                    minLength: 1
                  privateKey:
                    type: string
                    minLength: 1
                required:
                  - id
                  - profile
                  - tenancyOCID
                  - userOCID
                  - keyFingerprint
                  - region
                  - privateKey
                x-examples:
                  example-1:
                    id: 6167e9c827c621ada11a170b
                    profile: ABRPROVA1
                    tenancyOCID: ocid1.tenancy.ABRTen
                    userOCID: ocid1.user.ABRUsr
                    keyFingerprint: ABRFinger
                    region: ABRRegion
                    privateKey: ABRPrivate
      requestBody:
        content:
          application/json:
            schema:
              description: ""
              type: object
              properties:
                id:
                  type: string
                profile:
                  type: string
                  minLength: 1
                tenancyOCID:
                  type: string
                  minLength: 1
                userOCID:
                  type: string
                  minLength: 1
                keyFingerprint:
                  type: string
                  minLength: 1
                region:
                  type: string
                  minLength: 1
                privateKey:
                  type: string
                  minLength: 1
              required:
                - id
                - profile
                - tenancyOCID
                - userOCID
                - keyFingerprint
                - region
                - privateKey
              x-examples:
                example-1:
                  id: ""
                  profile: ABRPROVA1
                  tenancyOCID: ocid1.tenancy.ABRTen
                  userOCID: ocid1.user.ABRUsr
                  keyFingerprint: ABRFinger
                  region: ABRRegion
                  privateKey: ABRPrivate
  /aws/configurations:
    get:
      summary: Retrieve AWS profiles configurations from DB
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                x-examples:
                  example-1:
                    - id: 62bb081a9f5b0b687849441d
                      accesskeyid: ABRPROVA1111
                      secretaccesskey: null
                      region: ABRRegion1111
                      selected: false
                    - id: 62bbf31bed64bccc8d1fa939
                      accesskeyid: ABRPROVA3333
                      secretaccesskey: null
                      region: ABRRegion3333
                      selected: true
                    - id: 62bbf369ed64bccc8d1fa93a
                      accesskeyid: ABRPROVA999
                      secretaccesskey: null
                      region: ABRRegion1
                      selected: true
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    accesskeyid:
                      type: string
                    secretaccesskey:
                      type: string
                    region:
                      type: string
                    selected:
                      type: boolean
      operationId: GetAwsProfiles
    post:
      summary: Add a new Oracle Cloud profile configuration to DB
      operationId: AddAwsProfile
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  id:
                    type: string
                    minLength: 1
                  profile:
                    type: string
                    minLength: 1
                  tenancyOCID:
                    type: string
                    minLength: 1
                  userOCID:
                    type: string
                    minLength: 1
                  keyFingerprint:
                    type: string
                    minLength: 1
                  region:
                    type: string
                    minLength: 1
                  privateKey:
                    type: string
                    minLength: 1
                required:
                  - id
                  - profile
                  - tenancyOCID
                  - userOCID
                  - keyFingerprint
                  - region
                  - privateKey
                x-examples:
                  example-1:
                    id: 6167e9c827c621ada11a170b
                    profile: ABRPROVA1
                    tenancyOCID: ocid1.tenancy.ABRTen
                    userOCID: ocid1.user.ABRUsr
                    keyFingerprint: ABRFinger
                    region: ABRRegion
                    privateKey: ABRPrivate
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                accesskeyid:
                  type: string
                secretaccesskey:
                  type: string
                region:
                  type: string
                selected:
                  type: boolean
              x-examples:
                example-1:
                  id: 62bbf369ed64bccc8d1fa93a
                  accesskeyid: ABRPROVA2222
                  secretaccesskey: ABRPrivate2222
                  region: ABRRegion2222
                  selected: false
    parameters: []
  /azure/configurations:
    get:
      summary: Retrieve Azure profiles configurations from DB
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                x-examples:
                  example-1:
                    - id: 62bb081a9f5b0b687849441d
                      tenantid: ABRPROVA1111
                      clientid: CLIENTID1111
                      clientsecret: null
                      subscriptionid: XXXXXXX1111
                      region: ABRRegion1111
                      selected: false
                    - id: 62bbf31bed64bccc8d1fa939
                      tenantid: ABRPROVA3333
                      clientid: CLIENTID3333
                      clientsecret: null
                      subscriptionid: XXXXXXX3333
                      region: ABRRegion3333
                      selected: true
                    - id: 62bbf369ed64bccc8d1fa93a
                      tenantid: ABRPROVA9999
                      clientid: CLIENTID9999
                      clientsecret: null
                      subscriptionid: XXXXXXX99999
                      region: ABRRegion1
                      selected: true
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    tenantid:
                      type: string
                    clientid:
                      type: string
                    clientsecret:
                      type: string
                    subscriptionid:
                      type: string
                    region:
                      type: string
                    selected:
                      type: boolean
      operationId: GetAzureProfiles
    post:
      summary: Add a new Azure profile configuration to DB
      operationId: AddAzureProfile
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  id:
                    type: string
                    minLength: 1
                  tenantid:
                    type: string
                    minLength: 1
                  clientid:
                    type: string
                    minLength: 1
                  clientsecret:
                    type: string
                    minLength: 1
                  subscriptionid:
                    type: string
                    minLength: 1
                  region:
                    type: string
                    minLength: 1
                required:
                  - id
                  - tenantid
                  - clientid
                  - clientsecret
                  - subscriptionid
                  - region
                x-examples:
                  example-1:
                    id: 62bbf369ed64bccc8d1fa93a
                    tenantid: ABRPROVA9999
                    clientid: CLIENTID9999
                    clientsecret: ABRPrivate
                    subscriptionid: XXXXXXX99999
                    region: ABRRegion1
                    selected: false
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                tenantid:
                  type: string
                clientid:
                  type: string
                clientsecret:
                  type: string
                subscriptionid:
                  type: string
                region:
                  type: string
                selected:
                  type: boolean
              x-examples:
                example-1:
                  id: 62bbf369ed64bccc8d1fa93a
                  tenantid: ABRPROVA9999
                  clientid: CLIENTID9999
                  clientsecret: ABRPrivate
                  subscriptionid: XXXXXXX99999
                  region: ABRRegion1
                  selected: false
    parameters: []
  "/oracle-cloud/configurations/{id}":
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: ProfileId
    put:
      summary: Update an existing Oracle Cloud profile on DB
      operationId: UpdateOciProfile
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  id:
                    type: string
                    minLength: 1
                  profile:
                    type: string
                    minLength: 1
                  tenancyOCID:
                    type: string
                    minLength: 1
                  userOCID:
                    type: string
                    minLength: 1
                  keyFingerprint:
                    type: string
                    minLength: 1
                  region:
                    type: string
                    minLength: 1
                  privateKey:
                    type: string
                    minLength: 1
                required:
                  - id
                  - profile
                  - tenancyOCID
                  - userOCID
                  - keyFingerprint
                  - region
                  - privateKey
                x-examples:
                  example-1:
                    id: 6166f51395ebda89d84a80b3
                    profile: ABRPROVA999
                    tenancyOCID: ocid1.tenancy.ABRTen444
                    userOCID: ocid1.user.ABRUsr444
                    keyFingerprint: ABRFinger1
                    region: ABRRegion1
                    privateKey: ABRPrivate
      requestBody:
        content:
          application/json:
            schema:
              description: ""
              type: object
              properties:
                id:
                  type: string
                  minLength: 1
                profile:
                  type: string
                  minLength: 1
                tenancyOCID:
                  type: string
                  minLength: 1
                userOCID:
                  type: string
                  minLength: 1
                keyFingerprint:
                  type: string
                  minLength: 1
                region:
                  type: string
                  minLength: 1
                privateKey:
                  type: string
                  minLength: 1
              required:
                - id
                - profile
                - tenancyOCID
                - userOCID
                - keyFingerprint
                - region
                - privateKey
              x-examples:
                example-1:
                  id: 6166f51395ebda89d84a80b3
                  profile: ABRPROVA999
                  tenancyOCID: ocid1.tenancy.ABRTen444
                  userOCID: ocid1.user.ABRUsr444
                  keyFingerprint: ABRFinger1
                  region: ABRRegion1
                  privateKey: ABRPrivate
    delete:
      summary: Delete an a existing Oracle Cloud profile from DB
      operationId: DeleteOciProfile
      responses:
        "204":
          description: No Content
  "/aws/configurations/{id}":
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: ProfileId
    put:
      summary: Update an existing AWS profile on DB
      operationId: UpdateAwsProfile
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  id:
                    type: string
                    minLength: 1
                  profile:
                    type: string
                    minLength: 1
                  tenancyOCID:
                    type: string
                    minLength: 1
                  userOCID:
                    type: string
                    minLength: 1
                  keyFingerprint:
                    type: string
                    minLength: 1
                  region:
                    type: string
                    minLength: 1
                  privateKey:
                    type: string
                    minLength: 1
                required:
                  - id
                  - profile
                  - tenancyOCID
                  - userOCID
                  - keyFingerprint
                  - region
                  - privateKey
                x-examples:
                  example-1:
                    id: 6166f51395ebda89d84a80b3
                    profile: ABRPROVA999
                    tenancyOCID: ocid1.tenancy.ABRTen444
                    userOCID: ocid1.user.ABRUsr444
                    keyFingerprint: ABRFinger1
                    region: ABRRegion1
                    privateKey: ABRPrivate
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                accesskeyid:
                  type: string
                secretaccesskey:
                  type: string
                region:
                  type: string
                selected:
                  type: boolean
              x-examples:
                example-1:
                  id: 62bbf369ed64bccc8d1fa93a
                  accesskeyid: ABRPROVA999
                  secretaccesskey: ABRPrivate
                  region: ABRRegion1
                  selected: true
    delete:
      summary: Delete an a existing Oracle Cloud profile from DB
      operationId: DeleteAwsProfile
      responses:
        "204":
          description: No Content
  "/azure/configurations/{id}":
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: ProfileId
    put:
      summary: Update an existing Azure profile on DB
      operationId: UpdateAzureProfile
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  id:
                    type: string
                    minLength: 1
                  tenantid:
                    type: string
                    minLength: 1
                  clientid:
                    type: string
                    minLength: 1
                  clientsecret:
                    type: string
                    minLength: 1
                  subscriptionid:
                    type: string
                    minLength: 1
                  region:
                    type: string
                    minLength: 1
                required:
                  - id
                  - tenantid
                  - clientid
                  - clientsecret
                  - subscriptionid
                  - region
                x-examples:
                  example-1:
                    id: 62bbf369ed64bccc8d1fa93a
                    tenantid: ABRPROVA9999
                    clientid: CLIENTID9999
                    clientsecret: ABRPrivate
                    subscriptionid: XXXXXXX99999
                    region: ABRRegion1
                    selected: false
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                tenantid:
                  type: string
                clientid:
                  type: string
                clientsecret:
                  type: string
                subscriptionid:
                  type: string
                region:
                  type: string
                selected:
                  type: boolean
              x-examples:
                example-1:
                  id: 62bbf369ed64bccc8d1fa93a
                  tenantid: ABRPROVA9999
                  clientid: CLIENTID9999
                  clientsecret: ABRPrivate
                  subscriptionid: XXXXXXX99999
                  region: ABRRegion1
                  selected: false
    delete:
      summary: Delete an a existing Azure profile from DB
      operationId: DeleteAzureProfile
      responses:
        "204":
          description: No Content
  /oracle-cloud/oci-objects:
    get:
      summary: Get Oracle Cloud configured objects
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: ""
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - id
                    - profileID
                    - objects
                    - createdAt
                    - error
                  properties:
                    id:
                      type: string
                      minLength: 1
                    profileID:
                      type: string
                      minLength: 1
                    objects:
                      type: array
                      uniqueItems: true
                      minItems: 1
                      items:
                        required:
                          - objectName
                          - objectNumber
                        properties:
                          objectName:
                            type: string
                            minLength: 1
                          objectNumber:
                            type: number
                    createdAt:
                      type: string
                      minLength: 1
                    error:
                      type: string
                x-examples:
                  example-1:
                    - id: 627537ad5fa23c28788efcd7
                      profileID: 6140c473413cf9de756f9848
                      objects:
                        - objectName: instance
                          objectNumber: 6
                        - objectName: database
                          objectNumber: 0
                        - objectName: network
                          objectNumber: 10
                        - objectName: block volume
                          objectNumber: 6
                        - objectName: bucket
                          objectNumber: 4
                        - objectName: NFS
                          objectNumber: 1
                      createdAt: "2022-05-06T14:58:53.64Z"
                      error: ""
                    - id: 627537bc5fa23c28788efcd8
                      profileID: 61ae5077f8e91e54e3d256ce
                      objects:
                        - objectName: instance
                          objectNumber: 19
                        - objectName: database
                          objectNumber: 3
                        - objectName: network
                          objectNumber: 9
                        - objectName: block volume
                          objectNumber: 8
                        - objectName: bucket
                          objectNumber: 10
                        - objectName: NFS
                          objectNumber: 2
                      createdAt: "2022-05-06T14:59:08.239Z"
                      error: ""
      operationId: GetOciObjects
      description: Retrieve number of objects configuerd in Oracle Cloud
  /oracle-cloud/oci-recommendations:
    get:
      summary: Get recommendations saved from Oracle Cloud Infrastructure
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  recommendations:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      required:
                        - seqValue
                        - profileID
                        - category
                        - suggestion
                        - compartmentID
                        - compartmentName
                        - name
                        - resourceID
                        - objectType
                        - createdAt
                      properties:
                        seqValue:
                          type: number
                        profileID:
                          type: string
                          minLength: 1
                        category:
                          type: string
                          minLength: 1
                        suggestion:
                          type: string
                          minLength: 1
                        compartmentID:
                          type: string
                          minLength: 1
                        compartmentName:
                          type: string
                          minLength: 1
                        name:
                          type: string
                          minLength: 1
                        resourceID:
                          type: string
                        objectType:
                          type: string
                          minLength: 1
                        details:
                          type: array
                          uniqueItems: true
                          minItems: 1
                          items:
                            required:
                              - name
                              - value
                            properties:
                              name:
                                type: string
                                minLength: 1
                              value:
                                type: string
                                minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                required:
                  - recommendations
                x-examples:
                  example-1:
                    recommendations:
                      - seqValue: 2
                        profileID: 61ae5077f8e91e54e1d256be
                        category: Software Infracstructure Service Rightsizing
                        suggestion: Resize oversized Database instance
                        compartmentID: ocid1.compartment.oc1..aaaaaaaabatr3wysjijfzlsdjscdy2jz3s7rcg3i6ihlkx5ukh6pv22xjofa
                        compartmentName: Exadata
                        name: exacloud01s-bb91t1
                        resourceID: ""
                        objectType: Database
                        details:
                          - name: Instance Name
                            value: exacloud01s-bb91t1
                          - name: Ercole Installed
                            value: "NO"
                          - name: AWR Enabled
                            value: "NO"
                        createdAt: "2022-05-31T15:27:53.18Z"
                      - seqValue: 2
                        profileID: 61ae5077f8e91e54e1d256b1
                        category: Software Infracstructure Service Rightsizing
                        suggestion: Resize oversized Database instance
                        compartmentID: ocid1.compartment.oc1..aaaaaaaabatr3wysjijfzlsdjscdy2jz3s7rcg3i6ihlkx5ukh6pv22xjofa
                        compartmentName: Exadata
                        name: exacloud01s-bb91t2
                        resourceID: ""
                        objectType: Database
                        details:
                          - name: Instance Name
                            value: exacloud01s-bb91t2
                          - name: Ercole Installed
                            value: "NO"
                          - name: AWR Enabled
                            value: "NO"
                        createdAt: "2022-05-31T15:27:53.18Z"
      operationId: GetOciRecommendations
      description: Retrieve information related to Oracle Cloud and saved in Ercole EB
    parameters: []
  "/oracle-cloud/oci-recommendation-errors/{seqnum}":
    parameters:
      - schema:
          type: string
        name: seqnum
        in: path
        required: true
        description: The sequence number errors to be retrieved
    get:
      summary: Get recommendation errors saved from Oracle Cloud Infrastructure
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: ""
                minItems: 1
                uniqueItems: true
                items:
                  type: object
                  required:
                    - seqValue
                    - profileID
                    - category
                    - createdAt
                    - error
                  properties:
                    seqValue:
                      type: number
                    profileID:
                      type: string
                      minLength: 1
                    category:
                      type: string
                      minLength: 1
                    createdAt:
                      type: string
                      minLength: 1
                    error:
                      type: string
                      minLength: 1
                x-examples:
                  example-1:
                    - seqValue: 3
                      profileID: aaa
                      category: Object Storage Optimization
                      createdAt: "2022-06-01T06:36:53.715Z"
                      error: "1 error occurred:\n\t* Get \"https://identity.eu-milan-1.oraclecloud.com/20160918/compartments?compartmentId=ocid1.tenancy.oc1..aaaaaaaa6h2aebswjd7fxy4ljci4vpwa3npurneuzyk6bthqiutyr4mct6ga\": dial tcp: lookup identity.eu-milan-1.oraclecloud.com: no such host\n\n"
      operationId: GetOciRecommendationErrors
      description: Retrieve error information related to Oracle Cloud and saved in Ercole EB
  /oracle-cloud/retrieve-last-oci-recommendations:
    get:
      summary: Force retrieving recommendations from Oracle Cloud Infrastructure
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
              examples: {}
      operationId: ForceGetOciRecommendations
      description: Force the execution of queries to retrieve information from Oracle Cloud
  "/oracle-cloud/profile-selection/{profileid}/{selected}":
    put:
      summary: Define if a profile is active
      operationId: SelectOciProfile
      responses:
        "200":
          description: OK
      description: Define if a profile is active or not to retrieve recommendations associated to it
    parameters:
      - schema:
          type: string
        name: profileid
        in: path
        required: true
        description: Profile to be selected
      - schema:
          type: boolean
        name: selected
        in: path
        required: true
        description: selected (true) / not selected (false)
  /aws/aws-recommendation-errors:
    get:
      tags:
        - thunder-service
      summary: Get recommendation errors saved from Amazon Web Service Infrastructure
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    seqValue:
                      type: integer
                    category:
                      type: string
                    errors:
                      type: string
                    createdAt:
                      type: string
                      minLength: 1
  "/aws/aws-recommendation-errors/{seqnum}":
    get:
      tags:
        - thunder-service
      summary: Get recommendation errors by seq value saved from Amazon Web Service Infrastructure
      parameters:
        - in: path
          name: seqnum
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    seqValue:
                      type: integer
                    category:
                      type: string
                    errors:
                      type: string
                    createdAt:
                      type: string
                      minLength: 1
  /aws/aws-recommendations:
    get:
      summary: Get recommendations saved from Amazon Web Service Infrastructure
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  recommendations:
                    type: array
                    uniqueItems: true
                    minItems: 1
                    items:
                      required:
                        - seqValue
                        - category
                        - suggestion
                        - name
                        - objectType
                        - createdAt
                      properties:
                        seqValue:
                          type: number
                        category:
                          type: string
                          minLength: 1
                        suggestion:
                          type: string
                          minLength: 1
                        name:
                          type: string
                          minLength: 1
                        objectType:
                          type: string
                          minLength: 1
                        details:
                          type: array
                          uniqueItems: true
                          minItems: 1
                          items:
                            required:
                              - name
                              - value
                            properties:
                              name:
                                type: string
                                minLength: 1
                              value:
                                type: string
                                minLength: 1
                        createdAt:
                          type: string
                          minLength: 1
                        profileName:
                          type: string
                required:
                  - recommendations
                x-examples:
                  example-1:
                    recommendations:
                      - seqValue: 2
                        profileID: 61ae5077f8e91e54e1d256be
                        category: Software Infracstructure Service Rightsizing
                        suggestion: Resize oversized Database instance
                        name: exacloud01s-bb91t1
                        resourceID: ""
                        objectType: Database
                        details:
                          - name: Instance Name
                            value: exacloud01s-bb91t1
                          - name: Ercole Installed
                            value: "NO"
                          - name: AWR Enabled
                            value: "NO"
                        createdAt: "2022-05-31T15:27:53.18Z"
                      - seqValue: 2
                        profileID: 61ae5077f8e91e54e1d256b1
                        category: Software Infracstructure Service Rightsizing
                        suggestion: Resize oversized Database instance
                        name: exacloud01s-bb91t2
                        resourceID: ""
                        objectType: Database
                        details:
                          - name: Instance Name
                            value: exacloud01s-bb91t2
                          - name: Ercole Installed
                            value: "NO"
                          - name: AWR Enabled
                            value: "NO"
                        createdAt: "2022-05-31T15:27:53.18Z"
      operationId: GetAwsRecommendations
      description: Retrieve information related to Amazon Web Service and saved in Ercole EB
    parameters: []
  /aws/aws-objects:
    get:
      summary: Get obejcts count saved from Amazon Web Service Infrastructure
      tags:
        - thunder-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: ""
                minItems: 0
                items:
                  type: object
                  properties:
                    seqValue:
                      type: number
                    profileName:
                      type: string
                    createdAt:
                      type: string
                    objectsCount:
                      type: object
                      properties:
                        name:
                          type: string
                        count:
                          type: integer
  /aws/retrieve-last-aws-recommendations:
    get:
      summary: Force retrieving recommendations from Amazon Web Service Infrastructure
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
              examples: {}
      operationId: ForceGetAwsRecommendations
      description: Force the execution of queries to retrieve information from Amazon Web Service
  "/admin/roles/{name}":
    parameters:
      - schema:
          type: string
        name: name
        in: path
        required: true
    put:
      summary: Update Role
      operationId: UpdateRole
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Role"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Role"
        description: ""
      description: ""
      tags:
        - api-service
    delete:
      summary: Delete Role
      operationId: RemoveRole
      responses:
        "204":
          description: No Content
    get:
      tags:
        - api-service
      operationId: GetRole
      summary: Get Role
      description: Get Role
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Role"
  /admin/roles:
    parameters: []
    get:
      summary: Get Roles
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  roles:
                    type: array
                    items:
                      properties:
                        name:
                          type: string
                required:
                  - roles
      operationId: GetRoles
    post:
      summary: Insert Role
      operationId: AddRole
      responses:
        "201":
          description: Inserted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Role"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Role"
  "/groups/{name}":
    parameters:
      - schema:
          type: string
        name: name
        in: path
        required: true
    put:
      summary: Update Group
      operationId: UpdateGroup
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Group"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Group"
        description: ""
      description: ""
      tags:
        - api-service
    delete:
      summary: Delete Group
      operationId: DeleteGroup
      responses:
        "204":
          description: No Content
    get:
      tags:
        - api-service
      operationId: GetGroup
      summary: Get Group
      description: Get Group
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Group"
  /groups:
    parameters: []
    get:
      summary: Get Groups
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  groups:
                    type: array
                    items:
                      properties:
                        name:
                          type: string
                required:
                  - groups
      operationId: GetGroups
    post:
      summary: Insert Group
      operationId: InsertGroup
      responses:
        "201":
          description: Inserted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Group"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Group"
  "/admin/users/{username}":
    parameters:
      - schema:
          type: string
        name: username
        in: path
        required: true
    put:
      tags:
        - api-service
      summary: Update user
      operationId: UpdateUser
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
        description: ""
      description: ""
    delete:
      tags:
        - api-service
      summary: Delete User
      operationId: DeleteUser
      responses:
        "204":
          description: No Content
  "/users/{username}":
    parameters:
      - schema:
          type: string
        name: username
        in: path
        required: true
    get:
      tags:
        - api-service
      operationId: GetUser
      summary: Get User
      description: Get User
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
  "/admin/users/{username}/reset-password":
    parameters:
      - schema:
          type: string
        name: username
        in: path
        required: true
    post:
      tags:
        - api-service
      summary: reset user password
      operationId: ResetPassword
      responses:
        "200":
          description: "Ok"
          content:
            application/json:
              schema:
                type: string

  "/admin/users/{username}/change-password":
    parameters:
      - schema:
          type: string
        name: username
        in: path
        required: true
    post:
      tags:
        - api-service
      summary: change user password
      operationId: ChangePassword
      responses:
        "204":
          description: No Content
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                oldPassword:
                  type: string
                newPassword:
                  type: string
                confirmedPassword:
                  type: string
  /users:
    parameters: []
    get:
      summary: Get Users
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/User"
  /users/info:
    parameters: []
    get:
      summary: get current user info
      tags:
        - api-service
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                properties:
                  username:
                    type: string
                  groups:
                    type: array
                    items:
                      type: string
  /admin/users:
    post:
      summary: Insert user
      operationId: InsertUser
      responses:
        "201":
          description: Created
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
  "/users/ldap/{user}":
    parameters:
      - schema:
          type: string
        name: user
        in: path
        required: true
    get:
      tags:
        - api-service
      operationId: GetLDAPUsers
      summary: Get LDAP Users
      description: Get LDAP Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  $ref: "#/components/schemas/UsersLDAP"
  "/admin/ldap/users":
    post:
      tags:
        - api-service
      operationId: AddUserLDAP
      summary: Add LDAP User
      description: Add LDAP User
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                userLdap:
                  $ref: "#/components/schemas/UsersLDAP"
                groups:
                  type: array
                  items:
                    type: string
      responses:
        "201":
          description: Created
  /nodes:
    get:
      tags:
        - api-service
      operationId: GetNodes
      summary: Get nodes
      description: Get nodes
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    parent:
                      type: string
  /admin/nodes/{name}:
    parameters:
      - in: path
        name: name
        description: Name of node
        required: true
        schema:
          type: string
    get:
      tags:
        - api-service
      operationId: GetNode
      summary: Get node
      description: Get node
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: ""
                type: object
                $ref: "#/components/schemas/Node"
    put:
      tags:
        - api-service
      operationId: UpdateNode
      summary: Update node
      description: Update node
      requestBody:
        content:
          application/json:
            schema:
              description: ""
              type: object
              $ref: "#/components/schemas/Node"
      responses:
        "204":
          description: No Content
    delete:
      tags:
        - api-service
      operationId: RemoveNode
      summary: Remove node
      description: Remove node
      responses:
        "204":
          description: No Content
  /admin/nodes:
    post:
      tags:
        - api-service
      operationId: AddNode
      summary: Add node
      description: Add node
      requestBody:
        content:
          application/json:
            schema:
              description: ""
              type: object
              $ref: "#/components/schemas/Node"
      responses:
        "201":
          description: Created

security:
  - basicAuthApiService: []
  - tokenAuthApiService: []
